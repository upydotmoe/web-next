import{l as T,k as W,D as F,p as R,r as n,S as z,c as K,w as O,o as w,b as a,x as c,u as e,s as C,K as p,f as d,U as b,t as h,y as N,e as x,v as k,Q}from"./entry.cf646e34.js";import{u as U}from"./ProBadge.57bd012b.js";import{L as j}from"./Layout.4e5fac60.js";import{W as q}from"./WorkList.ba89b235.js";import{M as G}from"./ModalView.935da9dc.js";import{_ as H}from"./LoadingEmptyErrorMessage.a0460cc5.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import"./useReport.6131f97d.js";import"./index.7225a9bd.js";import"./MiniArtworkPreview.c4a13ea7.js";import"./user-counters-api.497b7483.js";import"./useSetting.06c094c6.js";import"./useFeed.cb0f1d63.js";const X={id:"lists"},Y={class:"navigations"},Z={class:"title"},ee={class:"buttons"},te={key:0,class:"filter-buttons"},oe={class:"mt-4"},ae={key:0,class:"art-list-view-paging-control"},se={id:"recent-modal",class:"modal work-view"},ne={__name:"index",setup(ie){const g=T(),{oApiConfiguration:P,fetchOptions:V}=W(),A=U(P,V()),{$router:B}=F();R(()=>{g.loggedIn||B.push("/"),m()});const r=n(void 0),_=async t=>{r.value=t,u.page=0,await m()},y=n([]),l=n({pagination:{enablePrev:!0,enableNext:!0}}),m=async()=>{const t=await E(),o=t.works,s=t.pagination;!o.length&&s.record_total===0?S():(y.value=o,s.next_previous.next_page===null?l.value.pagination.enableNext=!1:l.value.pagination.enableNext=!0,s.next_previous.prev_page===null?l.value.pagination.enablePrev=!1:l.value.pagination.enablePrev=!0)},i=n(!0),u=z({perPage:30,page:n(0)}),E=async()=>{u.page===0&&(i.value=!0);const[t,o]=await A.getFollowing({pagination:{perPage:u.perPage,page:u.page},explicitMode:r.value});if(o)D();else return I(),t},$=async t=>{t==="prev"?u.page-=1:u.page+=1,await m(),window.scrollTo(0,0)},f=n(!1),S=()=>{f.value=!0},v=n(!1),D=()=>{i.value=!1,v.value=!0,hideButton()},I=()=>{i.value=!1,f.value=!1,v.value=!1},M=n(null),L=(t,o=!1)=>{M.value.view(t,o),Q().openModal("recent-modal")};return(t,o)=>(w(),K(j,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:O(()=>[a("div",X,[a("div",Y,[a("div",Z,c(t.$t("followings.followings")),1),a("div",ee,[e(g).loggedIn&&e(g).user.user_settings.show_explicit?(w(),C("div",te,[a("p",{class:p(["rounded-l-md button-item",[e(r)===void 0?"button":"theme-color"]]),onClick:o[0]||(o[0]=s=>_(void 0))},c(t.$t("default")),3),a("p",{class:p(["button-item",[e(r)==="safe"?"button":"theme-color"]]),onClick:o[1]||(o[1]=s=>_("safe"))},c(t.$t("safe")),3),a("p",{class:p(["rounded-r-md button-item",[e(r)==="explicit"?"button":"theme-color"]]),onClick:o[2]||(o[2]=s=>_("explicit"))},[d(b,{name:"i-material-symbols-explicit-outline",class:p({"text-white":e(r)==="explicit"})},null,8,["class"]),h(" "+c(t.$t("explicit")),1)],2)])):N("",!0)])]),d(H,{loading:e(i),empty:e(f),error:e(v),fetch:m},null,8,["loading","empty","error"]),x(a("div",oe,[x(d(q,{"section-class":"work-grid-10",works:e(y),view:L},null,8,["works"]),[[k,!e(f)]])],512),[[k,!e(i)]]),!e(i)&&!e(f)&&!e(v)?(w(),C("div",ae,[a("button",{class:p([e(l).pagination.enablePrev?"primary-button":"disabled-button"]),onClick:o[3]||(o[3]=s=>$("prev"))},[d(b,{name:"i-ion-chevron-back-outline"}),h(" "+c(t.$t("pagination.previous")),1)],2),a("button",{class:p([e(l).pagination.enableNext?"primary-button":"disabled-button"]),onClick:o[4]||(o[4]=s=>$("next"))},[h(c(t.$t("pagination.next"))+" ",1),d(b,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):N("",!0),a("div",se,[x(d(G,{ref_key:"recentModalViewRef",ref:M,section:"recent"},null,512),[[k,!e(i)]])])])]),_:1}))}},he=J(ne,[["__scopeId","data-v-782a9649"]]);export{he as default};
