import{l as U,k as X,a1 as Y,r as i,L as Z,P as J,c as ee,w as te,o as w,b as s,t as a,I as n,u as e,q as k,x as $,f as r,Q as b,s as y,e as M,v as P,bs as oe,O as A,S as se,T as ne}from"./entry.ea93fdf2.js";import{u as ae}from"./ProBadge.e3dc9c3a.js";import{L as le}from"./Layout.7db09108.js";import{W as ie}from"./WorkList.4a26cf02.js";import{M as re}from"./ModalView.4408fcca.js";import{_ as ue}from"./LoadingEmptyErrorMessage.118d4a88.js";import{_ as de}from"./TagFilterSelection.d6840dfb.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";import"./useReport.d0d73bb6.js";import"./index.af539870.js";import"./MiniArtworkPreview.a5a5c06c.js";import"./user-counters-api.8980a299.js";import"./useSetting.33e0bf81.js";import"./useFeed.53b119c5.js";const ce=_=>(se("data-v-59a20ef9"),_=_(),ne(),_),me={id:"lists"},ve={class:"navigations"},fe={class:"title"},ge={class:"buttons"},we={class:"filter-buttons"},be={class:"filter-buttons"},ye={class:"filter-buttons"},he={class:"inline-block w-full md:w-52 group"},ke={class:"flex items-center py-2 px-3 w-full rounded-md border-2 border-transparent outline-none md:w-52 theme-color hover:button focus:outline-none"},$e={class:"flex-1 pr-1"},_e=ce(()=>s("span",null,[s("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),xe={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-52 theme-color group-hover:scale-100"},Ce={key:0,class:"filter-buttons"},Me={class:"mt-4"},Pe={key:0,class:"art-list-view-paging-control"},Se={id:"popular-modal",class:"modal work-view"},Ie={__name:"index",setup(_){const m=U(),{oApiConfiguration:j,fetchOptions:z}=X(),W=ae(j,z());Y(()=>{d()});const v=i(void 0),S=async o=>{v.value=o,c.page=0,await d()},f=i("daily"),x=async o=>{f.value=o,c.page=0,await d()},B=i(null),D=()=>{B.value.init(oe(I.value)),A().openModal("tag-filter-selection-modal")},L=i(""),I=i(),V=i(0),O=async(o,t)=>{I.value=o,L.value=t,V.value=t!==""?t.split(",").length:0,c.page=0,A().closeModal("tag-filter-selection-modal"),await d()};Z(async()=>I.value,o=>{d()});const N=i([]),g=i({pagination:{enablePrev:!0,enableNext:!0}}),d=async()=>{const o=await q(),t=o.works,l=o.pagination;!t.length&&l.record_total===0?Q():(N.value=t,l.next_previous.next_page===null?g.value.pagination.enableNext=!1:g.value.pagination.enableNext=!0,l.next_previous.prev_page===null?g.value.pagination.enablePrev=!1:g.value.pagination.enablePrev=!0)},p=i(!0),c=J({perPage:30,page:i(0)}),q=async()=>{c.page===0&&(p.value=!0);const[o,t]=await W.getMostPopular({pagination:{perPage:c.perPage,page:c.page},range:f.value,rangeMode:u.value,explicitMode:v.value,tags:L.value});if(t)G();else return H(),o},R=async o=>{o==="prev"?c.page-=1:c.page+=1,await d(),window.scrollTo(0,0)},h=i(!1),Q=()=>{h.value=!0},C=i(!1),G=()=>{p.value=!1,C.value=!0},H=()=>{p.value=!1,h.value=!1,C.value=!1},E=i(null),K=(o,t=!1)=>{E.value.view(o,t),A().openModal("popular-modal")},u=i("views"),F=i(""),T=async(o,t)=>{u.value=o,F.value=t,await d()};return(o,t)=>(w(),ee(le,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:te(()=>[s("div",me,[s("div",ve,[s("div",fe,a(o.$t("artworks.popularArtworks")),1),s("div",ge,[s("div",we,[s("button",{class:n(["px-3 rounded-md button-item",e(V)?"button":"theme-color"]),onClick:D},a(e(V))+" "+a(o.$t("tagsApplied")),3)]),s("div",be,[s("p",{class:n(["rounded-l-md button-item",[e(f)==="daily"?"button":"theme-color"]]),onClick:t[0]||(t[0]=l=>x("daily"))},a(o.$t("daily")),3),s("p",{class:n(["button-item",[e(f)==="weekly"?"button":"theme-color"]]),onClick:t[1]||(t[1]=l=>x("weekly"))},a(o.$t("weekly")),3),s("p",{class:n(["button-item",e(f)==="monthly"?"button":"theme-color",{"rounded-r-md":!e(m).loggedIn}]),onClick:t[2]||(t[2]=l=>x("monthly"))},a(o.$t("monthly")),3),e(m).loggedIn?(w(),k("p",{key:0,class:n(["rounded-r-md button-item",e(f)==="all"?"button":"theme-color"]),onClick:t[3]||(t[3]=l=>x("all"))},a(o.$t("allTime")),3)):$("",!0)]),s("div",ye,[s("div",he,[s("button",ke,[s("span",$e,a(e(u)==="views"?o.$t("mostViewed"):e(F)),1),_e]),s("ul",xe,[s("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(u)==="views"},{"rounded-b-md":!e(m).loggedIn}]),onClick:t[4]||(t[4]=l=>T("views",o.$t("mostViewed")))},[r(b,{name:"i-mi-eye",class:n({"text-white":e(u)==="views"})},null,8,["class"]),y(" "+a(o.$t("mostViewed")),1)],2),e(m).loggedIn?(w(),k("li",{key:0,class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(u)==="likes"}]),onClick:t[5]||(t[5]=l=>T("likes",o.$t("mostLiked")))},[r(b,{name:"i-ri-heart-3-line",class:n({"text-white":e(u)==="likes"})},null,8,["class"]),y(" "+a(o.$t("mostLiked")),1)],2)):$("",!0),e(m).loggedIn?(w(),k("li",{key:1,class:n(["flex flex-row justify-between py-2 px-3 rounded-b-md cursor-pointer hover:button icon-hover-parent",{button:e(u)==="comments"}]),onClick:t[6]||(t[6]=l=>T("comments",o.$t("mostCommented")))},[r(b,{name:"i-mdi-comment-multiple-outline",class:n({"text-white":e(u)==="comments"})},null,8,["class"]),y(" "+a(o.$t("mostCommented")),1)],2)):$("",!0)])])]),e(m).loggedIn&&e(m).user.user_settings.show_explicit?(w(),k("div",Ce,[s("p",{class:n(["rounded-l-md button-item",[e(v)===void 0?"button":"theme-color"]]),onClick:t[7]||(t[7]=l=>S(void 0))},a(o.$t("default")),3),s("p",{class:n(["button-item",[e(v)==="safe"?"button":"theme-color"]]),onClick:t[8]||(t[8]=l=>S("safe"))},a(o.$t("safe")),3),s("p",{class:n(["rounded-r-md button-item",[e(v)==="explicit"?"button":"theme-color"]]),onClick:t[9]||(t[9]=l=>S("explicit"))},[r(b,{name:"i-material-symbols-explicit-outline",class:n({"text-white":e(v)==="explicit"})},null,8,["class"]),y(" "+a(o.$t("explicit")),1)],2)])):$("",!0)])]),r(ue,{loading:e(p),empty:e(h),error:e(C),fetch:d},null,8,["loading","empty","error"]),M(s("div",Me,[M(r(ie,{"section-class":"work-grid-10",works:e(N),view:K},null,8,["works"]),[[P,!e(h)]])],512),[[P,!e(p)]]),!e(p)&&!e(h)&&!e(C)?(w(),k("div",Pe,[s("button",{class:n([e(g).pagination.enablePrev?"primary-button":"disabled-button"]),onClick:t[10]||(t[10]=l=>R("prev"))},[r(b,{name:"i-ion-chevron-back-outline"}),y(" "+a(o.$t("pagination.previous")),1)],2),s("button",{class:n([e(g).pagination.enableNext?"primary-button":"disabled-button"]),onClick:t[11]||(t[11]=l=>R("next"))},[y(a(o.$t("pagination.next"))+" ",1),r(b,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):$("",!0),s("div",Se,[M(r(re,{ref_key:"popularModalViewRef",ref:E,section:"popular"},null,512),[[P,!e(p)]])]),M(r(de,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:B,class:"modal",onApply:O},null,512),[[P,!e(p)]])])]),_:1}))}},qe=pe(Ie,[["__scopeId","data-v-59a20ef9"]]);export{qe as default};
