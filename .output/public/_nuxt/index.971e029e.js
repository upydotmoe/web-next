import{ae as Ns,k as Ul,C as Ya,I as jl,O as Hl,a as qa,j as za,E as Xa,D as Wl,m as $l,af as Yl,r as ve,a2 as ql,o as $e,p as ct,q as Y,t as Ee,u as G,e as Me,s as Jt,x as vt,b as Pe,v as xe,F as Gs,K as ht,w as ri,c as ii,T as Ka,L as On,G as Za,a0 as zl,h as Xl,f as Fs}from"./entry.15cb71bb.js";import{u as Kl,L as Zl}from"./Layout.69b2e7d1.js";import{u as Ql,_ as Jl}from"./client-only.407c3fea.js";import{u as ec}from"./useSetting.56adc0e9.js";import{v as Qa}from"./vue3-editor.common.e68427ef.js";import{S as Dn}from"./Spinner.cb390d69.js";import{u as tc}from"./useFeed.a800ee91.js";import{_ as nc}from"./_plugin-vue_export-helper.a1a6add7.js";(()=>{function e(o){return function(s){if(Array.isArray(s))return t(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return t(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function t(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function n(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function r(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?n(Object(d),!0).forEach(function(a){i(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):n(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function i(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function l(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function c(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var u={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},f=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(this,o),this._items=a,this._options=r(r({},u),g),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._items.length&&this._items.map(function(g){g.active&&a.open(g.id),g.triggerEl.addEventListener("click",function(){a.toggle(g.id)})})}},{key:"getItem",value:function(a){return this._items.filter(function(g){return g.id===a})[0]}},{key:"open",value:function(a){var g,w,R=this,M=this.getItem(a);this._options.alwaysOpen||this._items.map(function(F){var B,q;F!==M&&((B=F.triggerEl.classList).remove.apply(B,e(R._options.activeClasses.split(" "))),(q=F.triggerEl.classList).add.apply(q,e(R._options.inactiveClasses.split(" "))),F.targetEl.classList.add("hidden"),F.triggerEl.setAttribute("aria-expanded",!1),F.active=!1,F.iconEl&&F.iconEl.classList.remove("rotate-180"))}),(g=M.triggerEl.classList).add.apply(g,e(this._options.activeClasses.split(" "))),(w=M.triggerEl.classList).remove.apply(w,e(this._options.inactiveClasses.split(" "))),M.triggerEl.setAttribute("aria-expanded",!0),M.targetEl.classList.remove("hidden"),M.active=!0,M.iconEl&&M.iconEl.classList.add("rotate-180"),this._options.onOpen(this,M)}},{key:"toggle",value:function(a){var g=this.getItem(a);g.active?this.close(a):this.open(a),this._options.onToggle(this,g)}},{key:"close",value:function(a){var g,w,R=this.getItem(a);(g=R.triggerEl.classList).remove.apply(g,e(this._options.activeClasses.split(" "))),(w=R.triggerEl.classList).add.apply(w,e(this._options.inactiveClasses.split(" "))),R.targetEl.classList.add("hidden"),R.triggerEl.setAttribute("aria-expanded",!1),R.active=!1,R.iconEl&&R.iconEl.classList.remove("rotate-180"),this._options.onClose(this,R)}}])&&c(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function h(){document.querySelectorAll("[data-accordion]").forEach(function(o){var s=o.getAttribute("data-accordion"),d=o.getAttribute("data-active-classes"),a=o.getAttribute("data-inactive-classes"),g=[];o.querySelectorAll("[data-accordion-target]").forEach(function(w){var R={id:w.getAttribute("data-accordion-target"),triggerEl:w,targetEl:document.querySelector(w.getAttribute("data-accordion-target")),iconEl:w.querySelector("[data-accordion-icon]"),active:w.getAttribute("aria-expanded")==="true"};g.push(R)}),new f(g,{alwaysOpen:s==="open",activeClasses:d||u.activeClasses,inactiveClasses:a||u.inactiveClasses})})}window.Accordion=f,document.readyState!=="loading"?h():document.addEventListener("DOMContentLoaded",h);function p(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function m(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?p(Object(d),!0).forEach(function(a){I(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):p(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function I(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function b(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function _(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var v={triggerEl:null,onCollapse:function(){},onExpand:function(){},onToggle:function(){}},T=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1?arguments[1]:void 0;b(this,o),this._targetEl=a,this._triggerEl=g?g.triggerEl:v.triggerEl,this._options=m(m({},v),g),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._triggerEl&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",function(){a._visible?a.collapse():a.expand()}))}},{key:"collapse",value:function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)}},{key:"expand",value:function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)}},{key:"toggle",value:function(){this._visible?this.collapse():this.expand()}}])&&_(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function D(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-collapse-toggle"));new T(s,{triggerEl:o})})}window.Collapse=T,document.readyState!=="loading"?D():document.addEventListener("DOMContentLoaded",D);function y(o){return function(s){if(Array.isArray(s))return E(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return E(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function O(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function A(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?O(Object(d),!0).forEach(function(a){N(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):O(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function N(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function $(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function P(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var k={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},X=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,o),this._items=a,this._options=A(A(A({},k),g),{},{indicators:A(A({},k.indicators),g.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._interval=null,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._items.map(function(g){g.el.classList.add("absolute","inset-0","transition-all","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(g,w){g.el.addEventListener("click",function(){a.slideTo(w)})})}},{key:"getItem",value:function(a){return this._items[a]}},{key:"slideTo",value:function(a){var g=this._items[a],w={left:g.position===0?this._items[this._items.length-1]:this._items[g.position-1],middle:g,right:g.position===this._items.length-1?this._items[0]:this._items[g.position+1]};this._rotate(w),this._setActiveItem(g.position),this._interval&&(this.pause(),this.cycle()),this._options.onChange(this)}},{key:"next",value:function(){var a=this._getActiveItem(),g=null;g=a.position===this._items.length-1?this._items[0]:this._items[a.position+1],this.slideTo(g.position),this._options.onNext(this)}},{key:"prev",value:function(){var a=this._getActiveItem(),g=null;g=a.position===0?this._items[this._items.length-1]:this._items[a.position-1],this.slideTo(g.position),this._options.onPrev(this)}},{key:"_rotate",value:function(a){this._items.map(function(g){g.el.classList.add("hidden")}),a.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),a.left.el.classList.add("-translate-x-full","z-10"),a.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),a.middle.el.classList.add("translate-x-0","z-20"),a.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),a.right.el.classList.add("translate-x-full","z-10")}},{key:"cycle",value:function(){var a=this;this._interval=setInterval(function(){a.next()},this._options.interval)}},{key:"pause",value:function(){clearInterval(this._interval)}},{key:"_getActiveItem",value:function(){return this._activeItem}},{key:"_setActiveItem",value:function(a){var g,w,R=this;this._activeItem=this._items[a],this._indicators.length&&(this._indicators.map(function(M){var F,B;M.el.setAttribute("aria-current","false"),(F=M.el.classList).remove.apply(F,y(R._options.indicators.activeClasses.split(" "))),(B=M.el.classList).add.apply(B,y(R._options.indicators.inactiveClasses.split(" ")))}),(g=this._indicators[a].el.classList).add.apply(g,y(this._options.indicators.activeClasses.split(" "))),(w=this._indicators[a].el.classList).remove.apply(w,y(this._options.indicators.inactiveClasses.split(" "))),this._indicators[a].el.setAttribute("aria-current","true"))}}])&&P(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function V(){document.querySelectorAll("[data-carousel]").forEach(function(o){var s=o.getAttribute("data-carousel-interval"),d=o.getAttribute("data-carousel")==="slide",a=[],g=0;o.querySelectorAll("[data-carousel-item]").length&&y(o.querySelectorAll("[data-carousel-item]")).map(function(B,q){a.push({position:q,el:B}),B.getAttribute("data-carousel-item")==="active"&&(g=q)});var w=[];o.querySelectorAll("[data-carousel-slide-to]").length&&y(o.querySelectorAll("[data-carousel-slide-to]")).map(function(B){w.push({position:B.getAttribute("data-carousel-slide-to"),el:B})});var R=new X(a,{defaultPosition:g,indicators:{items:w},interval:s||k.interval});d&&R.cycle();var M=o.querySelector("[data-carousel-next]"),F=o.querySelector("[data-carousel-prev]");M&&M.addEventListener("click",function(){R.next()}),F&&F.addEventListener("click",function(){R.prev()})})}window.Carousel=X,document.readyState!=="loading"?V():document.addEventListener("DOMContentLoaded",V);function j(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function ne(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?j(Object(d),!0).forEach(function(a){x(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):j(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function x(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function te(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function S(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var C={triggerEl:null,transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},H=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,o),this._targetEl=a,this._triggerEl=g?g.triggerEl:C.triggerEl,this._options=ne(ne({},C),g),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._triggerEl&&this._triggerEl.addEventListener("click",function(){a.hide()})}},{key:"hide",value:function(){var a=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){a._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)}}])&&S(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function W(){document.querySelectorAll("[data-dismiss-target]").forEach(function(o){var s=document.querySelector(o.getAttribute("data-dismiss-target"));new H(s,{triggerEl:o})})}window.Dismiss=H,document.readyState!=="loading"?W():document.addEventListener("DOMContentLoaded",W);function Z(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var s=o.ownerDocument;return s&&s.defaultView||window}return o}function U(o){return o instanceof Z(o).Element||o instanceof Element}function z(o){return o instanceof Z(o).HTMLElement||o instanceof HTMLElement}function Ge(o){return typeof ShadowRoot<"u"&&(o instanceof Z(o).ShadowRoot||o instanceof ShadowRoot)}var ie=Math.max,ee=Math.min,Q=Math.round;function he(o,s){s===void 0&&(s=!1);var d=o.getBoundingClientRect(),a=1,g=1;if(z(o)&&s){var w=o.offsetHeight,R=o.offsetWidth;R>0&&(a=Q(d.width)/R||1),w>0&&(g=Q(d.height)/w||1)}return{width:d.width/a,height:d.height/g,top:d.top/g,right:d.right/a,bottom:d.bottom/g,left:d.left/a,x:d.left/a,y:d.top/g}}function We(o){var s=Z(o);return{scrollLeft:s.pageXOffset,scrollTop:s.pageYOffset}}function Ae(o){return o?(o.nodeName||"").toLowerCase():null}function _e(o){return((U(o)?o.ownerDocument:o.document)||window.document).documentElement}function yt(o){return he(_e(o)).left+We(o).scrollLeft}function ft(o){return Z(o).getComputedStyle(o)}function vr(o){var s=ft(o),d=s.overflow,a=s.overflowX,g=s.overflowY;return/auto|scroll|overlay|hidden/.test(d+g+a)}function rl(o,s,d){d===void 0&&(d=!1);var a,g,w=z(s),R=z(s)&&function(K){var be=K.getBoundingClientRect(),ae=Q(be.width)/K.offsetWidth||1,fe=Q(be.height)/K.offsetHeight||1;return ae!==1||fe!==1}(s),M=_e(s),F=he(o,R),B={scrollLeft:0,scrollTop:0},q={x:0,y:0};return(w||!w&&!d)&&((Ae(s)!=="body"||vr(M))&&(B=(a=s)!==Z(a)&&z(a)?{scrollLeft:(g=a).scrollLeft,scrollTop:g.scrollTop}:We(a)),z(s)?((q=he(s,!0)).x+=s.clientLeft,q.y+=s.clientTop):M&&(q.x=yt(M))),{x:F.left+B.scrollLeft-q.x,y:F.top+B.scrollTop-q.y,width:F.width,height:F.height}}function wr(o){var s=he(o),d=o.offsetWidth,a=o.offsetHeight;return Math.abs(s.width-d)<=1&&(d=s.width),Math.abs(s.height-a)<=1&&(a=s.height),{x:o.offsetLeft,y:o.offsetTop,width:d,height:a}}function xn(o){return Ae(o)==="html"?o:o.assignedSlot||o.parentNode||(Ge(o)?o.host:null)||_e(o)}function ki(o){return["html","body","#document"].indexOf(Ae(o))>=0?o.ownerDocument.body:z(o)&&vr(o)?o:ki(xn(o))}function fn(o,s){var d;s===void 0&&(s=[]);var a=ki(o),g=a===((d=o.ownerDocument)==null?void 0:d.body),w=Z(a),R=g?[w].concat(w.visualViewport||[],vr(a)?a:[]):a,M=s.concat(R);return g?M:M.concat(fn(xn(R)))}function il(o){return["table","td","th"].indexOf(Ae(o))>=0}function Ni(o){return z(o)&&ft(o).position!=="fixed"?o.offsetParent:null}function pn(o){for(var s=Z(o),d=Ni(o);d&&il(d)&&ft(d).position==="static";)d=Ni(d);return d&&(Ae(d)==="html"||Ae(d)==="body"&&ft(d).position==="static")?s:d||function(a){var g=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&z(a)&&ft(a).position==="fixed")return null;for(var w=xn(a);z(w)&&["html","body"].indexOf(Ae(w))<0;){var R=ft(w);if(R.transform!=="none"||R.perspective!=="none"||R.contain==="paint"||["transform","perspective"].indexOf(R.willChange)!==-1||g&&R.willChange==="filter"||g&&R.filter&&R.filter!=="none")return w;w=w.parentNode}return null}(o)||s}var Fe="top",qe="bottom",ze="right",Be="left",Tr="auto",hn=[Fe,qe,ze,Be],Ut="start",gn="end",Gi="viewport",mn="popper",Fi=hn.reduce(function(o,s){return o.concat([s+"-"+Ut,s+"-"+gn])},[]),Bi=[].concat(hn,[Tr]).reduce(function(o,s){return o.concat([s,s+"-"+Ut,s+"-"+gn])},[]),sl=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function al(o){var s=new Map,d=new Set,a=[];function g(w){d.add(w.name),[].concat(w.requires||[],w.requiresIfExists||[]).forEach(function(R){if(!d.has(R)){var M=s.get(R);M&&g(M)}}),a.push(w)}return o.forEach(function(w){s.set(w.name,w)}),o.forEach(function(w){d.has(w.name)||g(w)}),a}var Vi={placement:"bottom",modifiers:[],strategy:"absolute"};function Ui(){for(var o=arguments.length,s=new Array(o),d=0;d<o;d++)s[d]=arguments[d];return!s.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function ol(o){o===void 0&&(o={});var s=o,d=s.defaultModifiers,a=d===void 0?[]:d,g=s.defaultOptions,w=g===void 0?Vi:g;return function(R,M,F){F===void 0&&(F=w);var B,q,K={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vi,w),modifiersData:{},elements:{reference:R,popper:M},attributes:{},styles:{}},be=[],ae=!1,fe={state:K,setOptions:function(se){var Ie=typeof se=="function"?se(K.options):se;ue(),K.options=Object.assign({},w,K.options,Ie),K.scrollParents={reference:U(R)?fn(R):R.contextElement?fn(R.contextElement):[],popper:fn(M)};var ge=function(re){var oe=al(re);return sl.reduce(function(le,ce){return le.concat(oe.filter(function(de){return de.phase===ce}))},[])}(function(re){var oe=re.reduce(function(le,ce){var de=le[ce.name];return le[ce.name]=de?Object.assign({},de,ce,{options:Object.assign({},de.options,ce.options),data:Object.assign({},de.data,ce.data)}):ce,le},{});return Object.keys(oe).map(function(le){return oe[le]})}([].concat(a,K.options.modifiers)));return K.orderedModifiers=ge.filter(function(re){return re.enabled}),K.orderedModifiers.forEach(function(re){var oe=re.name,le=re.options,ce=le===void 0?{}:le,de=re.effect;if(typeof de=="function"){var pe=de({state:K,name:oe,instance:fe,options:ce}),me=function(){};be.push(pe||me)}}),fe.update()},forceUpdate:function(){if(!ae){var se=K.elements,Ie=se.reference,ge=se.popper;if(Ui(Ie,ge)){K.rects={reference:rl(Ie,pn(ge),K.options.strategy==="fixed"),popper:wr(ge)},K.reset=!1,K.placement=K.options.placement,K.orderedModifiers.forEach(function(me){return K.modifiersData[me.name]=Object.assign({},me.data)});for(var re=0;re<K.orderedModifiers.length;re++)if(K.reset!==!0){var oe=K.orderedModifiers[re],le=oe.fn,ce=oe.options,de=ce===void 0?{}:ce,pe=oe.name;typeof le=="function"&&(K=le({state:K,options:de,name:pe,instance:fe})||K)}else K.reset=!1,re=-1}}},update:(B=function(){return new Promise(function(se){fe.forceUpdate(),se(K)})},function(){return q||(q=new Promise(function(se){Promise.resolve().then(function(){q=void 0,se(B())})})),q}),destroy:function(){ue(),ae=!0}};if(!Ui(R,M))return fe;function ue(){be.forEach(function(se){return se()}),be=[]}return fe.setOptions(F).then(function(se){!ae&&F.onFirstUpdate&&F.onFirstUpdate(se)}),fe}}var kn={passive:!0};function ot(o){return o.split("-")[0]}function jt(o){return o.split("-")[1]}function Or(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function ji(o){var s,d=o.reference,a=o.element,g=o.placement,w=g?ot(g):null,R=g?jt(g):null,M=d.x+d.width/2-a.width/2,F=d.y+d.height/2-a.height/2;switch(w){case Fe:s={x:M,y:d.y-a.height};break;case qe:s={x:M,y:d.y+d.height};break;case ze:s={x:d.x+d.width,y:F};break;case Be:s={x:d.x-a.width,y:F};break;default:s={x:d.x,y:d.y}}var B=w?Or(w):null;if(B!=null){var q=B==="y"?"height":"width";switch(R){case Ut:s[B]=s[B]-(d[q]/2-a[q]/2);break;case gn:s[B]=s[B]+(d[q]/2-a[q]/2)}}return s}var ll={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hi(o){var s,d=o.popper,a=o.popperRect,g=o.placement,w=o.variation,R=o.offsets,M=o.position,F=o.gpuAcceleration,B=o.adaptive,q=o.roundOffsets,K=o.isFixed,be=R.x,ae=be===void 0?0:be,fe=R.y,ue=fe===void 0?0:fe,se=typeof q=="function"?q({x:ae,y:ue}):{x:ae,y:ue};ae=se.x,ue=se.y;var Ie=R.hasOwnProperty("x"),ge=R.hasOwnProperty("y"),re=Be,oe=Fe,le=window;if(B){var ce=pn(d),de="clientHeight",pe="clientWidth";ce===Z(d)&&ft(ce=_e(d)).position!=="static"&&M==="absolute"&&(de="scrollHeight",pe="scrollWidth"),(g===Fe||(g===Be||g===ze)&&w===gn)&&(oe=qe,ue-=(K&&le.visualViewport?le.visualViewport.height:ce[de])-a.height,ue*=F?1:-1),(g===Be||(g===Fe||g===qe)&&w===gn)&&(re=ze,ae-=(K&&le.visualViewport?le.visualViewport.width:ce[pe])-a.width,ae*=F?1:-1)}var me,Le=Object.assign({position:M},B&&ll),Ve=q===!0?function(Je){var pt=Je.x,Dt=Je.y,et=window.devicePixelRatio||1;return{x:Q(pt*et)/et||0,y:Q(Dt*et)/et||0}}({x:ae,y:ue}):{x:ae,y:ue};return ae=Ve.x,ue=Ve.y,F?Object.assign({},Le,((me={})[oe]=ge?"0":"",me[re]=Ie?"0":"",me.transform=(le.devicePixelRatio||1)<=1?"translate("+ae+"px, "+ue+"px)":"translate3d("+ae+"px, "+ue+"px, 0)",me)):Object.assign({},Le,((s={})[oe]=ge?ue+"px":"",s[re]=Ie?ae+"px":"",s.transform="",s))}const cl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(o){var s=o.state,d=o.options,a=o.name,g=d.offset,w=g===void 0?[0,0]:g,R=Bi.reduce(function(q,K){return q[K]=function(be,ae,fe){var ue=ot(be),se=[Be,Fe].indexOf(ue)>=0?-1:1,Ie=typeof fe=="function"?fe(Object.assign({},ae,{placement:be})):fe,ge=Ie[0],re=Ie[1];return ge=ge||0,re=(re||0)*se,[Be,ze].indexOf(ue)>=0?{x:re,y:ge}:{x:ge,y:re}}(K,s.rects,w),q},{}),M=R[s.placement],F=M.x,B=M.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=F,s.modifiersData.popperOffsets.y+=B),s.modifiersData[a]=R}};var dl={left:"right",right:"left",bottom:"top",top:"bottom"};function Nn(o){return o.replace(/left|right|bottom|top/g,function(s){return dl[s]})}var ul={start:"end",end:"start"};function Wi(o){return o.replace(/start|end/g,function(s){return ul[s]})}function $i(o,s){var d=s.getRootNode&&s.getRootNode();if(o.contains(s))return!0;if(d&&Ge(d)){var a=s;do{if(a&&o.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Dr(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function Yi(o,s){return s===Gi?Dr(function(d){var a=Z(d),g=_e(d),w=a.visualViewport,R=g.clientWidth,M=g.clientHeight,F=0,B=0;return w&&(R=w.width,M=w.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(F=w.offsetLeft,B=w.offsetTop)),{width:R,height:M,x:F+yt(d),y:B}}(o)):U(s)?function(d){var a=he(d);return a.top=a.top+d.clientTop,a.left=a.left+d.clientLeft,a.bottom=a.top+d.clientHeight,a.right=a.left+d.clientWidth,a.width=d.clientWidth,a.height=d.clientHeight,a.x=a.left,a.y=a.top,a}(s):Dr(function(d){var a,g=_e(d),w=We(d),R=(a=d.ownerDocument)==null?void 0:a.body,M=ie(g.scrollWidth,g.clientWidth,R?R.scrollWidth:0,R?R.clientWidth:0),F=ie(g.scrollHeight,g.clientHeight,R?R.scrollHeight:0,R?R.clientHeight:0),B=-w.scrollLeft+yt(d),q=-w.scrollTop;return ft(R||g).direction==="rtl"&&(B+=ie(g.clientWidth,R?R.clientWidth:0)-M),{width:M,height:F,x:B,y:q}}(_e(o)))}function fl(o,s,d){var a=s==="clippingParents"?function(M){var F=fn(xn(M)),B=["absolute","fixed"].indexOf(ft(M).position)>=0&&z(M)?pn(M):M;return U(B)?F.filter(function(q){return U(q)&&$i(q,B)&&Ae(q)!=="body"}):[]}(o):[].concat(s),g=[].concat(a,[d]),w=g[0],R=g.reduce(function(M,F){var B=Yi(o,F);return M.top=ie(B.top,M.top),M.right=ee(B.right,M.right),M.bottom=ee(B.bottom,M.bottom),M.left=ie(B.left,M.left),M},Yi(o,w));return R.width=R.right-R.left,R.height=R.bottom-R.top,R.x=R.left,R.y=R.top,R}function qi(o){return Object.assign({},{top:0,right:0,bottom:0,left:0},o)}function zi(o,s){return s.reduce(function(d,a){return d[a]=o,d},{})}function En(o,s){s===void 0&&(s={});var d=s,a=d.placement,g=a===void 0?o.placement:a,w=d.boundary,R=w===void 0?"clippingParents":w,M=d.rootBoundary,F=M===void 0?Gi:M,B=d.elementContext,q=B===void 0?mn:B,K=d.altBoundary,be=K!==void 0&&K,ae=d.padding,fe=ae===void 0?0:ae,ue=qi(typeof fe!="number"?fe:zi(fe,hn)),se=q===mn?"reference":mn,Ie=o.rects.popper,ge=o.elements[be?se:q],re=fl(U(ge)?ge:ge.contextElement||_e(o.elements.popper),R,F),oe=he(o.elements.reference),le=ji({reference:oe,element:Ie,strategy:"absolute",placement:g}),ce=Dr(Object.assign({},Ie,le)),de=q===mn?ce:oe,pe={top:re.top-de.top+ue.top,bottom:de.bottom-re.bottom+ue.bottom,left:re.left-de.left+ue.left,right:de.right-re.right+ue.right},me=o.modifiersData.offset;if(q===mn&&me){var Le=me[g];Object.keys(pe).forEach(function(Ve){var Je=[ze,qe].indexOf(Ve)>=0?1:-1,pt=[Fe,qe].indexOf(Ve)>=0?"y":"x";pe[Ve]+=Le[pt]*Je})}return pe}function _n(o,s,d){return ie(o,ee(s,d))}const pl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(o){var s=o.state,d=o.options,a=o.name,g=d.mainAxis,w=g===void 0||g,R=d.altAxis,M=R!==void 0&&R,F=d.boundary,B=d.rootBoundary,q=d.altBoundary,K=d.padding,be=d.tether,ae=be===void 0||be,fe=d.tetherOffset,ue=fe===void 0?0:fe,se=En(s,{boundary:F,rootBoundary:B,padding:K,altBoundary:q}),Ie=ot(s.placement),ge=jt(s.placement),re=!ge,oe=Or(Ie),le=oe==="x"?"y":"x",ce=s.modifiersData.popperOffsets,de=s.rects.reference,pe=s.rects.popper,me=typeof ue=="function"?ue(Object.assign({},s.rects,{placement:s.placement})):ue,Le=typeof me=="number"?{mainAxis:me,altAxis:me}:Object.assign({mainAxis:0,altAxis:0},me),Ve=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,Je={x:0,y:0};if(ce){if(w){var pt,Dt=oe==="y"?Fe:Be,et=oe==="y"?qe:ze,Ue=oe==="y"?"height":"width",bt=ce[oe],Rt=bt+se[Dt],Bn=bt-se[et],qt=ae?-pe[Ue]/2:0,tt=ge===Ut?de[Ue]:pe[Ue],nt=ge===Ut?-pe[Ue]:-de[Ue],zt=s.elements.arrow,It=ae&&zt?wr(zt):{width:0,height:0},rt=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Vn=rt[Dt],Un=rt[et],Xt=_n(0,de[Ue],It[Ue]),Nr=re?de[Ue]/2-qt-Xt-Vn-Le.mainAxis:tt-Xt-Vn-Le.mainAxis,Gr=re?-de[Ue]/2+qt+Xt+Un+Le.mainAxis:nt+Xt+Un+Le.mainAxis,Kt=s.elements.arrow&&pn(s.elements.arrow),Fr=Kt?oe==="y"?Kt.clientTop||0:Kt.clientLeft||0:0,bn=(pt=Ve==null?void 0:Ve[oe])!=null?pt:0,jn=bt+Gr-bn,Zt=_n(ae?ee(Rt,bt+Nr-bn-Fr):Rt,bt,ae?ie(Bn,jn):Bn);ce[oe]=Zt,Je[oe]=Zt-bt}if(M){var Qt,lt=oe==="x"?Fe:Be,St=oe==="x"?qe:ze,At=ce[le],Hn=le==="y"?"height":"width",As=At+se[lt],Ls=At-se[St],Br=[Fe,Be].indexOf(Ie)!==-1,Ps=(Qt=Ve==null?void 0:Ve[le])!=null?Qt:0,Ms=Br?As:At-de[Hn]-pe[Hn]-Ps+Le.altAxis,Cs=Br?At+de[Hn]+pe[Hn]-Ps-Le.altAxis:Ls,xs=ae&&Br?function(Bl,Vl,Vr){var ks=_n(Bl,Vl,Vr);return ks>Vr?Vr:ks}(Ms,At,Cs):_n(ae?Ms:As,At,ae?Cs:Ls);ce[le]=xs,Je[le]=xs-At}s.modifiersData[a]=Je}},requiresIfExists:["offset"]},hl={name:"arrow",enabled:!0,phase:"main",fn:function(o){var s,d=o.state,a=o.name,g=o.options,w=d.elements.arrow,R=d.modifiersData.popperOffsets,M=ot(d.placement),F=Or(M),B=[Be,ze].indexOf(M)>=0?"height":"width";if(w&&R){var q=function(pe,me){return qi(typeof(pe=typeof pe=="function"?pe(Object.assign({},me.rects,{placement:me.placement})):pe)!="number"?pe:zi(pe,hn))}(g.padding,d),K=wr(w),be=F==="y"?Fe:Be,ae=F==="y"?qe:ze,fe=d.rects.reference[B]+d.rects.reference[F]-R[F]-d.rects.popper[B],ue=R[F]-d.rects.reference[F],se=pn(w),Ie=se?F==="y"?se.clientHeight||0:se.clientWidth||0:0,ge=fe/2-ue/2,re=q[be],oe=Ie-K[B]-q[ae],le=Ie/2-K[B]/2+ge,ce=_n(re,le,oe),de=F;d.modifiersData[a]=((s={})[de]=ce,s.centerOffset=ce-le,s)}},effect:function(o){var s=o.state,d=o.options.element,a=d===void 0?"[data-popper-arrow]":d;a!=null&&(typeof a!="string"||(a=s.elements.popper.querySelector(a)))&&$i(s.elements.popper,a)&&(s.elements.arrow=a)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xi(o,s,d){return d===void 0&&(d={x:0,y:0}),{top:o.top-s.height-d.y,right:o.right-s.width+d.x,bottom:o.bottom-s.height+d.y,left:o.left-s.width-d.x}}function Ki(o){return[Fe,ze,qe,Be].some(function(s){return o[s]>=0})}var Rr=ol({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(o){var s=o.state,d=o.instance,a=o.options,g=a.scroll,w=g===void 0||g,R=a.resize,M=R===void 0||R,F=Z(s.elements.popper),B=[].concat(s.scrollParents.reference,s.scrollParents.popper);return w&&B.forEach(function(q){q.addEventListener("scroll",d.update,kn)}),M&&F.addEventListener("resize",d.update,kn),function(){w&&B.forEach(function(q){q.removeEventListener("scroll",d.update,kn)}),M&&F.removeEventListener("resize",d.update,kn)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(o){var s=o.state,d=o.name;s.modifiersData[d]=ji({reference:s.rects.reference,element:s.rects.popper,strategy:"absolute",placement:s.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(o){var s=o.state,d=o.options,a=d.gpuAcceleration,g=a===void 0||a,w=d.adaptive,R=w===void 0||w,M=d.roundOffsets,F=M===void 0||M,B={placement:ot(s.placement),variation:jt(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:g,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,Hi(Object.assign({},B,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:R,roundOffsets:F})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,Hi(Object.assign({},B,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:F})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(o){var s=o.state;Object.keys(s.elements).forEach(function(d){var a=s.styles[d]||{},g=s.attributes[d]||{},w=s.elements[d];z(w)&&Ae(w)&&(Object.assign(w.style,a),Object.keys(g).forEach(function(R){var M=g[R];M===!1?w.removeAttribute(R):w.setAttribute(R,M===!0?"":M)}))})},effect:function(o){var s=o.state,d={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,d.popper),s.styles=d,s.elements.arrow&&Object.assign(s.elements.arrow.style,d.arrow),function(){Object.keys(s.elements).forEach(function(a){var g=s.elements[a],w=s.attributes[a]||{},R=Object.keys(s.styles.hasOwnProperty(a)?s.styles[a]:d[a]).reduce(function(M,F){return M[F]="",M},{});z(g)&&Ae(g)&&(Object.assign(g.style,R),Object.keys(w).forEach(function(M){g.removeAttribute(M)}))})}},requires:["computeStyles"]},cl,{name:"flip",enabled:!0,phase:"main",fn:function(o){var s=o.state,d=o.options,a=o.name;if(!s.modifiersData[a]._skip){for(var g=d.mainAxis,w=g===void 0||g,R=d.altAxis,M=R===void 0||R,F=d.fallbackPlacements,B=d.padding,q=d.boundary,K=d.rootBoundary,be=d.altBoundary,ae=d.flipVariations,fe=ae===void 0||ae,ue=d.allowedAutoPlacements,se=s.options.placement,Ie=ot(se),ge=F||(Ie===se||!fe?[Nn(se)]:function(tt){if(ot(tt)===Tr)return[];var nt=Nn(tt);return[Wi(tt),nt,Wi(nt)]}(se)),re=[se].concat(ge).reduce(function(tt,nt){return tt.concat(ot(nt)===Tr?function(zt,It){It===void 0&&(It={});var rt=It,Vn=rt.placement,Un=rt.boundary,Xt=rt.rootBoundary,Nr=rt.padding,Gr=rt.flipVariations,Kt=rt.allowedAutoPlacements,Fr=Kt===void 0?Bi:Kt,bn=jt(Vn),jn=bn?Gr?Fi:Fi.filter(function(lt){return jt(lt)===bn}):hn,Zt=jn.filter(function(lt){return Fr.indexOf(lt)>=0});Zt.length===0&&(Zt=jn);var Qt=Zt.reduce(function(lt,St){return lt[St]=En(zt,{placement:St,boundary:Un,rootBoundary:Xt,padding:Nr})[ot(St)],lt},{});return Object.keys(Qt).sort(function(lt,St){return Qt[lt]-Qt[St]})}(s,{placement:nt,boundary:q,rootBoundary:K,padding:B,flipVariations:fe,allowedAutoPlacements:ue}):nt)},[]),oe=s.rects.reference,le=s.rects.popper,ce=new Map,de=!0,pe=re[0],me=0;me<re.length;me++){var Le=re[me],Ve=ot(Le),Je=jt(Le)===Ut,pt=[Fe,qe].indexOf(Ve)>=0,Dt=pt?"width":"height",et=En(s,{placement:Le,boundary:q,rootBoundary:K,altBoundary:be,padding:B}),Ue=pt?Je?ze:Be:Je?qe:Fe;oe[Dt]>le[Dt]&&(Ue=Nn(Ue));var bt=Nn(Ue),Rt=[];if(w&&Rt.push(et[Ve]<=0),M&&Rt.push(et[Ue]<=0,et[bt]<=0),Rt.every(function(tt){return tt})){pe=Le,de=!1;break}ce.set(Le,Rt)}if(de)for(var Bn=function(tt){var nt=re.find(function(zt){var It=ce.get(zt);if(It)return It.slice(0,tt).every(function(rt){return rt})});if(nt)return pe=nt,"break"},qt=fe?3:1;qt>0&&Bn(qt)!=="break";qt--);s.placement!==pe&&(s.modifiersData[a]._skip=!0,s.placement=pe,s.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},pl,hl,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(o){var s=o.state,d=o.name,a=s.rects.reference,g=s.rects.popper,w=s.modifiersData.preventOverflow,R=En(s,{elementContext:"reference"}),M=En(s,{altBoundary:!0}),F=Xi(R,a),B=Xi(M,g,w),q=Ki(F),K=Ki(B);s.modifiersData[d]={referenceClippingOffsets:F,popperEscapeOffsets:B,isReferenceHidden:q,hasPopperEscaped:K},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":q,"data-popper-escaped":K})}}]});function Zi(o){return function(s){if(Array.isArray(s))return Sr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Sr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Sr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function Qi(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function Ht(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Qi(Object(d),!0).forEach(function(a){gl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Qi(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function gl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function ml(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function El(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Ji={placement:"bottom",triggerType:"click",onShow:function(){},onHide:function(){}},es=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ml(this,o),this._targetEl=a,this._triggerEl=g,this._options=Ht(Ht({},Ji),w),this._popperInstance=this._createPopperInstace(),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._triggerEl&&this._triggerEl.addEventListener("click",function(){a.toggle()})}},{key:"_createPopperInstace",value:function(){return Rr(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]})}},{key:"_handleClickOutside",value:function(a,g){var w=a.target;w===g||g.contains(w)||this._triggerEl.contains(w)||!this._visible||this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)}},{key:"toggle",value:function(){this._visible?(this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)):this.show()}},{key:"show",value:function(){var a=this;this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(g){return Ht(Ht({},g),{},{modifiers:[].concat(Zi(g.modifiers),[{name:"eventListeners",enabled:!0}])})}),document.body.addEventListener("click",function(g){a._handleClickOutside(g,a._targetEl)},!0),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(a){return Ht(Ht({},a),{},{modifiers:[].concat(Zi(a.modifiers),[{name:"eventListeners",enabled:!1}])})}),this._visible=!1,this._options.onHide(this)}}])&&El(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function ts(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-dropdown-toggle")),d=o.getAttribute("data-dropdown-placement");new es(s,o,{placement:d||Ji.placement})})}window.Dropdown=es,document.readyState!=="loading"?ts():document.addEventListener("DOMContentLoaded",ts);function _l(o){return function(s){if(Array.isArray(s))return Ar(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Ar(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ar(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ar(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function ns(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function rs(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ns(Object(d),!0).forEach(function(a){yl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):ns(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function yl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function bl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Il(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Lr={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",onHide:function(){},onShow:function(){},onToggle:function(){}},is=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bl(this,o),this._targetEl=a,this._options=rs(rs({},Lr),g),this._isHidden=!0,this._backdropEl=null,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._targetEl&&(this._getPlacementClasses().map(function(g){a._targetEl.classList.add(g)}),this._targetEl.addEventListener("click",function(g){a._handleOutsideClick(g.target)}))}},{key:"_createBackdrop",value:function(){if(this._isHidden){var a,g=document.createElement("div");g.setAttribute("modal-backdrop",""),(a=g.classList).add.apply(a,_l(this._options.backdropClasses.split(" "))),document.querySelector("body").append(g),this._backdropEl=g}}},{key:"_destroyBackdropEl",value:function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()}},{key:"_handleOutsideClick",value:function(a){this._options.backdrop==="dynamic"&&(a!==this._targetEl&&a!==this._backdropEl||this.hide())}},{key:"_getPlacementClasses",value:function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}}},{key:"toggle",value:function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)}},{key:"show",value:function(){this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.onHide(this)}},{key:"isHidden",value:function(){return this._isHidden}}])&&Il(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();window.Modal=is;var ss=function(o,s){return!!s.some(function(d){return d.id===o})&&s.find(function(d){return d.id===o})},as=function(o){var s=[];document.querySelectorAll("[".concat(o.main,"]")).forEach(function(d){var a=d.getAttribute(o.main),g=document.getElementById(a),w=g.getAttribute(o.placement),R=g.getAttribute(o.backdrop);g&&(g.hasAttribute("aria-hidden")||g.hasAttribute("aria-modal")||g.setAttribute("aria-hidden","true"));var M=null;ss(a,s)?M=(M=ss(a,s)).object:(M=new is(g,{placement:w||Lr.placement,backdrop:R||Lr.backdrop}),s.push({id:a,object:M})),g.hasAttribute(o.show)&&g.getAttribute(o.show)==="true"&&M.show(),d.addEventListener("click",function(){M.toggle()})})},os={main:"data-modal-toggle",placement:"data-modal-placement",show:"data-modal-show",backdrop:"data-modal-backdrop"};document.readyState!=="loading"?as(os):document.addEventListener("DOMContentLoaded",as(os));function vl(o){return function(s){if(Array.isArray(s))return Pr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Pr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Pr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function ls(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function cs(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ls(Object(d),!0).forEach(function(a){wl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):ls(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function wl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Tl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Ol(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Wt={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},ds=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1?arguments[1]:void 0;Tl(this,o),this._targetEl=a,this._options=cs(cs({},Wt),g),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(function(g){a._targetEl.classList.add(g)}),this.hide()}},{key:"isVisible",value:function(){return this._visible}},{key:"hide",value:function(){var a=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(g){a._targetEl.classList.remove(g)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(g){a._targetEl.classList.add(g)})):(this._getPlacementClasses(this._options.placement).active.map(function(g){a._targetEl.classList.remove(g)}),this._getPlacementClasses(this._options.placement).inactive.map(function(g){a._targetEl.classList.add(g)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)}},{key:"show",value:function(){var a=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(g){a._targetEl.classList.add(g)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(g){a._targetEl.classList.remove(g)})):(this._getPlacementClasses(this._options.placement).active.map(function(g){a._targetEl.classList.add(g)}),this._getPlacementClasses(this._options.placement).inactive.map(function(g){a._targetEl.classList.remove(g)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)}},{key:"toggle",value:function(){this.isVisible()?this.hide():this.show()}},{key:"_createBackdrop",value:function(){var a=this;if(!this._visible){var g,w=document.createElement("div");w.setAttribute("drawer-backdrop",""),(g=w.classList).add.apply(g,vl(this._options.backdropClasses.split(" "))),document.querySelector("body").append(w),w.addEventListener("click",function(){a.hide()})}}},{key:"_destroyBackdropEl",value:function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()}},{key:"_getPlacementClasses",value:function(a){switch(a){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}}}])&&Ol(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();window.Drawer=ds;var yn=function(o,s){return!!s.some(function(d){return d.id===o})&&s.find(function(d){return d.id===o})};function us(){var o=[];document.querySelectorAll("[data-drawer-target]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-target")),a=d.id,g=s.getAttribute("data-drawer-placement"),w=s.getAttribute("data-drawer-body-scrolling"),R=s.getAttribute("data-drawer-backdrop"),M=s.getAttribute("data-drawer-edge"),F=s.getAttribute("data-drawer-edge-offset"),B=null;yn(a,o)?B=(B=yn(a,o)).object:(B=new ds(d,{placement:g||Wt.placement,bodyScrolling:w?w==="true":Wt.bodyScrolling,backdrop:R?R==="true":Wt.backdrop,edge:M?M==="true":Wt.edge,edgeOffset:F||Wt.edgeOffset}),o.push({id:a,object:B}))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-toggle")).id,a=yn(d,o);s.addEventListener("click",function(){a.object.isVisible()?a.object.hide():a.object.show()})}),document.querySelectorAll("[data-drawer-dismiss]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-dismiss")).id,a=yn(d,o);s.addEventListener("click",function(){a.object.hide()})}),document.querySelectorAll("[data-drawer-show]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-show")).id,a=yn(d,o);s.addEventListener("click",function(){a.object.show()})})}document.readyState!=="loading"?us():document.addEventListener("DOMContentLoaded",us);function Gn(o){return function(s){if(Array.isArray(s))return Mr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Mr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Mr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function fs(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function ps(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?fs(Object(d),!0).forEach(function(a){Dl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):fs(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Dl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Rl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Sl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Al={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},hs=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rl(this,o),this._items=a,this._activeTab=g?this.getTab(g.defaultTabId):null,this._options=ps(ps({},Al),g),this._init()}var s,d;return s=o,d=[{key:"_init",value:function(){var a=this;this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(g){g.triggerEl.addEventListener("click",function(){a.show(g.id)})}))}},{key:"getActiveTab",value:function(){return this._activeTab}},{key:"_setActiveTab",value:function(a){this._activeTab=a}},{key:"getTab",value:function(a){return this._items.filter(function(g){return g.id===a})[0]}},{key:"show",value:function(a){var g,w,R=this,M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],F=this.getTab(a);(F!==this._activeTab||M)&&(this._items.map(function(B){var q,K;B!==F&&((q=B.triggerEl.classList).remove.apply(q,Gn(R._options.activeClasses.split(" "))),(K=B.triggerEl.classList).add.apply(K,Gn(R._options.inactiveClasses.split(" "))),B.targetEl.classList.add("hidden"),B.triggerEl.setAttribute("aria-selected",!1))}),(g=F.triggerEl.classList).add.apply(g,Gn(this._options.activeClasses.split(" "))),(w=F.triggerEl.classList).remove.apply(w,Gn(this._options.inactiveClasses.split(" "))),F.triggerEl.setAttribute("aria-selected",!0),F.targetEl.classList.remove("hidden"),this._setActiveTab(F),this._options.onShow(this,F))}}],d&&Sl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function gs(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(o){var s=[],d=null;o.querySelectorAll('[role="tab"]').forEach(function(a){var g=a.getAttribute("aria-selected")==="true",w={id:a.getAttribute("data-tabs-target"),triggerEl:a,targetEl:document.querySelector(a.getAttribute("data-tabs-target"))};s.push(w),g&&(d=w.id)}),new hs(s,{defaultTabId:d})})}window.Tabs=hs,document.readyState!=="loading"?gs():document.addEventListener("DOMContentLoaded",gs);function ms(o){return function(s){if(Array.isArray(s))return Cr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Cr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Cr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function Es(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function $t(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Es(Object(d),!0).forEach(function(a){Ll(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Es(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Ll(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Pl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Ml(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var xr={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){}},_s=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pl(this,o),this._targetEl=a,this._triggerEl=g,this._options=$t($t({},xr),w),this._popperInstance=this._createPopperInstace(),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;if(this._triggerEl){var g=this._getTriggerEvents();g.showEvents.forEach(function(w){a._triggerEl.addEventListener(w,function(){a.show()})}),g.hideEvents.forEach(function(w){a._triggerEl.addEventListener(w,function(){a.hide()})})}}},{key:"_createPopperInstace",value:function(){return Rr(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})}},{key:"_getTriggerEvents",value:function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]}}}},{key:"show",value:function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(a){return $t($t({},a),{},{modifiers:[].concat(ms(a.modifiers),[{name:"eventListeners",enabled:!0}])})}),this._popperInstance.update(),this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(a){return $t($t({},a),{},{modifiers:[].concat(ms(a.modifiers),[{name:"eventListeners",enabled:!1}])})}),this._options.onHide(this)}}])&&Ml(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function ys(){document.querySelectorAll("[data-tooltip-target]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-tooltip-target")),d=o.getAttribute("data-tooltip-trigger"),a=o.getAttribute("data-tooltip-placement");new _s(s,o,{placement:a||xr.placement,triggerType:d||xr.triggerType})})}window.Tooltip=_s,document.readyState!=="loading"?ys():document.addEventListener("DOMContentLoaded",ys);function bs(o){return function(s){if(Array.isArray(s))return kr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return kr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return kr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function Is(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function Yt(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Is(Object(d),!0).forEach(function(a){Cl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Is(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Cl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function xl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function kl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Fn={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){}},vs=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};xl(this,o),this._targetEl=a,this._triggerEl=g,this._options=Yt(Yt({},Fn),w),this._popperInstance=this._createPopperInstace(),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;if(this._triggerEl){var g=this._getTriggerEvents();g.showEvents.forEach(function(w){a._triggerEl.addEventListener(w,function(){a.show()}),a._targetEl.addEventListener(w,function(){a.show()})}),g.hideEvents.forEach(function(w){a._triggerEl.addEventListener(w,function(){setTimeout(function(){a._targetEl.matches(":hover")||a.hide()},100)}),a._targetEl.addEventListener(w,function(){setTimeout(function(){a._triggerEl.matches(":hover")||a.hide()},100)})})}}},{key:"_createPopperInstace",value:function(){return Rr(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})}},{key:"_getTriggerEvents",value:function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]}}}},{key:"show",value:function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(a){return Yt(Yt({},a),{},{modifiers:[].concat(bs(a.modifiers),[{name:"eventListeners",enabled:!0}])})}),this._popperInstance.update(),this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(a){return Yt(Yt({},a),{},{modifiers:[].concat(bs(a.modifiers),[{name:"eventListeners",enabled:!1}])})}),this._options.onHide(this)}}])&&kl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function ws(){document.querySelectorAll("[data-popover-target]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-popover-target")),d=o.getAttribute("data-popover-trigger"),a=o.getAttribute("data-popover-placement"),g=o.getAttribute("data-popover-offset");new vs(s,o,{placement:a||Fn.placement,offset:g?parseInt(g):Fn.offset,triggerType:d||Fn.triggerType})})}window.Popover=vs,document.readyState!=="loading"?ws():document.addEventListener("DOMContentLoaded",ws);function Ts(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function Os(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Ts(Object(d),!0).forEach(function(a){Nl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Ts(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Nl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Gl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Fl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Ds={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Rs=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,R=arguments.length>3?arguments[3]:void 0;Gl(this,o),this._parentEl=a,this._triggerEl=g,this._targetEl=w,this._options=Os(Os({},Ds),R),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;if(this._triggerEl){var g=this._getTriggerEvents();g.showEvents.forEach(function(w){a._triggerEl.addEventListener(w,function(){a.show()}),a._targetEl.addEventListener(w,function(){a.show()})}),g.hideEvents.forEach(function(w){a._parentEl.addEventListener(w,function(){setTimeout(function(){a._parentEl.matches(":hover")||a.hide()},100)})})}}},{key:"hide",value:function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)}},{key:"show",value:function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)}},{key:"toggle",value:function(){this._visible?this.hide():this.show()}},{key:"_getTriggerEvents",value:function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]}}}}])&&Fl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function Ss(){document.querySelectorAll("[data-dial-init]").forEach(function(o){var s=o.querySelector("[data-dial-toggle]"),d=document.getElementById(s.getAttribute("data-dial-toggle")),a=s.getAttribute("data-dial-trigger");new Rs(o,s,d,{triggerType:a||Ds.triggerType})})}window.Dial=Rs,document.readyState!=="loading"?Ss():document.addEventListener("DOMContentLoaded",Ss)})();function gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ei(e){return e[e.length-1]}function Gt(e,...t){return t.forEach(n=>{e.includes(n)||e.push(n)}),e}function Ur(e,t){return e?e.split(t):[]}function _i(e,t,n){const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}function Ja(e,t,n){return e<t?t:e>n?n:e}function ln(e,t,n={},r=0,i=""){const l=Object.keys(n).reduce((u,f)=>{let h=n[f];return typeof h=="function"&&(h=h(r)),`${u} ${f}="${h}"`},e);i+=`<${l}></${e}>`;const c=r+1;return c<t?ln(e,t,n,c,i):i}function yi(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function si(e){return new Date(e).setHours(0,0,0,0)}function Ft(){return new Date().setHours(0,0,0,0)}function Tt(...e){switch(e.length){case 0:return Ft();case 1:return si(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function rn(e,t){const n=new Date(e);return n.setDate(n.getDate()+t)}function rc(e,t){return rn(e,t*7)}function rr(e,t){const n=new Date(e),r=n.getMonth()+t;let i=r%12;i<0&&(i+=12);const l=n.setMonth(r);return n.getMonth()!==i?n.setDate(0):l}function sn(e,t){const n=new Date(e),r=n.getMonth(),i=n.setFullYear(n.getFullYear()+t);return r===1&&n.getMonth()===2?n.setDate(0):i}function Bs(e,t){return(e-t+7)%7}function ir(e,t,n=0){const r=new Date(e).getDay();return rn(e,Bs(t,n)-Bs(r,n))}function ic(e){const t=ir(e,4,1),n=ir(new Date(t).setMonth(0,4),4,1);return Math.round((t-n)/6048e5)+1}function Lt(e,t){const n=new Date(e).getFullYear();return Math.floor(n/t)*t}const ai=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,sc=/[\s!-/:-@[-`{-~]+/;let jr={};const Vs={y(e,t){return new Date(e).setFullYear(parseInt(t,10))},m(e,t,n){const r=new Date(e);let i=parseInt(t,10)-1;if(isNaN(i)){if(!t)return NaN;const l=t.toLowerCase(),c=u=>u.toLowerCase().startsWith(l);if(i=n.monthsShort.findIndex(c),i<0&&(i=n.months.findIndex(c)),i<0)return NaN}return r.setMonth(i),r.getMonth()!==eo(i)?r.setDate(0):r.getTime()},d(e,t){return new Date(e).setDate(parseInt(t,10))}},ac={d(e){return e.getDate()},dd(e){return Wn(e.getDate(),2)},D(e,t){return t.daysShort[e.getDay()]},DD(e,t){return t.days[e.getDay()]},m(e){return e.getMonth()+1},mm(e){return Wn(e.getMonth()+1,2)},M(e,t){return t.monthsShort[e.getMonth()]},MM(e,t){return t.months[e.getMonth()]},y(e){return e.getFullYear()},yy(e){return Wn(e.getFullYear(),2).slice(-2)},yyyy(e){return Wn(e.getFullYear(),4)}};function eo(e){return e>-1?e%12:eo(e+12)}function Wn(e,t){return e.toString().padStart(t,"0")}function to(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in jr)return jr[e];const t=e.split(ai),n=e.match(new RegExp(ai,"g"));if(t.length===0||!n)throw new Error("Invalid date format.");const r=n.map(l=>ac[l]),i=Object.keys(Vs).reduce((l,c)=>(n.find(f=>f[0]!=="D"&&f[0].toLowerCase()===c)&&l.push(c),l),[]);return jr[e]={parser(l,c){const u=l.split(sc).reduce((f,h,p)=>{if(h.length>0&&n[p]){const m=n[p][0];m==="M"?f.m=h:m!=="D"&&(f[m]=h)}return f},{});return i.reduce((f,h)=>{const p=Vs[h](f,u[h],c);return isNaN(p)?f:p},Ft())},formatter(l,c){let u=r.reduce((f,h,p)=>f+=`${t[p]}${h(l,c)}`,"");return u+=Ei(t)}}}function Pn(e,t,n){if(e instanceof Date||typeof e=="number"){const r=si(e);return isNaN(r)?void 0:r}if(!!e){if(e==="today")return Ft();if(t&&t.toValue){const r=t.toValue(e,t,n);return isNaN(r)?void 0:si(r)}return to(t).parser(e,n)}}function sr(e,t,n){if(isNaN(e)||!e&&e!==0)return"";const r=typeof e=="number"?new Date(e):e;return t.toDisplay?t.toDisplay(r,t,n):to(t).formatter(r,n)}const ar=new WeakMap,{addEventListener:oc,removeEventListener:lc}=EventTarget.prototype;function no(e,t){let n=ar.get(e);n||(n=[],ar.set(e,n)),t.forEach(r=>{oc.call(...r),n.push(r)})}function cc(e){let t=ar.get(e);!t||(t.forEach(n=>{lc.call(...n)}),ar.delete(e))}if(!Event.prototype.composedPath){const e=(t,n=[])=>{n.push(t);let r;return t.parentNode?r=t.parentNode:t.host?r=t.host:t.defaultView&&(r=t.defaultView),r?e(r,n):n};Event.prototype.composedPath=function(){return e(this.target)}}function ro(e,t,n,r=0){const i=e[r];return t(i)?i:i===n||!i.parentElement?void 0:ro(e,t,n,r+1)}function io(e,t){const n=typeof t=="function"?t:r=>r.matches(t);return ro(e.composedPath(),n,e.currentTarget)}const In={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},bi={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},dc=document.createRange();function mt(e){return dc.createContextualFragment(e)}function Rn(e){e.style.display!=="none"&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function Sn(e){e.style.display==="none"&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function or(e){e.firstChild&&(e.removeChild(e.firstChild),or(e))}function uc(e,t){or(e),t instanceof DocumentFragment?e.appendChild(t):typeof t=="string"?e.appendChild(mt(t)):typeof t.forEach=="function"&&t.forEach(n=>{e.appendChild(n)})}const{language:Hr,format:fc,weekStart:pc}=bi;function Us(e,t){return e.length<6&&t>=0&&t<7?Gt(e,t):e}function js(e){return(e+6)%7}function Hs(e,t,n,r){const i=Pn(e,t,n);return i!==void 0?i:r}function Wr(e,t,n=3){const r=parseInt(e,10);return r>=0&&r<=n?r:t}function $r(e,t){const n=Object.assign({},e),r={},i=t.constructor.locales;let{format:l,language:c,locale:u,maxDate:f,maxView:h,minDate:p,pickLevel:m,startView:I,weekStart:b}=t.config||{};if(n.language){let E;if(n.language!==c&&(i[n.language]?E=n.language:(E=n.language.split("-")[0],i[E]===void 0&&(E=!1))),delete n.language,E){c=r.language=E;const O=u||i[Hr];u=Object.assign({format:fc,weekStart:pc},i[Hr]),c!==Hr&&Object.assign(u,i[c]),r.locale=u,l===O.format&&(l=r.format=u.format),b===O.weekStart&&(b=r.weekStart=u.weekStart,r.weekEnd=js(u.weekStart))}}if(n.format){const E=typeof n.format.toDisplay=="function",O=typeof n.format.toValue=="function",A=ai.test(n.format);(E&&O||A)&&(l=r.format=n.format),delete n.format}let _=p,v=f;if(n.minDate!==void 0&&(_=n.minDate===null?Tt(0,0,1):Hs(n.minDate,l,u,_),delete n.minDate),n.maxDate!==void 0&&(v=n.maxDate===null?void 0:Hs(n.maxDate,l,u,v),delete n.maxDate),v<_?(p=r.minDate=v,f=r.maxDate=_):(p!==_&&(p=r.minDate=_),f!==v&&(f=r.maxDate=v)),n.datesDisabled&&(r.datesDisabled=n.datesDisabled.reduce((E,O)=>{const A=Pn(O,l,u);return A!==void 0?Gt(E,A):E},[]),delete n.datesDisabled),n.defaultViewDate!==void 0){const E=Pn(n.defaultViewDate,l,u);E!==void 0&&(r.defaultViewDate=E),delete n.defaultViewDate}if(n.weekStart!==void 0){const E=Number(n.weekStart)%7;isNaN(E)||(b=r.weekStart=E,r.weekEnd=js(E)),delete n.weekStart}if(n.daysOfWeekDisabled&&(r.daysOfWeekDisabled=n.daysOfWeekDisabled.reduce(Us,[]),delete n.daysOfWeekDisabled),n.daysOfWeekHighlighted&&(r.daysOfWeekHighlighted=n.daysOfWeekHighlighted.reduce(Us,[]),delete n.daysOfWeekHighlighted),n.maxNumberOfDates!==void 0){const E=parseInt(n.maxNumberOfDates,10);E>=0&&(r.maxNumberOfDates=E,r.multidate=E!==1),delete n.maxNumberOfDates}n.dateDelimiter&&(r.dateDelimiter=String(n.dateDelimiter),delete n.dateDelimiter);let T=m;n.pickLevel!==void 0&&(T=Wr(n.pickLevel,2),delete n.pickLevel),T!==m&&(m=r.pickLevel=T);let D=h;n.maxView!==void 0&&(D=Wr(n.maxView,h),delete n.maxView),D=m>D?m:D,D!==h&&(h=r.maxView=D);let y=I;if(n.startView!==void 0&&(y=Wr(n.startView,y),delete n.startView),y<m?y=m:y>h&&(y=h),y!==I&&(r.startView=y),n.prevArrow){const E=mt(n.prevArrow);E.childNodes.length>0&&(r.prevArrow=E.childNodes),delete n.prevArrow}if(n.nextArrow){const E=mt(n.nextArrow);E.childNodes.length>0&&(r.nextArrow=E.childNodes),delete n.nextArrow}if(n.disableTouchKeyboard!==void 0&&(r.disableTouchKeyboard="ontouchstart"in document&&!!n.disableTouchKeyboard,delete n.disableTouchKeyboard),n.orientation){const E=n.orientation.toLowerCase().split(/\s+/g);r.orientation={x:E.find(O=>O==="left"||O==="right")||"auto",y:E.find(O=>O==="top"||O==="bottom")||"auto"},delete n.orientation}if(n.todayBtnMode!==void 0){switch(n.todayBtnMode){case 0:case 1:r.todayBtnMode=n.todayBtnMode}delete n.todayBtnMode}return Object.keys(n).forEach(E=>{n[E]!==void 0&&gt(bi,E)&&(r[E]=n[E])}),r}const hc=yi(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 dark:bg-blue-600 hover:bg-blue-800 dark:hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),gc=yi(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">${ln("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"})}</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">${ln("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}</div>
</div>`),mc=yi(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">${ln("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"})}</div>
</div>`);class Ii{constructor(t,n){Object.assign(this,n,{picker:t,element:mt('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(t){t.pickLevel!==void 0&&(this.isMinView=this.id===t.pickLevel),this.setOptions(t),this.updateFocus(),this.updateSelection()}performBeforeHook(t,n,r){let i=this.beforeShow(new Date(r));switch(typeof i){case"boolean":i={enabled:i};break;case"string":i={classes:i}}if(i){if(i.enabled===!1&&(t.classList.add("disabled"),Gt(this.disabled,n)),i.classes){const l=i.classes.split(/\s+/);t.classList.add(...l),l.includes("disabled")&&Gt(this.disabled,n)}i.content&&uc(t,i.content)}}}class Ec extends Ii{constructor(t){super(t,{id:0,name:"days",cellClass:"day"})}init(t,n=!0){if(n){const r=mt(gc).firstChild;this.dow=r.firstChild,this.grid=r.lastChild,this.element.appendChild(r)}super.init(t)}setOptions(t){let n;if(gt(t,"minDate")&&(this.minDate=t.minDate),gt(t,"maxDate")&&(this.maxDate=t.maxDate),t.datesDisabled&&(this.datesDisabled=t.datesDisabled),t.daysOfWeekDisabled&&(this.daysOfWeekDisabled=t.daysOfWeekDisabled,n=!0),t.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=t.daysOfWeekHighlighted),t.todayHighlight!==void 0&&(this.todayHighlight=t.todayHighlight),t.weekStart!==void 0&&(this.weekStart=t.weekStart,this.weekEnd=t.weekEnd,n=!0),t.locale){const r=this.locale=t.locale;this.dayNames=r.daysMin,this.switchLabelFormat=r.titleFormat,n=!0}if(t.beforeShowDay!==void 0&&(this.beforeShow=typeof t.beforeShowDay=="function"?t.beforeShowDay:void 0),t.calendarWeeks!==void 0)if(t.calendarWeeks&&!this.calendarWeeks){const r=mt(mc).firstChild;this.calendarWeeks={element:r,dow:r.firstChild,weeks:r.lastChild},this.element.insertBefore(r,this.element.firstChild)}else this.calendarWeeks&&!t.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);t.showDaysOfWeek!==void 0&&(t.showDaysOfWeek?(Sn(this.dow),this.calendarWeeks&&Sn(this.calendarWeeks.dow)):(Rn(this.dow),this.calendarWeeks&&Rn(this.calendarWeeks.dow))),n&&Array.from(this.dow.children).forEach((r,i)=>{const l=(this.weekStart+i)%7;r.textContent=this.dayNames[l],r.className=this.daysOfWeekDisabled.includes(l)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}updateFocus(){const t=new Date(this.picker.viewDate),n=t.getFullYear(),r=t.getMonth(),i=Tt(n,r,1),l=ir(i,this.weekStart,this.weekStart);this.first=i,this.last=Tt(n,r+1,0),this.start=l,this.focused=this.picker.viewDate}updateSelection(){const{dates:t,rangepicker:n}=this.picker.datepicker;this.selected=t,n&&(this.range=n.dates)}render(){this.today=this.todayHighlight?Ft():void 0,this.disabled=[...this.datesDisabled];const t=sr(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(t),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const n=ir(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((r,i)=>{r.textContent=ic(rc(n,i))})}Array.from(this.grid.children).forEach((n,r)=>{const i=n.classList,l=rn(this.start,r),c=new Date(l),u=c.getDay();if(n.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,n.dataset.date=l,n.textContent=c.getDate(),l<this.first?i.add("prev","text-gray-500","dark:text-white"):l>this.last&&i.add("next","text-gray-500","dark:text-white"),this.today===l&&i.add("today","bg-gray-100","dark:bg-gray-600","dark:bg-gray-600"),(l<this.minDate||l>this.maxDate||this.disabled.includes(l))&&i.add("disabled","cursor-not-allowed"),this.daysOfWeekDisabled.includes(u)&&(i.add("disabled","cursor-not-allowed"),Gt(this.disabled,l)),this.daysOfWeekHighlighted.includes(u)&&i.add("highlighted"),this.range){const[f,h]=this.range;l>f&&l<h&&(i.add("range","bg-gray-200","dark:bg-gray-600"),i.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),l===f&&(i.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),i.remove("rounded-lg","rounded-r-lg")),l===h&&(i.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),i.remove("rounded-lg","rounded-l-lg"))}this.selected.includes(l)&&(i.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),i.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),l===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(n,l,l)})}refresh(){const[t,n]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(r=>{r.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600"),r.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(r=>{const i=Number(r.dataset.date),l=r.classList;i>t&&i<n&&(l.add("range","bg-gray-200","dark:bg-gray-600"),l.remove("rounded-lg")),i===t&&(l.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),l.remove("rounded-lg","rounded-r-lg")),i===n&&(l.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),l.remove("rounded-lg","rounded-l-lg")),this.selected.includes(i)&&(l.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),l.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),i===this.focused&&l.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const t=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(n=>{n.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[t].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function Ws(e,t){if(!e||!e[0]||!e[1])return;const[[n,r],[i,l]]=e;if(!(n>t||i<t))return[n===t?r:-1,i===t?l:12]}class _c extends Ii{constructor(t){super(t,{id:1,name:"months",cellClass:"month"})}init(t,n=!0){n&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(mt(ln("span",12,{"data-month":r=>r})))),super.init(t)}setOptions(t){if(t.locale&&(this.monthNames=t.locale.monthsShort),gt(t,"minDate"))if(t.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{const n=new Date(t.minDate);this.minYear=n.getFullYear(),this.minMonth=n.getMonth(),this.minDate=n.setDate(1)}if(gt(t,"maxDate"))if(t.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const n=new Date(t.maxDate);this.maxYear=n.getFullYear(),this.maxMonth=n.getMonth(),this.maxDate=Tt(this.maxYear,this.maxMonth+1,0)}t.beforeShowMonth!==void 0&&(this.beforeShow=typeof t.beforeShowMonth=="function"?t.beforeShowMonth:void 0)}updateFocus(){const t=new Date(this.picker.viewDate);this.year=t.getFullYear(),this.focused=t.getMonth()}updateSelection(){const{dates:t,rangepicker:n}=this.picker.datepicker;this.selected=t.reduce((r,i)=>{const l=new Date(i),c=l.getFullYear(),u=l.getMonth();return r[c]===void 0?r[c]=[u]:Gt(r[c],u),r},{}),n&&n.dates&&(this.range=n.dates.map(r=>{const i=new Date(r);return isNaN(i)?void 0:[i.getFullYear(),i.getMonth()]}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const t=this.selected[this.year]||[],n=this.year<this.minYear||this.year>this.maxYear,r=this.year===this.minYear,i=this.year===this.maxYear,l=Ws(this.range,this.year);Array.from(this.grid.children).forEach((c,u)=>{const f=c.classList,h=Tt(this.year,u,1);if(c.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(c.dataset.date=h),c.textContent=this.monthNames[u],(n||r&&u<this.minMonth||i&&u>this.maxMonth)&&f.add("disabled"),l){const[p,m]=l;u>p&&u<m&&f.add("range"),u===p&&f.add("range-start"),u===m&&f.add("range-end")}t.includes(u)&&(f.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),f.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),u===this.focused&&f.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(c,u,h)})}refresh(){const t=this.selected[this.year]||[],[n,r]=Ws(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(i=>{i.classList.remove("range","range-start","range-end","selected","bg-blue-700","dark:bg-blue-600","dark:text-white","text-white","focused","bg-gray-100","dark:bg-gray-600"),i.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach((i,l)=>{const c=i.classList;l>n&&l<r&&c.add("range"),l===n&&c.add("range-start"),l===r&&c.add("range-end"),t.includes(l)&&(c.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),c.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),l===this.focused&&c.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused","bg-gray-100")}),this.grid.children[this.focused].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function yc(e){return[...e].reduce((t,n,r)=>t+=r?n:n.toUpperCase(),"")}class $s extends Ii{constructor(t,n){super(t,n)}init(t,n=!0){n&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${yc(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(mt(ln("span",12)))),super.init(t)}setOptions(t){if(gt(t,"minDate")&&(t.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=Lt(t.minDate,this.step),this.minDate=Tt(this.minYear,0,1))),gt(t,"maxDate")&&(t.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=Lt(t.maxDate,this.step),this.maxDate=Tt(this.maxYear,11,31))),t[this.beforeShowOption]!==void 0){const n=t[this.beforeShowOption];this.beforeShow=typeof n=="function"?n:void 0}}updateFocus(){const t=new Date(this.picker.viewDate),n=Lt(t,this.navStep),r=n+9*this.step;this.first=n,this.last=r,this.start=n-this.step,this.focused=Lt(t,this.step)}updateSelection(){const{dates:t,rangepicker:n}=this.picker.datepicker;this.selected=t.reduce((r,i)=>Gt(r,Lt(i,this.step)),[]),n&&n.dates&&(this.range=n.dates.map(r=>{if(r!==void 0)return Lt(r,this.step)}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((t,n)=>{const r=t.classList,i=this.start+n*this.step,l=Tt(i,0,1);if(t.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(t.dataset.date=l),t.textContent=t.dataset.year=i,n===0?r.add("prev"):n===11&&r.add("next"),(i<this.minYear||i>this.maxYear)&&r.add("disabled"),this.range){const[c,u]=this.range;i>c&&i<u&&r.add("range"),i===c&&r.add("range-start"),i===u&&r.add("range-end")}this.selected.includes(i)&&(r.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),r.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),i===this.focused&&r.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(t,i,l)})}refresh(){const[t,n]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(r=>{r.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600")}),Array.from(this.grid.children).forEach(r=>{const i=Number(r.textContent),l=r.classList;i>t&&i<n&&l.add("range"),i===t&&l.add("range-start"),i===n&&l.add("range-end"),this.selected.includes(i)&&(l.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),l.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),i===this.focused&&l.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const t=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(n=>{n.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[t].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function an(e,t){const n={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:n}))}function lr(e,t){const{minDate:n,maxDate:r}=e.config,{currentView:i,viewDate:l}=e.picker;let c;switch(i.id){case 0:c=rr(l,t);break;case 1:c=sn(l,t);break;default:c=sn(l,t*i.navStep)}c=Ja(c,n,r),e.picker.changeFocus(c).render()}function so(e){const t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function ao(e){e.config.updateOnBlur?e.update({autohide:!0}):(e.refresh("input"),e.hide())}function Ys(e,t){const n=e.picker,r=new Date(n.viewDate),i=n.currentView.id,l=i===1?rr(r,t-r.getMonth()):sn(r,t-r.getFullYear());n.changeFocus(l).changeView(i-1).render()}function bc(e){const t=e.picker,n=Ft();if(e.config.todayBtnMode===1){if(e.config.autohide){e.setDate(n);return}e.setDate(n,{render:!1}),t.update()}t.viewDate!==n&&t.changeFocus(n),t.changeView(0).render()}function Ic(e){e.setDate({clear:!0})}function vc(e){so(e)}function wc(e){lr(e,-1)}function Tc(e){lr(e,1)}function Oc(e,t){const n=io(t,".datepicker-cell");if(!n||n.classList.contains("disabled"))return;const{id:r,isMinView:i}=e.picker.currentView;i?e.setDate(Number(n.dataset.date)):r===1?Ys(e,Number(n.dataset.month)):Ys(e,Number(n.dataset.year))}function Dc(e){!e.inline&&!e.config.disableTouchKeyboard&&e.inputField.focus()}function qs(e,t){if(t.title!==void 0&&(t.title?(e.controls.title.textContent=t.title,Sn(e.controls.title)):(e.controls.title.textContent="",Rn(e.controls.title))),t.prevArrow){const n=e.controls.prevBtn;or(n),t.prevArrow.forEach(r=>{n.appendChild(r.cloneNode(!0))})}if(t.nextArrow){const n=e.controls.nextBtn;or(n),t.nextArrow.forEach(r=>{n.appendChild(r.cloneNode(!0))})}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),t.todayBtn!==void 0&&(t.todayBtn?Sn(e.controls.todayBtn):Rn(e.controls.todayBtn)),gt(t,"minDate")||gt(t,"maxDate")){const{minDate:n,maxDate:r}=e.datepicker.config;e.controls.todayBtn.disabled=!_i(Ft(),n,r)}t.clearBtn!==void 0&&(t.clearBtn?Sn(e.controls.clearBtn):Rn(e.controls.clearBtn))}function zs(e){const{dates:t,config:n}=e,r=t.length>0?Ei(t):n.defaultViewDate;return Ja(r,n.minDate,n.maxDate)}function Xs(e,t){const n=new Date(e.viewDate),r=new Date(t),{id:i,year:l,first:c,last:u}=e.currentView,f=r.getFullYear();switch(e.viewDate=t,f!==n.getFullYear()&&an(e.datepicker,"changeYear"),r.getMonth()!==n.getMonth()&&an(e.datepicker,"changeMonth"),i){case 0:return t<c||t>u;case 1:return f!==l;default:return f<c||f>u}}function Yr(e){return window.getComputedStyle(e).direction}class Rc{constructor(t){this.datepicker=t;const n=hc.replace(/%buttonClass%/g,t.config.buttonClass),r=this.element=mt(n).firstChild,[i,l,c]=r.firstChild.children,u=i.firstElementChild,[f,h,p]=i.lastElementChild.children,[m,I]=c.firstChild.children,b={title:u,prevBtn:f,viewSwitch:h,nextBtn:p,todayBtn:m,clearBtn:I};this.main=l,this.controls=b;const _=t.inline?"inline":"dropdown";r.classList.add(`datepicker-${_}`),_==="dropdown"&&r.classList.add("dropdown","absolute","top-0","left-0","z-20","pt-2"),qs(this,t.config),this.viewDate=zs(t),no(t,[[r,"click",Dc.bind(null,t),{capture:!0}],[l,"click",Oc.bind(null,t)],[b.viewSwitch,"click",vc.bind(null,t)],[b.prevBtn,"click",wc.bind(null,t)],[b.nextBtn,"click",Tc.bind(null,t)],[b.todayBtn,"click",bc.bind(null,t)],[b.clearBtn,"click",Ic.bind(null,t)]]),this.views=[new Ec(this),new _c(this),new $s(this,{id:2,name:"years",cellClass:"year",step:1}),new $s(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.config.container.appendChild(this.element)}setOptions(t){qs(this,t),this.views.forEach(n=>{n.init(t,!1)}),this.currentView.render()}detach(){this.datepicker.config.container.removeChild(this.element)}show(){if(this.active)return;this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;const t=this.datepicker;if(!t.inline){const n=Yr(t.inputField);n!==Yr(t.config.container)?this.element.dir=n:this.element.dir&&this.element.removeAttribute("dir"),this.place(),t.config.disableTouchKeyboard&&t.inputField.blur()}an(t,"show")}hide(){!this.active||(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,an(this.datepicker,"hide"))}place(){const{classList:t,style:n}=this.element,{config:r,inputField:i}=this.datepicker,l=r.container,{width:c,height:u}=this.element.getBoundingClientRect(),{left:f,top:h,width:p}=l.getBoundingClientRect(),{left:m,top:I,width:b,height:_}=i.getBoundingClientRect();let{x:v,y:T}=r.orientation,D,y,E;l===document.body?(D=window.scrollY,y=m+window.scrollX,E=I+D):(D=l.scrollTop,y=m-f,E=I-h+D),v==="auto"&&(y<0?(v="left",y=10):y+c>p?v="right":v=Yr(i)==="rtl"?"right":"left"),v==="right"&&(y-=c-b),T==="auto"&&(T=E-u<D?"bottom":"top"),T==="top"?E-=u:E+=_,t.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),t.add(`datepicker-orient-${T}`,`datepicker-orient-${v}`),n.top=E&&`${E}px`,n.left=y&&`${y}px`}setViewSwitchLabel(t){this.controls.viewSwitch.textContent=t}setPrevBtnDisabled(t){this.controls.prevBtn.disabled=t}setNextBtnDisabled(t){this.controls.nextBtn.disabled=t}changeView(t){const n=this.currentView,r=this.views[t];return r.id!==n.id&&(this.currentView=r,this._renderMethod="render",an(this.datepicker,"changeView"),this.main.replaceChild(r.element,n.element)),this}changeFocus(t){return this._renderMethod=Xs(this,t)?"render":"refreshFocus",this.views.forEach(n=>{n.updateFocus()}),this}update(){const t=zs(this.datepicker);return this._renderMethod=Xs(this,t)?"render":"refresh",this.views.forEach(n=>{n.updateFocus(),n.updateSelection()}),this}render(t=!0){const n=t&&this._renderMethod||"render";delete this._renderMethod,this.currentView[n]()}}function oo(e,t,n,r,i,l){if(!!_i(e,i,l)){if(r(e)){const c=t(e,n);return oo(c,t,n,r,i,l)}return e}}function $n(e,t,n,r){const i=e.picker,l=i.currentView,c=l.step||1;let u=i.viewDate,f,h;switch(l.id){case 0:r?u=rn(u,n*7):t.ctrlKey||t.metaKey?u=sn(u,n):u=rn(u,n),f=rn,h=p=>l.disabled.includes(p);break;case 1:u=rr(u,r?n*4:n),f=rr,h=p=>{const m=new Date(p),{year:I,disabled:b}=l;return m.getFullYear()===I&&b.includes(m.getMonth())};break;default:u=sn(u,n*(r?4:1)*c),f=sn,h=p=>l.disabled.includes(Lt(p,c))}u=oo(u,f,n<0?-c:c,h,l.minDate,l.maxDate),u!==void 0&&i.changeFocus(u).render()}function Sc(e,t){if(t.key==="Tab"){ao(e);return}const n=e.picker,{id:r,isMinView:i}=n.currentView;if(n.active)if(e.editMode)switch(t.key){case"Escape":n.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(t.key){case"Escape":n.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)lr(e,-1);else if(t.shiftKey){e.enterEditMode();return}else $n(e,t,-1,!1);break;case"ArrowRight":if(t.ctrlKey||t.metaKey)lr(e,1);else if(t.shiftKey){e.enterEditMode();return}else $n(e,t,1,!1);break;case"ArrowUp":if(t.ctrlKey||t.metaKey)so(e);else if(t.shiftKey){e.enterEditMode();return}else $n(e,t,-1,!0);break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){e.enterEditMode();return}$n(e,t,1,!0);break;case"Enter":i?e.setDate(n.viewDate):n.changeView(r-1).render();break;case"Backspace":case"Delete":e.enterEditMode();return;default:t.key.length===1&&!t.ctrlKey&&!t.metaKey&&e.enterEditMode();return}else switch(t.key){case"ArrowDown":case"Escape":n.show();break;case"Enter":e.update();break;default:return}t.preventDefault(),t.stopPropagation()}function Ac(e){e.config.showOnFocus&&!e._showing&&e.show()}function Lc(e,t){const n=t.target;(e.picker.active||e.config.showOnClick)&&(n._active=n===document.activeElement,n._clicking=setTimeout(()=>{delete n._active,delete n._clicking},2e3))}function Pc(e,t){const n=t.target;!n._clicking||(clearTimeout(n._clicking),delete n._clicking,n._active&&e.enterEditMode(),delete n._active,e.config.showOnClick&&e.show())}function Mc(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function Cc(e,t){const n=e.element;if(n!==document.activeElement)return;const r=e.picker.element;io(t,i=>i===n||i===r)||ao(e)}function lo(e,t){return e.map(n=>sr(n,t.format,t.locale)).join(t.dateDelimiter)}function co(e,t,n=!1){const{config:r,dates:i,rangepicker:l}=e;if(t.length===0)return n?[]:void 0;const c=l&&e===l.datepickers[1];let u=t.reduce((f,h)=>{let p=Pn(h,r.format,r.locale);if(p===void 0)return f;if(r.pickLevel>0){const m=new Date(p);r.pickLevel===1?p=c?m.setMonth(m.getMonth()+1,0):m.setDate(1):p=c?m.setFullYear(m.getFullYear()+1,0,0):m.setMonth(0,1)}return _i(p,r.minDate,r.maxDate)&&!f.includes(p)&&!r.datesDisabled.includes(p)&&!r.daysOfWeekDisabled.includes(new Date(p).getDay())&&f.push(p),f},[]);if(u.length!==0)return r.multidate&&!n&&(u=u.reduce((f,h)=>(i.includes(h)||f.push(h),f),i.filter(f=>!u.includes(f)))),r.maxNumberOfDates&&u.length>r.maxNumberOfDates?u.slice(r.maxNumberOfDates*-1):u}function cr(e,t=3,n=!0){const{config:r,picker:i,inputField:l}=e;if(t&2){const c=i.active?r.pickLevel:r.startView;i.update().changeView(c).render(n)}t&1&&l&&(l.value=lo(e.dates,r))}function Ks(e,t,n){let{clear:r,render:i,autohide:l}=n;i===void 0&&(i=!0),i?l===void 0&&(l=e.config.autohide):l=!1;const c=co(e,t,r);!c||(c.toString()!==e.dates.toString()?(e.dates=c,cr(e,i?3:1),an(e,"changeDate")):cr(e,1),l&&e.hide())}class xc{constructor(t,n={},r=void 0){t.datepicker=this,this.element=t;const i=this.config=Object.assign({buttonClass:n.buttonClass&&String(n.buttonClass)||"button",container:document.body,defaultViewDate:Ft(),maxDate:void 0,minDate:void 0},$r(bi,this));this._options=n,Object.assign(i,$r(n,this));const l=this.inline=t.tagName!=="INPUT";let c,u;if(l)i.container=t,u=Ur(t.dataset.date,i.dateDelimiter),delete t.dataset.date;else{const p=n.container?document.querySelector(n.container):null;p&&(i.container=p),c=this.inputField=t,c.classList.add("datepicker-input"),u=Ur(c.value,i.dateDelimiter)}if(r){const p=r.inputs.indexOf(c),m=r.datepickers;if(p<0||p>1||!Array.isArray(m))throw Error("Invalid rangepicker object.");m[p]=this,Object.defineProperty(this,"rangepicker",{get(){return r}})}this.dates=[];const f=co(this,u);f&&f.length>0&&(this.dates=f),c&&(c.value=lo(this.dates,i));const h=this.picker=new Rc(this);if(l)this.show();else{const p=Cc.bind(null,this),m=[[c,"keydown",Sc.bind(null,this)],[c,"focus",Ac.bind(null,this)],[c,"mousedown",Lc.bind(null,this)],[c,"click",Pc.bind(null,this)],[c,"paste",Mc.bind(null,this)],[document,"mousedown",p],[document,"touchstart",p],[window,"resize",h.place.bind(h)]];no(this,m)}}static formatDate(t,n,r){return sr(t,n,r&&In[r]||In.en)}static parseDate(t,n,r){return Pn(t,n,r&&In[r]||In.en)}static get locales(){return In}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(t){const n=this.picker,r=$r(t,this);Object.assign(this._options,t),Object.assign(this.config,r),n.setOptions(r),cr(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),cc(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t=void 0){const n=t?r=>sr(r,t,this.config.locale):r=>new Date(r);if(this.config.multidate)return this.dates.map(n);if(this.dates.length>0)return n(this.dates[0])}setDate(...t){const n=[...t],r={},i=Ei(t);typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&i&&Object.assign(r,n.pop());const l=Array.isArray(n[0])?n[0]:n;Ks(this,l,r)}update(t=void 0){if(this.inline)return;const n={clear:!0,autohide:!!(t&&t.autohide)},r=Ur(this.inputField.value,this.config.dateDelimiter);Ks(this,r,n)}refresh(t=void 0,n=!1){t&&typeof t!="string"&&(n=t,t=void 0);let r;t==="picker"?r=2:t==="input"?r=1:r=3,cr(this,r,!n)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700"))}exitEditMode(t=void 0){if(this.inline||!this.editMode)return;const n=Object.assign({update:!1},t);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700"),n.update&&this.update(n)}}/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const kc=e=>e instanceof HTMLElement,Nc=(e,t=[],n=[])=>{const r={...e},i=[],l=[],c=()=>({...r}),u=()=>{const _=[...i];return i.length=0,_},f=()=>{const _=[...l];l.length=0,_.forEach(({type:v,data:T})=>{h(v,T)})},h=(_,v,T)=>{if(T&&!document.hidden){l.push({type:_,data:v});return}b[_]&&b[_](v),i.push({type:_,data:v})},p=(_,...v)=>I[_]?I[_](...v):null,m={getState:c,processActionQueue:u,processDispatchQueue:f,dispatch:h,query:p};let I={};t.forEach(_=>{I={..._(r),...I}});let b={};return n.forEach(_=>{b={..._(h,p,r),...b}}),m},Gc=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},ye=(e,t)=>{for(const n in e)!e.hasOwnProperty(n)||t(n,e[n])},Ot=e=>{const t={};return ye(e,n=>{Gc(t,n,e[n])}),t},Oe=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},Fc="http://www.w3.org/2000/svg",Bc=["svg","path"],Zs=e=>Bc.includes(e),dr=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=Zs(e)?document.createElementNS(Fc,e):document.createElement(e);return t&&(Zs(e)?Oe(r,"class",t):r.className=t),ye(n,(i,l)=>{Oe(r,i,l)}),r},Vc=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},Uc=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),jc=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),Hc=(()=>typeof window<"u"&&typeof window.document<"u")(),uo=()=>Hc,Wc=uo()?dr("svg"):{},$c="children"in Wc?e=>e.children.length:e=>e.childNodes.length,fo=(e,t,n,r)=>{const i=n[0]||e.left,l=n[1]||e.top,c=i+e.width,u=l+e.height*(r[1]||1),f={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:l,right:c,bottom:u}};return t.filter(h=>!h.isRectIgnored()).map(h=>h.rect).forEach(h=>{Qs(f.inner,{...h.inner}),Qs(f.outer,{...h.outer})}),Js(f.inner),f.outer.bottom+=f.element.marginBottom,f.outer.right+=f.element.marginRight,Js(f.outer),f},Qs=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Js=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Pt=e=>typeof e=="number",Yc=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,qc=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,l=0,c=!1;const h=Ot({interpolate:(p,m)=>{if(c)return;if(!(Pt(r)&&Pt(i))){c=!0,l=0;return}const I=-(i-r)*e;l+=I/n,i+=l,l*=t,Yc(i,r,l)||m?(i=r,l=0,c=!0,h.onupdate(i),h.oncomplete(i)):h.onupdate(i)},target:{set:p=>{if(Pt(p)&&!Pt(i)&&(i=p),r===null&&(r=p,i=p),r=p,i===r||typeof r>"u"){c=!0,l=0,h.onupdate(i),h.oncomplete(i);return}c=!1},get:()=>r},resting:{get:()=>c},onupdate:p=>{},oncomplete:p=>{}});return h},zc=e=>e<.5?2*e*e:-1+(4-2*e)*e,Xc=({duration:e=500,easing:t=zc,delay:n=0}={})=>{let r=null,i,l,c=!0,u=!1,f=null;const p=Ot({interpolate:(m,I)=>{c||f===null||(r===null&&(r=m),!(m-r<n)&&(i=m-r-n,i>=e||I?(i=1,l=u?0:1,p.onupdate(l*f),p.oncomplete(l*f),c=!0):(l=i/e,p.onupdate((i>=0?t(u?1-l:l):0)*f))))},target:{get:()=>u?0:f,set:m=>{if(f===null){f=m,p.onupdate(m),p.oncomplete(m);return}m<f?(f=1,u=!0):(u=!1,f=m),c=!1,r=null}},resting:{get:()=>c},onupdate:m=>{},oncomplete:m=>{}});return p},ea={spring:qc,tween:Xc},Kc=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,l=typeof r=="object"?{...r}:{};return ea[i]?ea[i](l):null},vi=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(l=>{let c=l,u=()=>n[l],f=h=>n[l]=h;typeof l=="object"&&(c=l.key,u=l.getter||u,f=l.setter||f),!(i[c]&&!r)&&(i[c]={get:u,set:f})})})},Zc=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},l=[];return ye(e,(c,u)=>{const f=Kc(u);if(!f)return;f.onupdate=p=>{t[c]=p},f.target=i[c],vi([{key:c,setter:p=>{f.target!==p&&(f.target=p)},getter:()=>t[c]}],[n,r],t,!0),l.push(f)}),{write:c=>{let u=document.hidden,f=!0;return l.forEach(h=>{h.resting||(f=!1),h.interpolate(c,u)}),f},destroy:()=>{}}},Qc=e=>(t,n)=>{e.addEventListener(t,n)},Jc=e=>(t,n)=>{e.removeEventListener(t,n)},ed=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:l})=>{const c=[],u=Qc(l.element),f=Jc(l.element);return r.on=(h,p)=>{c.push({type:h,fn:p}),u(h,p)},r.off=(h,p)=>{c.splice(c.findIndex(m=>m.type===h&&m.fn===p),1),f(h,p)},{write:()=>!0,destroy:()=>{c.forEach(h=>{f(h.type,h.fn)})}}},td=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{vi(e,n,t)},Ce=e=>e!=null,nd={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},rd=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const l={...t},c={};vi(e,[n,r],t);const u=()=>[t.translateX||0,t.translateY||0],f=()=>[t.scaleX||0,t.scaleY||0],h=()=>i.rect?fo(i.rect,i.childViews,u(),f()):null;return n.rect={get:h},r.rect={get:h},e.forEach(p=>{t[p]=typeof l[p]>"u"?nd[p]:l[p]}),{write:()=>{if(!!id(c,t))return sd(i.element,t),Object.assign(c,{...t}),!0},destroy:()=>{}}},id=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},sd=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:l,scaleY:c,rotateX:u,rotateY:f,rotateZ:h,originX:p,originY:m,width:I,height:b})=>{let _="",v="";(Ce(p)||Ce(m))&&(v+=`transform-origin: ${p||0}px ${m||0}px;`),Ce(n)&&(_+=`perspective(${n}px) `),(Ce(r)||Ce(i))&&(_+=`translate3d(${r||0}px, ${i||0}px, 0) `),(Ce(l)||Ce(c))&&(_+=`scale3d(${Ce(l)?l:1}, ${Ce(c)?c:1}, 1) `),Ce(h)&&(_+=`rotateZ(${h}rad) `),Ce(u)&&(_+=`rotateX(${u}rad) `),Ce(f)&&(_+=`rotateY(${f}rad) `),_.length&&(v+=`transform:${_};`),Ce(t)&&(v+=`opacity:${t};`,t===0&&(v+="visibility:hidden;"),t<1&&(v+="pointer-events:none;")),Ce(b)&&(v+=`height:${b}px;`),Ce(I)&&(v+=`width:${I}px;`);const T=e.elementCurrentStyle||"";(v.length!==T.length||v!==T)&&(e.style.cssText=v,e.elementCurrentStyle=v)},ad={styles:rd,listeners:ed,animations:Zc,apis:td},ta=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),De=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:l=()=>{},destroy:c=()=>{},filterFrameActionsForChild:u=(b,_)=>_,didCreateView:f=()=>{},didWriteView:h=()=>{},ignoreRect:p=!1,ignoreRectUpdate:m=!1,mixins:I=[]}={})=>(b,_={})=>{const v=dr(e,`filepond--${t}`,n),T=window.getComputedStyle(v,null),D=ta();let y=null,E=!1;const O=[],A=[],N={},$={},P=[i],k=[r],X=[c],V=()=>v,j=()=>O.concat(),ne=()=>N,x=Q=>(he,We)=>he(Q,We),te=()=>y||(y=fo(D,O,[0,0],[1,1]),y),S=()=>T,C=()=>{y=null,O.forEach(We=>We._read()),!(m&&D.width&&D.height)&&ta(D,v,T);const he={root:ie,props:_,rect:D};k.forEach(We=>We(he))},H=(Q,he,We)=>{let Ae=he.length===0;return P.forEach(_e=>{_e({props:_,root:ie,actions:he,timestamp:Q,shouldOptimize:We})===!1&&(Ae=!1)}),A.forEach(_e=>{_e.write(Q)===!1&&(Ae=!1)}),O.filter(_e=>!!_e.element.parentNode).forEach(_e=>{_e._write(Q,u(_e,he),We)||(Ae=!1)}),O.forEach((_e,yt)=>{_e.element.parentNode||(ie.appendChild(_e.element,yt),_e._read(),_e._write(Q,u(_e,he),We),Ae=!1)}),E=Ae,h({props:_,root:ie,actions:he,timestamp:Q}),Ae},W=()=>{A.forEach(Q=>Q.destroy()),X.forEach(Q=>{Q({root:ie,props:_})}),O.forEach(Q=>Q._destroy())},Z={element:{get:V},style:{get:S},childViews:{get:j}},U={...Z,rect:{get:te},ref:{get:ne},is:Q=>t===Q,appendChild:Vc(v),createChildView:x(b),linkView:Q=>(O.push(Q),Q),unlinkView:Q=>{O.splice(O.indexOf(Q),1)},appendChildView:Uc(v,O),removeChildView:jc(v,O),registerWriter:Q=>P.push(Q),registerReader:Q=>k.push(Q),registerDestroyer:Q=>X.push(Q),invalidateLayout:()=>v.layoutCalculated=!1,dispatch:b.dispatch,query:b.query},z={element:{get:V},childViews:{get:j},rect:{get:te},resting:{get:()=>E},isRectIgnored:()=>p,_read:C,_write:H,_destroy:W},Ge={...Z,rect:{get:()=>D}};Object.keys(I).sort((Q,he)=>Q==="styles"?1:he==="styles"?-1:0).forEach(Q=>{const he=ad[Q]({mixinConfig:I[Q],viewProps:_,viewState:$,viewInternalAPI:U,viewExternalAPI:z,view:Ot(Ge)});he&&A.push(he)});const ie=Ot(U);l({root:ie,props:_});const ee=$c(v);return O.forEach((Q,he)=>{ie.appendChild(Q.element,ee+he)}),f(ie),Ot(z)},od=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],l=1e3/n;let c=null,u=null,f=null,h=null;const p=()=>{document.hidden?(f=()=>window.setTimeout(()=>m(performance.now()),l),h=()=>window.clearTimeout(u)):(f=()=>window.requestAnimationFrame(m),h=()=>window.cancelAnimationFrame(u))};document.addEventListener("visibilitychange",()=>{h&&h(),p(),m(performance.now())});const m=I=>{u=f(m),c||(c=I);const b=I-c;b<=l||(c=I-b%l,i.readers.forEach(_=>_()),i.writers.forEach(_=>_(I)))};return p(),m(performance.now()),{pause:()=>{h(u)}}},Ne=(e,t)=>({root:n,props:r,actions:i=[],timestamp:l,shouldOptimize:c})=>{i.filter(u=>e[u.type]).forEach(u=>e[u.type]({root:n,props:r,action:u.data,timestamp:l,shouldOptimize:c})),t&&t({root:n,props:r,actions:i,timestamp:l,shouldOptimize:c})},na=(e,t)=>t.parentNode.insertBefore(e,t),ra=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),gr=e=>Array.isArray(e),Et=e=>e==null,ld=e=>e.trim(),mr=e=>""+e,cd=(e,t=",")=>Et(e)?[]:gr(e)?e:mr(e).split(t).map(ld).filter(n=>n.length),po=e=>typeof e=="boolean",ho=e=>po(e)?e:e==="true",ke=e=>typeof e=="string",go=e=>Pt(e)?e:ke(e)?mr(e).replace(/[a-z]+/gi,""):0,tr=e=>parseInt(go(e),10),ia=e=>parseFloat(go(e)),un=e=>Pt(e)&&isFinite(e)&&Math.floor(e)===e,sa=(e,t=1e3)=>{if(un(e))return e;let n=mr(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),tr(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),tr(n)*t):tr(n)},Mt=e=>typeof e=="function",dd=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},aa={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},ud=e=>{const t={};return t.url=ke(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},ye(aa,n=>{t[n]=fd(n,e[n],aa[n],t.timeout,t.headers)}),t.process=e.process||ke(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},fd=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const l={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(ke(t))return l.url=t,l;if(Object.assign(l,t),ke(l.headers)){const c=l.headers.split(/:(.+)/);l.headers={header:c[0],value:c[1]}}return l.withCredentials=ho(l.withCredentials),l},pd=e=>ud(e),hd=e=>e===null,Se=e=>typeof e=="object"&&e!==null,gd=e=>Se(e)&&ke(e.url)&&Se(e.process)&&Se(e.revert)&&Se(e.restore)&&Se(e.fetch),oi=e=>gr(e)?"array":hd(e)?"null":un(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":gd(e)?"api":typeof e,md=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Ed={array:cd,boolean:ho,int:e=>oi(e)==="bytes"?sa(e):tr(e),number:ia,float:ia,bytes:sa,string:e=>Mt(e)?e:mr(e),function:e=>dd(e),serverapi:pd,object:e=>{try{return JSON.parse(md(e))}catch{return null}}},_d=(e,t)=>Ed[t](e),mo=(e,t,n)=>{if(e===t)return e;let r=oi(e);if(r!==n){const i=_d(e,n);if(r=oi(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},yd=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=mo(r,e,t)}}},bd=e=>{const t={};return ye(e,n=>{const r=e[n];t[n]=yd(r[0],r[1])}),Ot(t)},Id=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:bd(e)}),Er=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),vd=(e,t)=>{const n={};return ye(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${Er(r,"_").toUpperCase()}`,{value:i})}}}),n},wd=e=>(t,n,r)=>{const i={};return ye(e,l=>{const c=Er(l,"_").toUpperCase();i[`SET_${c}`]=u=>{try{r.options[l]=u.value}catch{}t(`DID_SET_${c}`,{value:r.options[l]})}}),i},Td=e=>t=>{const n={};return ye(e,r=>{n[`GET_${Er(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},Qe={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},wi=()=>Math.random().toString(36).substring(2,11),Ti=(e,t)=>e.splice(t,1),Od=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},_r=()=>{const e=[],t=(r,i)=>{Ti(e,e.findIndex(l=>l.event===r&&(l.cb===i||!i)))},n=(r,i,l)=>{e.filter(c=>c.event===r).map(c=>c.cb).forEach(c=>Od(()=>c(...i),l))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...l)=>{t(r,i),i(...l)}})},off:t}},Eo=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Dd=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],je=e=>{const t={};return Eo(e,t,Dd),t},Rd=e=>{e.forEach((t,n)=>{t.released&&Ti(e,n)})},J={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Re={INPUT:1,LIMBO:2,LOCAL:3},_o=e=>/[^0-9]+/.exec(e),yo=()=>_o(1.1 .toLocaleString())[0],Sd=()=>{const e=yo(),t=1e3 .toLocaleString(),n=1e3 .toString();return t!==n?_o(t)[0]:e==="."?",":"."},L={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Oi=[],it=(e,t,n)=>new Promise((r,i)=>{const l=Oi.filter(u=>u.key===e).map(u=>u.cb);if(l.length===0){r(t);return}const c=l.shift();l.reduce((u,f)=>u.then(h=>f(h,n)),c(t,n)).then(u=>r(u)).catch(u=>i(u))}),Bt=(e,t,n)=>Oi.filter(r=>r.key===e).map(r=>r.cb(t,n)),Ad=(e,t)=>Oi.push({key:e,cb:t}),Ld=e=>Object.assign(en,e),ur=()=>({...en}),Pd=e=>{ye(e,(t,n)=>{!en[t]||(en[t][0]=mo(n,en[t][0],en[t][1]))})},en={id:[null,L.STRING],name:["filepond",L.STRING],disabled:[!1,L.BOOLEAN],className:[null,L.STRING],required:[!1,L.BOOLEAN],captureMethod:[null,L.STRING],allowSyncAcceptAttribute:[!0,L.BOOLEAN],allowDrop:[!0,L.BOOLEAN],allowBrowse:[!0,L.BOOLEAN],allowPaste:[!0,L.BOOLEAN],allowMultiple:[!1,L.BOOLEAN],allowReplace:[!0,L.BOOLEAN],allowRevert:[!0,L.BOOLEAN],allowRemove:[!0,L.BOOLEAN],allowProcess:[!0,L.BOOLEAN],allowReorder:[!1,L.BOOLEAN],allowDirectoriesOnly:[!1,L.BOOLEAN],storeAsFile:[!1,L.BOOLEAN],forceRevert:[!1,L.BOOLEAN],maxFiles:[null,L.INT],checkValidity:[!1,L.BOOLEAN],itemInsertLocationFreedom:[!0,L.BOOLEAN],itemInsertLocation:["before",L.STRING],itemInsertInterval:[75,L.INT],dropOnPage:[!1,L.BOOLEAN],dropOnElement:[!0,L.BOOLEAN],dropValidation:[!1,L.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],L.ARRAY],instantUpload:[!0,L.BOOLEAN],maxParallelUploads:[2,L.INT],allowMinimumUploadDuration:[!0,L.BOOLEAN],chunkUploads:[!1,L.BOOLEAN],chunkForce:[!1,L.BOOLEAN],chunkSize:[5e6,L.INT],chunkRetryDelays:[[500,1e3,3e3],L.ARRAY],server:[null,L.SERVER_API],fileSizeBase:[1e3,L.INT],labelFileSizeBytes:["bytes",L.STRING],labelFileSizeKilobytes:["KB",L.STRING],labelFileSizeMegabytes:["MB",L.STRING],labelFileSizeGigabytes:["GB",L.STRING],labelDecimalSeparator:[yo(),L.STRING],labelThousandsSeparator:[Sd(),L.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',L.STRING],labelInvalidField:["Field contains invalid files",L.STRING],labelFileWaitingForSize:["Waiting for size",L.STRING],labelFileSizeNotAvailable:["Size not available",L.STRING],labelFileCountSingular:["file in list",L.STRING],labelFileCountPlural:["files in list",L.STRING],labelFileLoading:["Loading",L.STRING],labelFileAdded:["Added",L.STRING],labelFileLoadError:["Error during load",L.STRING],labelFileRemoved:["Removed",L.STRING],labelFileRemoveError:["Error during remove",L.STRING],labelFileProcessing:["Uploading",L.STRING],labelFileProcessingComplete:["Upload complete",L.STRING],labelFileProcessingAborted:["Upload cancelled",L.STRING],labelFileProcessingError:["Error during upload",L.STRING],labelFileProcessingRevertError:["Error during revert",L.STRING],labelTapToCancel:["tap to cancel",L.STRING],labelTapToRetry:["tap to retry",L.STRING],labelTapToUndo:["tap to undo",L.STRING],labelButtonRemoveItem:["Remove",L.STRING],labelButtonAbortItemLoad:["Abort",L.STRING],labelButtonRetryItemLoad:["Retry",L.STRING],labelButtonAbortItemProcessing:["Cancel",L.STRING],labelButtonUndoItemProcessing:["Undo",L.STRING],labelButtonRetryItemProcessing:["Retry",L.STRING],labelButtonProcessItem:["Upload",L.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',L.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',L.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',L.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',L.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',L.STRING],oninit:[null,L.FUNCTION],onwarning:[null,L.FUNCTION],onerror:[null,L.FUNCTION],onactivatefile:[null,L.FUNCTION],oninitfile:[null,L.FUNCTION],onaddfilestart:[null,L.FUNCTION],onaddfileprogress:[null,L.FUNCTION],onaddfile:[null,L.FUNCTION],onprocessfilestart:[null,L.FUNCTION],onprocessfileprogress:[null,L.FUNCTION],onprocessfileabort:[null,L.FUNCTION],onprocessfilerevert:[null,L.FUNCTION],onprocessfile:[null,L.FUNCTION],onprocessfiles:[null,L.FUNCTION],onremovefile:[null,L.FUNCTION],onpreparefile:[null,L.FUNCTION],onupdatefiles:[null,L.FUNCTION],onreorderfiles:[null,L.FUNCTION],beforeDropFile:[null,L.FUNCTION],beforeAddFile:[null,L.FUNCTION],beforeRemoveFile:[null,L.FUNCTION],beforePrepareFile:[null,L.FUNCTION],stylePanelLayout:[null,L.STRING],stylePanelAspectRatio:[null,L.STRING],styleItemPanelAspectRatio:[null,L.STRING],styleButtonRemoveItemPosition:["left",L.STRING],styleButtonProcessItemPosition:["right",L.STRING],styleLoadIndicatorPosition:["right",L.STRING],styleProgressIndicatorPosition:["right",L.STRING],styleButtonRemoveItemAlign:[!1,L.BOOLEAN],files:[[],L.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],L.ARRAY]},Ct=(e,t)=>Et(t)?e[0]||null:un(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),bo=e=>{if(Et(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},st=e=>e.filter(t=>!t.archived),Md={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Yn=null;const Cd=()=>{if(Yn===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,Yn=t.files.length===1}catch{Yn=!1}return Yn},xd=[J.LOAD_ERROR,J.PROCESSING_ERROR,J.PROCESSING_REVERT_ERROR],kd=[J.LOADING,J.PROCESSING,J.PROCESSING_QUEUED,J.INIT],Nd=[J.PROCESSING_COMPLETE],Gd=e=>xd.includes(e.status),Fd=e=>kd.includes(e.status),Bd=e=>Nd.includes(e.status),oa=e=>Se(e.options.server)&&(Se(e.options.server.process)||Mt(e.options.server.process)),Vd=e=>({GET_STATUS:()=>{const t=st(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:l,READY:c}=Md;return t.length===0?n:t.some(Gd)?r:t.some(Fd)?i:t.some(Bd)?c:l},GET_ITEM:t=>Ct(e.items,t),GET_ACTIVE_ITEM:t=>Ct(st(e.items),t),GET_ACTIVE_ITEMS:()=>st(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=Ct(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=Ct(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:bo(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>st(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>st(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&Cd()&&!oa(e),IS_ASYNC:()=>oa(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Ud=e=>{const t=st(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Io=(e,t,n)=>Math.max(Math.min(n,e),t),jd=(e,t,n)=>e.splice(t,0,n),Hd=(e,t,n)=>Et(t)?null:typeof n>"u"?(e.push(t),t):(n=Io(n,0,e.length),jd(e,n,t),t),li=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Cn=e=>e.split("/").pop().split("?").shift(),yr=e=>e.split(".").pop(),Wd=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},vn=(e,t="")=>(t+e).slice(-t.length),vo=(e=new Date)=>`${e.getFullYear()}-${vn(e.getMonth()+1,"00")}-${vn(e.getDate(),"00")}_${vn(e.getHours(),"00")}-${vn(e.getMinutes(),"00")}-${vn(e.getSeconds(),"00")}`,cn=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),ke(t)||(t=vo()),t&&r===null&&yr(t)?i.name=t:(r=r||Wd(i.type),i.name=t+(r?"."+r:"")),i},$d=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,wo=(e,t)=>{const n=$d();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Yd=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return wo(n,t)},To=e=>(/^data:(.+);/.exec(e)||[])[1]||null,qd=e=>e.split(",")[1].replace(/\s/g,""),zd=e=>atob(qd(e)),Xd=e=>{const t=To(e),n=zd(e);return Yd(n,t)},Kd=(e,t,n)=>cn(Xd(e),t,null,n),Zd=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},Qd=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Jd=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Di=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=Zd(r);if(i){t.name=i;continue}const l=Qd(r);if(l){t.size=l;continue}const c=Jd(r);if(c){t.source=c;continue}}return t},eu=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const u=t.source;c.fire("init",u),u instanceof File?c.fire("load",u):u instanceof Blob?c.fire("load",cn(u,u.name)):li(u)?c.fire("load",Kd(u)):l(u)},l=u=>{if(!e){c.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(u,f=>{t.duration=Date.now()-t.timestamp,t.complete=!0,f instanceof Blob&&(f=cn(f,f.name||Cn(u))),c.fire("load",f instanceof Blob?f:f?f.body:null)},f=>{c.fire("error",typeof f=="string"?{type:"error",code:0,body:f}:f)},(f,h,p)=>{if(p&&(t.size=p),t.duration=Date.now()-t.timestamp,!f){t.progress=null;return}t.progress=h/p,c.fire("progress",t.progress)},()=>{c.fire("abort")},f=>{const h=Di(typeof f=="string"?f:f.headers);c.fire("meta",{size:t.size||h.size,filename:h.name,source:h.source})})},c={..._r(),setSource:u=>t.source=u,getProgress:n,abort:r,load:i};return c},la=e=>/GET|HEAD/.test(e),xt=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,c.abort()}};let i=!1,l=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),la(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const c=new XMLHttpRequest,u=la(n.method)?c:c.upload;return u.onprogress=f=>{i||r.onprogress(f.lengthComputable,f.loaded,f.total)},c.onreadystatechange=()=>{c.readyState<2||c.readyState===4&&c.status===0||l||(l=!0,r.onheaders(c))},c.onload=()=>{c.status>=200&&c.status<300?r.onload(c):r.onerror(c)},c.onerror=()=>r.onerror(c),c.onabort=()=>{i=!0,r.onabort()},c.ontimeout=()=>r.ontimeout(c),c.open(n.method,t,!0),un(n.timeout)&&(c.timeout=n.timeout),Object.keys(n.headers).forEach(f=>{const h=unescape(encodeURIComponent(n.headers[f]));c.setRequestHeader(f,h)}),n.responseType&&(c.responseType=n.responseType),n.withCredentials&&(c.withCredentials=!0),c.send(e),r},we=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),kt=e=>t=>{e(we("error",0,"Timeout",t.getAllResponseHeaders()))},ca=e=>/\?/.test(e),An=(...e)=>{let t="";return e.forEach(n=>{t+=ca(t)&&ca(n)?n.replace(/\?/,"&"):n}),t},qr=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ke(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,l,c,u,f,h)=>{const p=xt(i,An(e,t.url),{...t,responseType:"blob"});return p.onload=m=>{const I=m.getAllResponseHeaders(),b=Di(I).name||Cn(i);l(we("load",m.status,t.method==="HEAD"?null:cn(n(m.response),b),I))},p.onerror=m=>{c(we("error",m.status,r(m.response)||m.statusText,m.getAllResponseHeaders()))},p.onheaders=m=>{h(we("headers",m.status,null,m.getAllResponseHeaders()))},p.ontimeout=kt(c),p.onprogress=u,p.onabort=f,p}},Xe={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},tu=(e,t,n,r,i,l,c,u,f,h,p)=>{const m=[],{chunkTransferId:I,chunkServer:b,chunkSize:_,chunkRetryDelays:v}=p,T={serverId:I,aborted:!1},D=t.ondata||(x=>x),y=t.onload||((x,te)=>te==="HEAD"?x.getResponseHeader("Upload-Offset"):x.response),E=t.onerror||(x=>null),O=x=>{const te=new FormData;Se(i)&&te.append(n,JSON.stringify(i));const S=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},C={...t,headers:S},H=xt(D(te),An(e,t.url),C);H.onload=W=>x(y(W,C.method)),H.onerror=W=>c(we("error",W.status,E(W.response)||W.statusText,W.getAllResponseHeaders())),H.ontimeout=kt(c)},A=x=>{const te=An(e,b.url,T.serverId),C={headers:typeof t.headers=="function"?t.headers(T.serverId):{...t.headers},method:"HEAD"},H=xt(null,te,C);H.onload=W=>x(y(W,C.method)),H.onerror=W=>c(we("error",W.status,E(W.response)||W.statusText,W.getAllResponseHeaders())),H.ontimeout=kt(c)},N=Math.floor(r.size/_);for(let x=0;x<=N;x++){const te=x*_,S=r.slice(te,te+_,"application/offset+octet-stream");m[x]={index:x,size:S.size,offset:te,data:S,file:r,progress:0,retries:[...v],status:Xe.QUEUED,error:null,request:null,timeout:null}}const $=()=>l(T.serverId),P=x=>x.status===Xe.QUEUED||x.status===Xe.ERROR,k=x=>{if(T.aborted)return;if(x=x||m.find(P),!x){m.every(Z=>Z.status===Xe.COMPLETE)&&$();return}x.status=Xe.PROCESSING,x.progress=null;const te=b.ondata||(Z=>Z),S=b.onerror||(Z=>null),C=An(e,b.url,T.serverId),H=typeof b.headers=="function"?b.headers(x):{...b.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":x.offset,"Upload-Length":r.size,"Upload-Name":r.name},W=x.request=xt(te(x.data),C,{...b,headers:H});W.onload=()=>{x.status=Xe.COMPLETE,x.request=null,j()},W.onprogress=(Z,U,z)=>{x.progress=Z?U:null,V()},W.onerror=Z=>{x.status=Xe.ERROR,x.request=null,x.error=S(Z.response)||Z.statusText,X(x)||c(we("error",Z.status,S(Z.response)||Z.statusText,Z.getAllResponseHeaders()))},W.ontimeout=Z=>{x.status=Xe.ERROR,x.request=null,X(x)||kt(c)(Z)},W.onabort=()=>{x.status=Xe.QUEUED,x.request=null,f()}},X=x=>x.retries.length===0?!1:(x.status=Xe.WAITING,clearTimeout(x.timeout),x.timeout=setTimeout(()=>{k(x)},x.retries.shift()),!0),V=()=>{const x=m.reduce((S,C)=>S===null||C.progress===null?null:S+C.progress,0);if(x===null)return u(!1,0,0);const te=m.reduce((S,C)=>S+C.size,0);u(!0,x,te)},j=()=>{m.filter(te=>te.status===Xe.PROCESSING).length>=1||k()},ne=()=>{m.forEach(x=>{clearTimeout(x.timeout),x.request&&x.request.abort()})};return T.serverId?A(x=>{T.aborted||(m.filter(te=>te.offset<x).forEach(te=>{te.status=Xe.COMPLETE,te.progress=te.size}),j())}):O(x=>{T.aborted||(h(x),T.serverId=x,j())}),{abort:()=>{T.aborted=!0,ne()}}},nu=(e,t,n,r)=>(i,l,c,u,f,h,p)=>{if(!i)return;const m=r.chunkUploads,I=m&&i.size>r.chunkSize,b=m&&(I||r.chunkForce);if(i instanceof Blob&&b)return tu(e,t,n,i,l,c,u,f,h,p,r);const _=t.ondata||(A=>A),v=t.onload||(A=>A),T=t.onerror||(A=>null),D=typeof t.headers=="function"?t.headers(i,l)||{}:{...t.headers},y={...t,headers:D};var E=new FormData;Se(l)&&E.append(n,JSON.stringify(l)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(A=>{E.append(n,A.file,A.name===null?A.file.name:`${A.name}${A.file.name}`)});const O=xt(_(E),An(e,t.url),y);return O.onload=A=>{c(we("load",A.status,v(A.response),A.getAllResponseHeaders()))},O.onerror=A=>{u(we("error",A.status,T(A.response)||A.statusText,A.getAllResponseHeaders()))},O.ontimeout=kt(u),O.onprogress=f,O.onabort=h,O},ru=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!ke(t.url)?null:nu(e,t,n,r),wn=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ke(t.url))return(i,l)=>l();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,l,c)=>{const u=xt(i,e+t.url,t);return u.onload=f=>{l(we("load",f.status,n(f.response),f.getAllResponseHeaders()))},u.onerror=f=>{c(we("error",f.status,r(f.response)||f.statusText,f.getAllResponseHeaders()))},u.ontimeout=kt(c),u}},Oo=(e=0,t=1)=>e+Math.random()*(t-e),iu=(e,t=1e3,n=0,r=25,i=250)=>{let l=null;const c=Date.now(),u=()=>{let f=Date.now()-c,h=Oo(r,i);f+h>t&&(h=f+h-t);let p=f/t;if(p>=1||document.hidden){e(1);return}e(p),l=setTimeout(u,h)};return t>0&&u(),{clear:()=>{clearTimeout(l)}}},su=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(p,m)=>{const I=()=>{n.duration===0||n.progress===null||h.fire("progress",h.getProgress())},b=()=>{n.complete=!0,h.fire("load-perceived",n.response.body)};h.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=iu(_=>{n.perceivedProgress=_,n.perceivedDuration=Date.now()-n.timestamp,I(),n.response&&n.perceivedProgress===1&&!n.complete&&b()},r?Oo(750,1500):0),n.request=e(p,m,_=>{n.response=Se(_)?_:{type:"load",code:200,body:`${_}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,h.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&b()},_=>{n.perceivedPerformanceUpdater.clear(),h.fire("error",Se(_)?_:{type:"error",code:0,body:`${_}`})},(_,v,T)=>{n.duration=Date.now()-n.timestamp,n.progress=_?v/T:null,I()},()=>{n.perceivedPerformanceUpdater.clear(),h.fire("abort",n.response?n.response.body:null)},_=>{h.fire("transfer",_)})},l=()=>{!n.request||(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},c=()=>{l(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},u=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,f=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,h={..._r(),process:i,abort:l,getProgress:u,getDuration:f,reset:c};return h},Do=e=>e.substring(0,e.lastIndexOf("."))||e,au=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||li(e)?t[0]=e.name||vo():li(e)?(t[1]=e.length,t[2]=To(e)):ke(e)&&(t[0]=Cn(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},dn=e=>!!(e instanceof File||e instanceof Blob&&e.name),Ro=e=>{if(!Se(e))return e;const t=gr(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&Se(r)?Ro(r):r}return t},ou=(e=null,t=null,n=null)=>{const r=wi(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?J.PROCESSING_COMPLETE:J.INIT,activeLoader:null,activeProcessor:null};let l=null;const c={},u=P=>i.status=P,f=(P,...k)=>{i.released||i.frozen||N.fire(P,...k)},h=()=>yr(i.file.name),p=()=>i.file.type,m=()=>i.file.size,I=()=>i.file,b=(P,k,X)=>{if(i.source=P,N.fireSync("init"),i.file){N.fireSync("load-skip");return}i.file=au(P),k.on("init",()=>{f("load-init")}),k.on("meta",V=>{i.file.size=V.size,i.file.filename=V.filename,V.source&&(e=Re.LIMBO,i.serverFileReference=V.source,i.status=J.PROCESSING_COMPLETE),f("load-meta")}),k.on("progress",V=>{u(J.LOADING),f("load-progress",V)}),k.on("error",V=>{u(J.LOAD_ERROR),f("load-request-error",V)}),k.on("abort",()=>{u(J.INIT),f("load-abort")}),k.on("load",V=>{i.activeLoader=null;const j=x=>{i.file=dn(x)?x:i.file,e===Re.LIMBO&&i.serverFileReference?u(J.PROCESSING_COMPLETE):u(J.IDLE),f("load")},ne=x=>{i.file=V,f("load-meta"),u(J.LOAD_ERROR),f("load-file-error",x)};if(i.serverFileReference){j(V);return}X(V,j,ne)}),k.setSource(P),i.activeLoader=k,k.load()},_=()=>{!i.activeLoader||i.activeLoader.load()},v=()=>{if(i.activeLoader){i.activeLoader.abort();return}u(J.INIT),f("load-abort")},T=(P,k)=>{if(i.processingAborted){i.processingAborted=!1;return}if(u(J.PROCESSING),l=null,!(i.file instanceof Blob)){N.on("load",()=>{T(P,k)});return}P.on("load",j=>{i.transferId=null,i.serverFileReference=j}),P.on("transfer",j=>{i.transferId=j}),P.on("load-perceived",j=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=j,u(J.PROCESSING_COMPLETE),f("process-complete",j)}),P.on("start",()=>{f("process-start")}),P.on("error",j=>{i.activeProcessor=null,u(J.PROCESSING_ERROR),f("process-error",j)}),P.on("abort",j=>{i.activeProcessor=null,i.serverFileReference=j,u(J.IDLE),f("process-abort"),l&&l()}),P.on("progress",j=>{f("process-progress",j)});const X=j=>{i.archived||P.process(j,{...c})},V=console.error;k(i.file,X,V),i.activeProcessor=P},D=()=>{i.processingAborted=!1,u(J.PROCESSING_QUEUED)},y=()=>new Promise(P=>{if(!i.activeProcessor){i.processingAborted=!0,u(J.IDLE),f("process-abort"),P();return}l=()=>{P()},i.activeProcessor.abort()}),E=(P,k)=>new Promise((X,V)=>{const j=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(j===null){X();return}P(j,()=>{i.serverFileReference=null,i.transferId=null,X()},ne=>{if(!k){X();return}u(J.PROCESSING_REVERT_ERROR),f("process-revert-error"),V(ne)}),u(J.IDLE),f("process-revert")}),O=(P,k,X)=>{const V=P.split("."),j=V[0],ne=V.pop();let x=c;V.forEach(te=>x=x[te]),JSON.stringify(x[ne])!==JSON.stringify(k)&&(x[ne]=k,f("metadata-update",{key:j,value:c[j],silent:X}))},N={id:{get:()=>r},origin:{get:()=>e,set:P=>e=P},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Do(i.file.name)},fileExtension:{get:h},fileType:{get:p},fileSize:{get:m},file:{get:I},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:P=>Ro(P?c[P]:c),setMetadata:(P,k,X)=>{if(Se(P)){const V=P;return Object.keys(V).forEach(j=>{O(j,V[j],k)}),P}return O(P,k,X),k},extend:(P,k)=>$[P]=k,abortLoad:v,retryLoad:_,requestProcessing:D,abortProcessing:y,load:b,process:T,revert:E,..._r(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},$=Ot(N);return $},lu=(e,t)=>Et(t)?0:ke(t)?e.findIndex(n=>n.id===t):-1,da=(e,t)=>{const n=lu(e,t);if(!(n<0))return e[n]||null},ua=(e,t,n,r,i,l)=>{const c=xt(null,e,{method:"GET",responseType:"blob"});return c.onload=u=>{const f=u.getAllResponseHeaders(),h=Di(f).name||Cn(e);t(we("load",u.status,cn(u.response,h),f))},c.onerror=u=>{n(we("error",u.status,u.statusText,u.getAllResponseHeaders()))},c.onheaders=u=>{l(we("headers",u.status,null,u.getAllResponseHeaders()))},c.ontimeout=kt(n),c.onprogress=r,c.onabort=i,c},fa=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),cu=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&fa(location.href)!==fa(e),qn=e=>(...t)=>Mt(e)?e(...t):e,du=e=>!dn(e.file),zr=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:st(t.items)})},0)},pa=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),Xr=(e,t)=>{e.items.sort((n,r)=>t(je(n),je(r)))},Ke=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...l}={})=>{const c=Ct(e.items,n);if(!c){i({error:we("error",0,"Item not found"),file:null});return}t(c,r,i,l||{})},uu=(e,t,n)=>({ABORT_ALL:()=>{st(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(c=>({source:c.source?c.source:c,options:c.options}));let l=st(n.items);l.forEach(c=>{i.find(u=>u.source===c.source||u.source===c.file)||e("REMOVE_ITEM",{query:c,remove:!1})}),l=st(n.items),i.forEach((c,u)=>{l.find(f=>f.source===c.source||f.file===c.source)||e("ADD_ITEM",{...c,interactionMethod:Qe.NONE,index:u})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:l})=>{l.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const c=da(n.items,r);if(!t("IS_ASYNC")){it("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t,action:i,change:l}).then(p=>{const m=t("GET_BEFORE_PREPARE_FILE");m&&(p=m(c,p)),p&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:c,success:I=>{e("DID_PREPARE_OUTPUT",{id:r,file:I})}},!0)});return}c.origin===Re.LOCAL&&e("DID_LOAD_ITEM",{id:c.id,error:null,serverFileReference:c.source});const u=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},f=p=>{c.revert(wn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(p?u:()=>{}).catch(()=>{})},h=p=>{c.abortProcessing().then(p?u:()=>{})};if(c.status===J.PROCESSING_COMPLETE)return f(n.options.instantUpload);if(c.status===J.PROCESSING)return h(n.options.instantUpload);n.options.instantUpload&&u()},0))},MOVE_ITEM:({query:r,index:i})=>{const l=Ct(n.items,r);if(!l)return;const c=n.items.indexOf(l);i=Io(i,0,n.items.length-1),c!==i&&n.items.splice(i,0,n.items.splice(c,1)[0])},SORT:({compare:r})=>{Xr(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:l,success:c=()=>{},failure:u=()=>{}})=>{let f=i;if(i===-1||typeof i>"u"){const b=t("GET_ITEM_INSERT_LOCATION"),_=t("GET_TOTAL_ITEMS");f=b==="before"?0:_}const h=t("GET_IGNORED_FILES"),p=b=>dn(b)?!h.includes(b.name.toLowerCase()):!Et(b),I=r.filter(p).map(b=>new Promise((_,v)=>{e("ADD_ITEM",{interactionMethod:l,source:b.source||b,success:_,failure:v,index:f++,options:b.options||{}})}));Promise.all(I).then(c).catch(u)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:l,success:c=()=>{},failure:u=()=>{},options:f={}})=>{if(Et(r)){u({error:we("error",0,"No source"),file:null});return}if(dn(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!Ud(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const y=we("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:y}),u({error:y,file:null});return}const D=st(n.items)[0];if(D.status===J.PROCESSING_COMPLETE||D.status===J.PROCESSING_REVERT_ERROR){const y=t("GET_FORCE_REVERT");if(D.revert(wn(n.options.server.url,n.options.server.revert),y).then(()=>{!y||e("ADD_ITEM",{source:r,index:i,interactionMethod:l,success:c,failure:u,options:f})}).catch(()=>{}),y)return}e("REMOVE_ITEM",{query:D.id})}const h=f.type==="local"?Re.LOCAL:f.type==="limbo"?Re.LIMBO:Re.INPUT,p=ou(h,h===Re.INPUT?null:r,f.file);Object.keys(f.metadata||{}).forEach(D=>{p.setMetadata(D,f.metadata[D])}),Bt("DID_CREATE_ITEM",p,{query:t,dispatch:e});const m=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=m==="before"?-1:n.items.length),Hd(n.items,p,i),Mt(m)&&r&&Xr(n,m);const I=p.id;p.on("init",()=>{e("DID_INIT_ITEM",{id:I})}),p.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:I})}),p.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:I})}),p.on("load-progress",D=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:I,progress:D})}),p.on("load-request-error",D=>{const y=qn(n.options.labelFileLoadError)(D);if(D.code>=400&&D.code<500){e("DID_THROW_ITEM_INVALID",{id:I,error:D,status:{main:y,sub:`${D.code} (${D.body})`}}),u({error:D,file:je(p)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:I,error:D,status:{main:y,sub:n.options.labelTapToRetry}})}),p.on("load-file-error",D=>{e("DID_THROW_ITEM_INVALID",{id:I,error:D.status,status:D.status}),u({error:D.status,file:je(p)})}),p.on("load-abort",()=>{e("REMOVE_ITEM",{query:I})}),p.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:I,item:p,data:{source:r,success:c}})}),p.on("load",()=>{const D=y=>{if(!y){e("REMOVE_ITEM",{query:I});return}p.on("metadata-update",E=>{e("DID_UPDATE_ITEM_METADATA",{id:I,change:E})}),it("SHOULD_PREPARE_OUTPUT",!1,{item:p,query:t}).then(E=>{const O=t("GET_BEFORE_PREPARE_FILE");O&&(E=O(p,E));const A=()=>{e("COMPLETE_LOAD_ITEM",{query:I,item:p,data:{source:r,success:c}}),zr(e,n)};if(E){e("REQUEST_PREPARE_OUTPUT",{query:I,item:p,success:N=>{e("DID_PREPARE_OUTPUT",{id:I,file:N}),A()}},!0);return}A()})};it("DID_LOAD_ITEM",p,{query:t,dispatch:e}).then(()=>{pa(t("GET_BEFORE_ADD_FILE"),je(p)).then(D)}).catch(y=>{if(!y||!y.error||!y.status)return D(!1);e("DID_THROW_ITEM_INVALID",{id:I,error:y.error,status:y.status})})}),p.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:I})}),p.on("process-progress",D=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:I,progress:D})}),p.on("process-error",D=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:I,error:D,status:{main:qn(n.options.labelFileProcessingError)(D),sub:n.options.labelTapToRetry}})}),p.on("process-revert-error",D=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:I,error:D,status:{main:qn(n.options.labelFileProcessingRevertError)(D),sub:n.options.labelTapToRetry}})}),p.on("process-complete",D=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:I,error:null,serverFileReference:D}),e("DID_DEFINE_VALUE",{id:I,value:D})}),p.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:I})}),p.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:I}),e("DID_DEFINE_VALUE",{id:I,value:null})}),e("DID_ADD_ITEM",{id:I,index:i,interactionMethod:l}),zr(e,n);const{url:b,load:_,restore:v,fetch:T}=n.options.server||{};p.load(r,eu(h===Re.INPUT?ke(r)&&cu(r)&&T?qr(b,T):ua:h===Re.LIMBO?qr(b,v):qr(b,_)),(D,y,E)=>{it("LOAD_FILE",D,{query:t}).then(y).catch(E)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:l=()=>{}})=>{const c={error:we("error",0,"Item not found"),file:null};if(r.archived)return l(c);it("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(u=>{it("COMPLETE_PREPARE_OUTPUT",u,{query:t,item:r}).then(f=>{if(r.archived)return l(c);i(f)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:l,source:c}=i,u=t("GET_ITEM_INSERT_LOCATION");if(Mt(u)&&c&&Xr(n,u),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Re.INPUT?null:c}),l(je(r)),r.origin===Re.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Re.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:c}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||c});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:Ke(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:Ke(n,(r,i,l)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:c=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:c}),i({file:r,output:c})},failure:l},!0)}),REQUEST_ITEM_PROCESSING:Ke(n,(r,i,l)=>{if(!(r.status===J.IDLE||r.status===J.PROCESSING_ERROR)){const u=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:l}),f=()=>document.hidden?u():setTimeout(u,32);r.status===J.PROCESSING_COMPLETE||r.status===J.PROCESSING_REVERT_ERROR?r.revert(wn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(f).catch(()=>{}):r.status===J.PROCESSING&&r.abortProcessing().then(f);return}r.status!==J.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:l},!0))}),PROCESS_ITEM:Ke(n,(r,i,l)=>{const c=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",J.PROCESSING).length===c){n.processingQueue.push({id:r.id,success:i,failure:l});return}if(r.status===J.PROCESSING)return;const f=()=>{const p=n.processingQueue.shift();if(!p)return;const{id:m,success:I,failure:b}=p,_=Ct(n.items,m);if(!_||_.archived){f();return}e("PROCESS_ITEM",{query:m,success:I,failure:b},!0)};r.onOnce("process-complete",()=>{i(je(r)),f();const p=n.options.server;if(n.options.instantUpload&&r.origin===Re.LOCAL&&Mt(p.remove)){const b=()=>{};r.origin=Re.LIMBO,n.options.server.remove(r.source,b,b)}t("GET_ITEMS_BY_STATUS",J.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",p=>{l({error:p,file:je(r)}),f()});const h=n.options;r.process(su(ru(h.server.url,h.server.process,h.name,{chunkTransferId:r.transferId,chunkServer:h.server.patch,chunkUploads:h.chunkUploads,chunkForce:h.chunkForce,chunkSize:h.chunkSize,chunkRetryDelays:h.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(p,m,I)=>{it("PREPARE_OUTPUT",p,{query:t,item:r}).then(b=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:b}),m(b)}).catch(I)})}),RETRY_ITEM_PROCESSING:Ke(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:Ke(n,r=>{pa(t("GET_BEFORE_REMOVE_FILE"),je(r)).then(i=>{!i||e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:Ke(n,r=>{r.release()}),REMOVE_ITEM:Ke(n,(r,i,l,c)=>{const u=()=>{const h=r.id;da(n.items,h).archive(),e("DID_REMOVE_ITEM",{error:null,id:h,item:r}),zr(e,n),i(je(r))},f=n.options.server;r.origin===Re.LOCAL&&f&&Mt(f.remove)&&c.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),f.remove(r.source,()=>u(),h=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:we("error",0,h,null),status:{main:qn(n.options.labelFileRemoveError)(h),sub:n.options.labelTapToRetry}})})):((c.revert&&r.origin!==Re.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(wn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),u())}),ABORT_ITEM_LOAD:Ke(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:Ke(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ke(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=u=>{!u||e("REVERT_ITEM_PROCESSING",{query:r})},l=t("GET_BEFORE_REMOVE_FILE");if(!l)return i(!0);const c=l(je(r));if(c==null)return i(!0);if(typeof c=="boolean")return i(c);typeof c.then=="function"&&c.then(i)}),REVERT_ITEM_PROCESSING:Ke(n,r=>{r.revert(wn(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||du(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),l=fu.filter(u=>i.includes(u));[...l,...Object.keys(r).filter(u=>!l.includes(u))].forEach(u=>{e(`SET_${Er(u,"_").toUpperCase()}`,{value:r[u]})})}}),fu=["server"],Ri=e=>e,_t=e=>document.createElement(e),Te=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},ha=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},pu=(e,t,n,r,i,l)=>{const c=ha(e,t,n,i),u=ha(e,t,n,r);return["M",c.x,c.y,"A",n,n,0,l,0,u.x,u.y].join(" ")},hu=(e,t,n,r,i)=>{let l=1;return i>r&&i-r<=.5&&(l=0),r>i&&r-i>=.5&&(l=0),pu(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,l)},gu=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=dr("svg");e.ref.path=dr("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},mu=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(Oe(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,l=0;t.spin?(i=0,l=.5):(i=0,l=t.progress);const c=hu(r,r,r-n,i,l);Oe(e.ref.path,"d",c),Oe(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},ga=De({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:gu,write:mu,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Eu=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},_u=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,Oe(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},So=De({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Eu,write:_u}),Ao=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:l="KB",labelMegabytes:c="MB",labelGigabytes:u="GB"}=r;e=Math.round(Math.abs(e));const f=n,h=n*n,p=n*n*n;return e<f?`${e} ${i}`:e<h?`${Math.floor(e/f)} ${l}`:e<p?`${ma(e/h,1,t)} ${c}`:`${ma(e/p,2,t)} ${u}`},ma=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),yu=({root:e,props:t})=>{const n=_t("span");n.className="filepond--file-info-main",Oe(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=_t("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,Te(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Te(n,Ri(e.query("GET_ITEM_NAME",t.id)))},ci=({root:e,props:t})=>{Te(e.ref.fileSize,Ao(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Te(e.ref.fileName,Ri(e.query("GET_ITEM_NAME",t.id)))},Ea=({root:e,props:t})=>{if(un(e.query("GET_ITEM_SIZE",t.id))){ci({root:e,props:t});return}Te(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},bu=De({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Ne({DID_LOAD_ITEM:ci,DID_UPDATE_ITEM_META:ci,DID_THROW_ITEM_LOAD_ERROR:Ea,DID_THROW_ITEM_INVALID:Ea}),didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},create:yu,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Lo=e=>Math.round(e*100),Iu=({root:e})=>{const t=_t("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=_t("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Po({root:e,action:{progress:null}})},Po=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Lo(t.progress)}%`;Te(e.ref.main,n),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},vu=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Lo(t.progress)}%`;Te(e.ref.main,n),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},wu=({root:e})=>{Te(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Tu=({root:e})=>{Te(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Ou=({root:e})=>{Te(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},_a=({root:e})=>{Te(e.ref.main,""),Te(e.ref.sub,"")},Tn=({root:e,action:t})=>{Te(e.ref.main,t.status.main),Te(e.ref.sub,t.status.sub)},Du=De({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Ne({DID_LOAD_ITEM:_a,DID_REVERT_ITEM_PROCESSING:_a,DID_REQUEST_ITEM_PROCESSING:wu,DID_ABORT_ITEM_PROCESSING:Tu,DID_COMPLETE_ITEM_PROCESSING:Ou,DID_UPDATE_ITEM_PROCESS_PROGRESS:vu,DID_UPDATE_ITEM_LOAD_PROGRESS:Po,DID_THROW_ITEM_LOAD_ERROR:Tn,DID_THROW_ITEM_INVALID:Tn,DID_THROW_ITEM_PROCESSING_ERROR:Tn,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Tn,DID_THROW_ITEM_REMOVE_ERROR:Tn}),didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},create:Iu,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),di={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ui=[];ye(di,e=>{ui.push(e)});const Ye=e=>{if(fi(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ru=e=>e.ref.buttonAbortItemLoad.rect.element.width,zn=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Su=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Au=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Lu=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),fi=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Pu={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Au},processProgressIndicator:{opacity:0,align:Lu},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},ya={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ye},status:{translateX:Ye}},Kr={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},tn={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Ye},status:{translateX:Ye,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Ye},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:fi},info:{translateX:Ye},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:fi},buttonRemoveItem:{opacity:1},info:{translateX:Ye},status:{opacity:1,translateX:Ye}},DID_LOAD_ITEM:ya,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Ye},status:{translateX:Ye}},DID_START_ITEM_PROCESSING:Kr,DID_REQUEST_ITEM_PROCESSING:Kr,DID_UPDATE_ITEM_PROCESS_PROGRESS:Kr,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Ye}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ye},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:ya},Mu=De({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Cu=({root:e,props:t})=>{const n=Object.keys(di).reduce((_,v)=>(_[v]={...di[v]},_),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),l=e.query("GET_ALLOW_REMOVE"),c=e.query("GET_ALLOW_PROCESS"),u=e.query("GET_INSTANT_UPLOAD"),f=e.query("IS_ASYNC"),h=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let p;f?c&&!i?p=_=>!/RevertItemProcessing/.test(_):!c&&i?p=_=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(_):!c&&!i&&(p=_=>!/Process/.test(_)):p=_=>!/Process/.test(_);const m=p?ui.filter(p):ui.concat();if(u&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),f&&!i){const _=tn.DID_COMPLETE_ITEM_PROCESSING;_.info.translateX=Su,_.info.translateY=zn,_.status.translateY=zn,_.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(f&&!c&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(_=>{tn[_].status.translateY=zn}),tn.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ru),h&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const _=tn.DID_COMPLETE_ITEM_PROCESSING;_.info.translateX=Ye,_.status.translateY=zn,_.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}l||(n.RemoveItem.disabled=!0),ye(n,(_,v)=>{const T=e.createChildView(So,{label:e.query(v.label),icon:e.query(v.icon),opacity:0});m.includes(_)&&e.appendChildView(T),v.disabled&&(T.element.setAttribute("disabled","disabled"),T.element.setAttribute("hidden","hidden")),T.element.dataset.align=e.query(`GET_STYLE_${v.align}`),T.element.classList.add(v.className),T.on("click",D=>{D.stopPropagation(),!v.disabled&&e.dispatch(v.action,{query:r})}),e.ref[`button${_}`]=T}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Mu)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(bu,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Du,{id:r}));const I=e.appendChildView(e.createChildView(ga,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));I.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=I;const b=e.appendChildView(e.createChildView(ga,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));b.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=b,e.ref.activeStyles=[]},xu=({root:e,actions:t,props:n})=>{ku({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>tn[i.type]);if(r){e.ref.activeStyles=[];const i=tn[r.type];ye(Pu,(l,c)=>{const u=e.ref[l];ye(c,(f,h)=>{const p=i[l]&&typeof i[l][f]<"u"?i[l][f]:h;e.ref.activeStyles.push({control:u,key:f,value:p})})})}e.ref.activeStyles.forEach(({control:i,key:l,value:c})=>{i[l]=typeof c=="function"?c(e):c})},ku=Ne({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Nu=De({create:Cu,write:xu,didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},name:"file"}),Gu=({root:e,props:t})=>{e.ref.fileName=_t("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Nu,{id:t.id})),e.ref.data=!1},Fu=({root:e,props:t})=>{Te(e.ref.fileName,Ri(e.query("GET_ITEM_NAME",t.id)))},Bu=De({create:Gu,ignoreRect:!0,write:Ne({DID_LOAD_ITEM:Fu}),didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),ba={type:"spring",damping:.6,mass:7},Vu=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:ba},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:ba},styles:["translateY"]}}].forEach(n=>{Uu(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},Uu=(e,t,n)=>{const r=De({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},ju=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=po(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},Mo=De({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:ju,create:Vu,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Hu=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},Ia={type:"spring",stiffness:.75,damping:.45,mass:10},va="spring",wa={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Wu=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Bu,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Mo,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const l={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const c=Hu(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:c});const u=h=>{if(!h.isPrimary)return;h.stopPropagation(),h.preventDefault(),t.dragOffset={x:h.pageX-l.x,y:h.pageY-l.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:c})},f=h=>{!h.isPrimary||(document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",f),t.dragOffset={x:h.pageX-l.x,y:h.pageY-l.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:c}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",u),document.addEventListener("pointerup",f)};e.element.addEventListener("pointerdown",n)},$u=Ne({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Yu=Ne({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(c=>/^DID_/.test(c.type)).reverse().find(c=>wa[c.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=wa[n.currentState]||"");const l=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");l?r||(e.height=e.rect.element.width*l):($u({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),qu=De({create:Wu,write:Yu,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:va,scaleY:va,translateX:Ia,translateY:Ia,opacity:{type:"tween",duration:150}}}});var Si=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Ai=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let l=null;if(i===0||n.top<t[0].rect.element.top)return-1;const u=t[0].rect.element,f=u.marginLeft+u.marginRight,h=u.width+f,p=Si(r,h);if(p===1){for(let b=0;b<i;b++){const _=t[b],v=_.rect.outer.top+_.rect.element.height*.5;if(n.top<v)return b}return i}const m=u.marginTop+u.marginBottom,I=u.height+m;for(let b=0;b<i;b++){const _=b%p,v=Math.floor(b/p),T=_*h,D=v*I,y=D-u.marginTop,E=T+h,O=D+I+u.marginBottom;if(n.top<O&&n.top>y){if(n.left<E)return b;b!==i-1?l=b:l=null}}return l!==null?l:i},Xn={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},zu=({root:e})=>{Oe(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Xu=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const l=Date.now();let c=l,u=1;if(i!==Qe.NONE){u=0;const f=e.query("GET_ITEM_INSERT_INTERVAL"),h=l-e.ref.lastItemSpanwDate;c=h<f?l+(f-h):l}e.ref.lastItemSpanwDate=c,e.appendChildView(e.createChildView(qu,{spawnDate:c,id:n,opacity:u,interactionMethod:i}),r)},Ta=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Ku(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Ku=(e,t,n,r,i)=>{e.interactionMethod===Qe.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Qe.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Qe.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Qe.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Zu=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);!r||(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},Zr=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,Qu=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Ju=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),l=e.childViews.find(T=>T.id===n),c=e.childViews.length,u=r.getItemIndex(i);if(!l)return;const f={x:l.dragOrigin.x+l.dragOffset.x+l.dragCenter.x,y:l.dragOrigin.y+l.dragOffset.y+l.dragCenter.y},h=Zr(l),p=Qu(l);let m=Math.floor(e.rect.outer.width/p);m>c&&(m=c);const I=Math.floor(c/m+1);Xn.setHeight=h*I,Xn.setWidth=p*m;var b={y:Math.floor(f.y/h),x:Math.floor(f.x/p),getGridIndex:function(){return f.y>Xn.getHeight||f.y<0||f.x>Xn.getWidth||f.x<0?u:this.y*m+this.x},getColIndex:function(){const D=e.query("GET_ACTIVE_ITEMS"),y=e.childViews.filter(V=>V.rect.element.height),E=D.map(V=>y.find(j=>j.id===V.id)),O=E.findIndex(V=>V===l),A=Zr(l),N=E.length;let $=N,P=0,k=0,X=0;for(let V=0;V<N;V++)if(P=Zr(E[V]),X=k,k=X+P,f.y<k){if(O>V){if(f.y<X+A){$=V;break}continue}$=V;break}return $}};const _=m>1?b.getGridIndex():b.getColIndex();e.dispatch("MOVE_ITEM",{query:l,index:_});const v=r.getIndex();if(v===void 0||v!==_){if(r.setIndex(_),v===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:u,target:_})}},ef=Ne({DID_ADD_ITEM:Xu,DID_REMOVE_ITEM:Zu,DID_DRAG_ITEM:Ju}),tf=({root:e,props:t,actions:n,shouldOptimize:r})=>{ef({root:e,props:t,actions:n});const{dragCoordinates:i}=t,l=e.rect.element.width,c=e.childViews.filter(E=>E.rect.element.height),u=e.query("GET_ACTIVE_ITEMS").map(E=>c.find(O=>O.id===E.id)).filter(E=>E),f=i?Ai(e,u,i):null,h=e.ref.addIndex||null;e.ref.addIndex=null;let p=0,m=0,I=0;if(u.length===0)return;const b=u[0].rect.element,_=b.marginTop+b.marginBottom,v=b.marginLeft+b.marginRight,T=b.width+v,D=b.height+_,y=Si(l,T);if(y===1){let E=0,O=0;u.forEach((A,N)=>{if(f){let k=N-f;k===-2?O=-_*.25:k===-1?O=-_*.75:k===0?O=_*.75:k===1?O=_*.25:O=0}r&&(A.translateX=null,A.translateY=null),A.markedForRemoval||Ta(A,0,E+O);let P=(A.rect.element.height+_)*(A.markedForRemoval?A.opacity:1);E+=P})}else{let E=0,O=0;u.forEach((A,N)=>{N===f&&(p=1),N===h&&(I+=1),A.markedForRemoval&&A.opacity<.5&&(m-=1);const $=N+I+p+m,P=$%y,k=Math.floor($/y),X=P*T,V=k*D,j=Math.sign(X-E),ne=Math.sign(V-O);E=X,O=V,!A.markedForRemoval&&(r&&(A.translateX=null,A.translateY=null),Ta(A,X,V,j,ne))})}},nf=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),rf=De({create:zu,write:tf,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:nf,mixins:{apis:["dragCoordinates"]}}),sf=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(rf)),t.dragCoordinates=null,t.overflowing=!1},af=({root:e,props:t,action:n})=>{!e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")||(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},of=({props:e})=>{e.dragCoordinates=null},lf=Ne({DID_DRAG:af,DID_END_DRAG:of}),cf=({root:e,props:t,actions:n})=>{if(lf({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},df=De({create:sf,write:cf,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),at=(e,t,n,r="")=>{n?Oe(e,t,r):e.removeAttribute(t)},uf=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=_t("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},ff=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,Oe(e.element,"name",e.query("GET_NAME")),Oe(e.element,"aria-controls",`filepond--assistant-${t.id}`),Oe(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Co({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),xo({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),ko({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),pi({root:e}),No({root:e,action:{value:e.query("GET_REQUIRED")}}),Go({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),uf(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},Co=({root:e,action:t})=>{!e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")||at(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},xo=({root:e,action:t})=>{at(e.element,"multiple",t.value)},ko=({root:e,action:t})=>{at(e.element,"webkitdirectory",t.value)},pi=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;at(e.element,"disabled",r)},No=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&at(e.element,"required",!0):at(e.element,"required",!1)},Go=({root:e,action:t})=>{at(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Oa=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(at(t,"required",!1),at(t,"name",!1)):(at(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&at(t,"required",!0))},pf=({root:e})=>{!e.query("GET_CHECK_VALIDITY")||e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},hf=De({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:ff,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Ne({DID_LOAD_ITEM:Oa,DID_REMOVE_ITEM:Oa,DID_THROW_ITEM_INVALID:pf,DID_SET_DISABLED:pi,DID_SET_ALLOW_BROWSE:pi,DID_SET_ALLOW_DIRECTORIES_ONLY:ko,DID_SET_ALLOW_MULTIPLE:xo,DID_SET_ACCEPTED_FILE_TYPES:Co,DID_SET_CAPTURE_METHOD:Go,DID_SET_REQUIRED:No})}),Da={ENTER:13,SPACE:32},gf=({root:e,props:t})=>{const n=_t("label");Oe(n,"for",`filepond--browser-${t.id}`),Oe(n,"id",`filepond--drop-label-${t.id}`),Oe(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Da.ENTER||r.keyCode===Da.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Fo(n,t.caption),e.appendChild(n),e.ref.label=n},Fo=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&Oe(n,"tabindex","0"),t},mf=De({name:"drop-label",ignoreRect:!0,create:gf,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Ne({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Fo(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Ef=De({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),_f=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(Ef,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},yf=({root:e,action:t})=>{if(!e.ref.blob){_f({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},bf=({root:e})=>{!e.ref.blob||(e.ref.blob.opacity=0)},If=({root:e})=>{!e.ref.blob||(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},vf=({root:e,props:t,actions:n})=>{wf({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},wf=Ne({DID_DRAG:yf,DID_DROP:If,DID_END_DRAG:bf}),Tf=De({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:vf}),Bo=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},Of=({root:e})=>e.ref.fields={},br=(e,t)=>e.ref.fields[t],Li=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{!e.ref.fields[t.id]||e.element.appendChild(e.ref.fields[t.id])})},Ra=({root:e})=>Li(e),Df=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===Re.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),l=_t("input");l.type=i?"file":"hidden",l.name=e.query("GET_NAME"),l.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=l,Li(e)},Rf=({root:e,action:t})=>{const n=br(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Bo(n,[r.file])},Sf=({root:e,action:t})=>{!e.query("SHOULD_UPDATE_FILE_INPUT")||setTimeout(()=>{const n=br(e,t.id);!n||Bo(n,[t.file])},0)},Af=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Lf=({root:e,action:t})=>{const n=br(e,t.id);!n||(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},Pf=({root:e,action:t})=>{const n=br(e,t.id);!n||(t.value===null?n.removeAttribute("value"):n.value=t.value,Li(e))},Mf=Ne({DID_SET_DISABLED:Af,DID_ADD_ITEM:Df,DID_LOAD_ITEM:Rf,DID_REMOVE_ITEM:Lf,DID_DEFINE_VALUE:Pf,DID_PREPARE_OUTPUT:Sf,DID_REORDER_ITEMS:Ra,DID_SORT_ITEMS:Ra}),Cf=De({tag:"fieldset",name:"data",create:Of,write:Mf,ignoreRect:!0}),xf=e=>"getRootNode"in e?e.getRootNode():document,kf=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Nf=["css","csv","html","txt"],Gf={zip:"zip|compressed",epub:"application/epub+zip"},Vo=(e="")=>(e=e.toLowerCase(),kf.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Nf.includes(e)?"text/"+e:Gf[e]||""),Pi=e=>new Promise((t,n)=>{const r=$f(e);if(r.length&&!Ff(e))return t(r);Bf(e).then(t)}),Ff=e=>e.files?e.files.length>0:!1,Bf=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>Vf(i)).map(i=>Uf(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const l=[];i.forEach(c=>{l.push.apply(l,c)}),t(l.filter(c=>c).map(c=>(c._relativePath||(c._relativePath=c.webkitRelativePath),c)))}).catch(console.error)}),Vf=e=>{if(Uo(e)){const t=Mi(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},Uf=e=>new Promise((t,n)=>{if(Wf(e)){jf(Mi(e)).then(t).catch(n);return}t([e.getAsFile()])}),jf=e=>new Promise((t,n)=>{const r=[];let i=0,l=0;const c=()=>{l===0&&i===0&&t(r)},u=f=>{i++;const h=f.createReader(),p=()=>{h.readEntries(m=>{if(m.length===0){i--,c();return}m.forEach(I=>{I.isDirectory?u(I):(l++,I.file(b=>{const _=Hf(b);I.fullPath&&(_._relativePath=I.fullPath),r.push(_),l--,c()}))}),p()},n)};p()};u(e)}),Hf=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=Vo(yr(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},Wf=e=>Uo(e)&&(Mi(e)||{}).isDirectory,Uo=e=>"webkitGetAsEntry"in e,Mi=e=>e.webkitGetAsEntry(),$f=e=>{let t=[];try{if(t=qf(e),t.length)return t;t=Yf(e)}catch{}return t},Yf=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},qf=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},fr=[],Nt=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),zf=(e,t,n)=>{const r=Xf(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},Xf=e=>{const t=fr.find(r=>r.element===e);if(t)return t;const n=Kf(e);return fr.push(n),n},Kf=e=>{const t=[],n={dragenter:Qf,dragover:Jf,dragleave:tp,drop:ep},r={};ye(n,(l,c)=>{r[l]=c(e,t),e.addEventListener(l,r[l],!1)});const i={element:e,addListener:l=>(t.push(l),()=>{t.splice(t.indexOf(l),1),t.length===0&&(fr.splice(fr.indexOf(i),1),ye(n,c=>{e.removeEventListener(c,r[c],!1)}))})};return i},Zf=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Ci=(e,t)=>{const n=xf(t),r=Zf(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let jo=null;const Kn=(e,t)=>{try{e.dropEffect=t}catch{}},Qf=(e,t)=>n=>{n.preventDefault(),jo=n.target,t.forEach(r=>{const{element:i,onenter:l}=r;Ci(n,i)&&(r.state="enter",l(Nt(n)))})},Jf=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Pi(r).then(i=>{let l=!1;t.some(c=>{const{filterElement:u,element:f,onenter:h,onexit:p,ondrag:m,allowdrop:I}=c;Kn(r,"copy");const b=I(i);if(!b){Kn(r,"none");return}if(Ci(n,f)){if(l=!0,c.state===null){c.state="enter",h(Nt(n));return}if(c.state="over",u&&!b){Kn(r,"none");return}m(Nt(n))}else u&&!l&&Kn(r,"none"),c.state&&(c.state=null,p(Nt(n)))})})},ep=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Pi(r).then(i=>{t.forEach(l=>{const{filterElement:c,element:u,ondrop:f,onexit:h,allowdrop:p}=l;if(l.state=null,!(c&&!Ci(n,u))){if(!p(i))return h(Nt(n));f(Nt(n),i)}})})},tp=(e,t)=>n=>{jo===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(Nt(n))})},np=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:l=p=>p}=n,c=zf(e,r?document.documentElement:e,i);let u="",f="";c.allowdrop=p=>t(l(p)),c.ondrop=(p,m)=>{const I=l(m);if(!t(I)){h.ondragend(p);return}f="drag-drop",h.onload(I,p)},c.ondrag=p=>{h.ondrag(p)},c.onenter=p=>{f="drag-over",h.ondragstart(p)},c.onexit=p=>{f="drag-exit",h.ondragend(p)};const h={updateHopperState:()=>{u!==f&&(e.dataset.hopperState=f,u=f)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{c.destroy()}};return h};let hi=!1;const on=[],Ho=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Pi(e.clipboardData).then(n=>{!n.length||on.forEach(r=>r(n))})},rp=e=>{on.includes(e)||(on.push(e),!hi&&(hi=!0,document.addEventListener("paste",Ho)))},ip=e=>{Ti(on,on.indexOf(e)),on.length===0&&(document.removeEventListener("paste",Ho),hi=!1)},sp=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{ip(e)},onload:()=>{}};return rp(e),t},ap=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,Oe(e.element,"role","status"),Oe(e.element,"aria-live","polite"),Oe(e.element,"aria-relevant","additions")};let Sa=null,Aa=null;const Qr=[],Ir=(e,t)=>{e.element.textContent=t},op=e=>{e.element.textContent=""},Wo=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Ir(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Aa),Aa=setTimeout(()=>{op(e)},1500)},$o=e=>e.element.parentNode.contains(document.activeElement),lp=({root:e,action:t})=>{if(!$o(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);Qr.push(n.filename),clearTimeout(Sa),Sa=setTimeout(()=>{Wo(e,Qr.join(", "),e.query("GET_LABEL_FILE_ADDED")),Qr.length=0},750)},cp=({root:e,action:t})=>{if(!$o(e))return;const n=t.item;Wo(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},dp=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Ir(e,`${r} ${i}`)},La=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Ir(e,`${r} ${i}`)},Zn=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Ir(e,`${t.status.main} ${r} ${t.status.sub}`)},up=De({create:ap,ignoreRect:!0,ignoreRectUpdate:!0,write:Ne({DID_LOAD_ITEM:lp,DID_REMOVE_ITEM:cp,DID_COMPLETE_ITEM_PROCESSING:dp,DID_ABORT_ITEM_PROCESSING:La,DID_REVERT_ITEM_PROCESSING:La,DID_THROW_ITEM_REMOVE_ERROR:Zn,DID_THROW_ITEM_LOAD_ERROR:Zn,DID_THROW_ITEM_INVALID:Zn,DID_THROW_ITEM_PROCESSING_ERROR:Zn}),tag:"span",name:"assistant"}),Yo=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),qo=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...l)=>{clearTimeout(i);const c=Date.now()-r,u=()=>{r=Date.now(),e(...l)};c<t?n||(i=setTimeout(u,t-c)):u()}},fp=1e6,pr=e=>e.preventDefault(),pp=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(f=>f.length).forEach(f=>{e.element.classList.add(f)}),e.ref.label=e.appendChildView(e.createChildView(mf,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(df,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Mo,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(up,{...t})),e.ref.data=e.appendChildView(e.createChildView(Cf,{...t})),e.ref.measure=_t("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(f=>!Et(f.value)).map(({name:f,value:h})=>{e.element.dataset[f]=h}),e.ref.widthPrevious=null,e.ref.widthUpdated=qo(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,l="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&l&&!i&&(e.element.addEventListener("touchmove",pr,{passive:!1}),e.element.addEventListener("gesturestart",pr));const c=e.query("GET_CREDITS");if(c.length===2){const f=document.createElement("a");f.className="filepond--credits",f.setAttribute("aria-hidden","true"),f.href=c[0],f.tabindex=-1,f.target="_blank",f.rel="noopener noreferrer",f.textContent=c[1],e.element.appendChild(f),e.ref.credits=f}},hp=({root:e,props:t,actions:n})=>{if(yp({root:e,props:t,actions:n}),n.filter(N=>/^DID_SET_STYLE_/.test(N.type)).filter(N=>!Et(N.data.value)).map(({type:N,data:$})=>{const P=Yo(N.substring(8).toLowerCase(),"_");e.element.dataset[P]=$.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=Ep(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:l,list:c,panel:u}=e.ref;i&&i.updateHopperState();const f=e.query("GET_PANEL_ASPECT_RATIO"),h=e.query("GET_ALLOW_MULTIPLE"),p=e.query("GET_TOTAL_ITEMS"),m=h?e.query("GET_MAX_FILES")||fp:1,I=p===m,b=n.find(N=>N.type==="DID_ADD_ITEM");if(I&&b){const N=b.data.interactionMethod;l.opacity=0,h?l.translateY=-40:N===Qe.API?l.translateX=40:N===Qe.BROWSE?l.translateY=40:l.translateY=30}else I||(l.opacity=1,l.translateX=0,l.translateY=0);const _=gp(e),v=mp(e),T=l.rect.element.height,D=!h||I?0:T,y=I?c.rect.element.marginTop:0,E=p===0?0:c.rect.element.marginBottom,O=D+y+v.visual+E,A=D+y+v.bounds+E;if(c.translateY=Math.max(0,D-c.rect.element.marginTop)-_.top,f){const N=e.rect.element.width,$=N*f;f!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=f,e.ref.updateHistory=[]);const P=e.ref.updateHistory;P.push(N);const k=2;if(P.length>k*2){const V=P.length,j=V-10;let ne=0;for(let x=V;x>=j;x--)if(P[x]===P[x-2]&&ne++,ne>=k)return}u.scalable=!1,u.height=$;const X=$-D-(E-_.bottom)-(I?y:0);v.visual>X?c.overflow=X:c.overflow=null,e.height=$}else if(r.fixedHeight){u.scalable=!1;const N=r.fixedHeight-D-(E-_.bottom)-(I?y:0);v.visual>N?c.overflow=N:c.overflow=null}else if(r.cappedHeight){const N=O>=r.cappedHeight,$=Math.min(r.cappedHeight,O);u.scalable=!0,u.height=N?$:$-_.top-_.bottom;const P=$-D-(E-_.bottom)-(I?y:0);O>r.cappedHeight&&v.visual>P?c.overflow=P:c.overflow=null,e.height=Math.min(r.cappedHeight,A-_.top-_.bottom)}else{const N=p>0?_.top+_.bottom:0;u.scalable=!0,u.height=Math.max(T,O-N),e.height=Math.max(T,A-N)}e.ref.credits&&u.heightCurrent&&(e.ref.credits.style.transform=`translateY(${u.heightCurrent}px)`)},gp=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},mp=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],l=i.childViews.filter(y=>y.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(y=>l.find(E=>E.id===y.id)).filter(y=>y);if(c.length===0)return{visual:t,bounds:n};const u=i.rect.element.width,f=Ai(i,c,r.dragCoordinates),h=c[0].rect.element,p=h.marginTop+h.marginBottom,m=h.marginLeft+h.marginRight,I=h.width+m,b=h.height+p,_=typeof f<"u"&&f>=0?1:0,v=c.find(y=>y.markedForRemoval&&y.opacity<.45)?-1:0,T=c.length+_+v,D=Si(u,I);return D===1?c.forEach(y=>{const E=y.rect.element.height+p;n+=E,t+=E*y.opacity}):(n=Math.ceil(T/D)*b,t=n),{visual:t,bounds:n}},Ep=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},xi=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let l=e.query("GET_MAX_FILES");const c=t.length;return!r&&c>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:we("warning",0,"Max files")}),!0):(l=r?l:1,!r&&n?!1:un(l)&&i+c>l?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:we("warning",0,"Max files")}),!0):!1)},_p=(e,t,n)=>{const r=e.childViews[0];return Ai(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Pa=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=np(e.element,l=>{const c=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?l.every(f=>Bt("ALLOW_HOPPER_ITEM",f,{query:e.query}).every(h=>h===!0)&&c(f)):!0},{filterItems:l=>{const c=e.query("GET_IGNORED_FILES");return l.filter(u=>dn(u)?!c.includes(u.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(l,c)=>{const f=e.ref.list.childViews[0].childViews.filter(p=>p.rect.element.height),h=e.query("GET_ACTIVE_ITEMS").map(p=>f.find(m=>m.id===p.id)).filter(p=>p);it("ADD_ITEMS",l,{dispatch:e.dispatch}).then(p=>{if(xi(e,p))return!1;e.dispatch("ADD_ITEMS",{items:p,index:_p(e.ref.list,h,c),interactionMethod:Qe.DROP})}),e.dispatch("DID_DROP",{position:c}),e.dispatch("DID_END_DRAG",{position:c})},i.ondragstart=l=>{e.dispatch("DID_START_DRAG",{position:l})},i.ondrag=qo(l=>{e.dispatch("DID_DRAG",{position:l})}),i.ondragend=l=>{e.dispatch("DID_END_DRAG",{position:l})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Tf))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Ma=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(hf,{...t,onload:l=>{it("ADD_ITEMS",l,{dispatch:e.dispatch}).then(c=>{if(xi(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:-1,interactionMethod:Qe.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Ca=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=sp(),e.ref.paster.onload=i=>{it("ADD_ITEMS",i,{dispatch:e.dispatch}).then(l=>{if(xi(e,l))return!1;e.dispatch("ADD_ITEMS",{items:l,index:-1,interactionMethod:Qe.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},yp=Ne({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Ma(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Pa(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Ca(e)},DID_SET_DISABLED:({root:e,props:t})=>{Pa(e),Ca(e),Ma(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),bp=De({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:pp,write:hp,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",pr),e.element.removeEventListener("gesturestart",pr)},mixins:{styles:["height"]}}),Ip=(e={})=>{let t=null;const n=ur(),r=Nc(Id(n),[Vd,Td(n)],[uu,wd(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let l=null,c=!1,u=!1,f=null,h=null;const p=()=>{c||(c=!0),clearTimeout(l),l=setTimeout(()=>{c=!1,f=null,h=null,u&&(u=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",p);const m=bp(r,{id:wi()});let I=!1,b=!1;const _={_read:()=>{c&&(h=window.innerWidth,f||(f=h),!u&&h!==f&&(r.dispatch("DID_START_RESIZE"),u=!0)),b&&I&&(I=m.element.offsetParent===null),!I&&(m._read(),b=m.rect.element.hidden)},_write:S=>{const C=r.processActionQueue().filter(H=>!/^SET_/.test(H.type));I&&!C.length||(y(C),I=m._write(S,C,u),Rd(r.query("GET_ITEMS")),I&&r.processDispatchQueue())}},v=S=>C=>{const H={type:S};if(!C)return H;if(C.hasOwnProperty("error")&&(H.error=C.error?{...C.error}:null),C.status&&(H.status={...C.status}),C.file&&(H.output=C.file),C.source)H.file=C.source;else if(C.item||C.id){const W=C.item?C.item:r.query("GET_ITEM",C.id);H.file=W?je(W):null}return C.items&&(H.items=C.items.map(je)),/progress/.test(S)&&(H.progress=C.progress),C.hasOwnProperty("origin")&&C.hasOwnProperty("target")&&(H.origin=C.origin,H.target=C.target),H},T={DID_DESTROY:v("destroy"),DID_INIT:v("init"),DID_THROW_MAX_FILES:v("warning"),DID_INIT_ITEM:v("initfile"),DID_START_ITEM_LOAD:v("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:v("addfileprogress"),DID_LOAD_ITEM:v("addfile"),DID_THROW_ITEM_INVALID:[v("error"),v("addfile")],DID_THROW_ITEM_LOAD_ERROR:[v("error"),v("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[v("error"),v("removefile")],DID_PREPARE_OUTPUT:v("preparefile"),DID_START_ITEM_PROCESSING:v("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:v("processfileprogress"),DID_ABORT_ITEM_PROCESSING:v("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:v("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:v("processfiles"),DID_REVERT_ITEM_PROCESSING:v("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[v("error"),v("processfile")],DID_REMOVE_ITEM:v("removefile"),DID_UPDATE_ITEMS:v("updatefiles"),DID_ACTIVATE_ITEM:v("activatefile"),DID_REORDER_ITEMS:v("reorderfiles")},D=S=>{const C={pond:te,...S};delete C.type,m.element.dispatchEvent(new CustomEvent(`FilePond:${S.type}`,{detail:C,bubbles:!0,cancelable:!0,composed:!0}));const H=[];S.hasOwnProperty("error")&&H.push(S.error),S.hasOwnProperty("file")&&H.push(S.file);const W=["type","error","file"];Object.keys(S).filter(U=>!W.includes(U)).forEach(U=>H.push(S[U])),te.fire(S.type,...H);const Z=r.query(`GET_ON${S.type.toUpperCase()}`);Z&&Z(...H)},y=S=>{!S.length||S.filter(C=>T[C.type]).forEach(C=>{const H=T[C.type];(Array.isArray(H)?H:[H]).forEach(W=>{C.type==="DID_INIT_ITEM"?D(W(C.data)):setTimeout(()=>{D(W(C.data))},0)})})},E=S=>r.dispatch("SET_OPTIONS",{options:S}),O=S=>r.query("GET_ACTIVE_ITEM",S),A=S=>new Promise((C,H)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:S,success:W=>{C(W)},failure:W=>{H(W)}})}),N=(S,C={})=>new Promise((H,W)=>{k([{source:S,options:C}],{index:C.index}).then(Z=>H(Z&&Z[0])).catch(W)}),$=S=>S.file&&S.id,P=(S,C)=>(typeof S=="object"&&!$(S)&&!C&&(C=S,S=void 0),r.dispatch("REMOVE_ITEM",{...C,query:S}),r.query("GET_ACTIVE_ITEM",S)===null),k=(...S)=>new Promise((C,H)=>{const W=[],Z={};if(gr(S[0]))W.push.apply(W,S[0]),Object.assign(Z,S[1]||{});else{const U=S[S.length-1];typeof U=="object"&&!(U instanceof Blob)&&Object.assign(Z,S.pop()),W.push(...S)}r.dispatch("ADD_ITEMS",{items:W,index:Z.index,interactionMethod:Qe.API,success:C,failure:H})}),X=()=>r.query("GET_ACTIVE_ITEMS"),V=S=>new Promise((C,H)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:S,success:W=>{C(W)},failure:W=>{H(W)}})}),j=(...S)=>{const C=Array.isArray(S[0])?S[0]:S,H=C.length?C:X();return Promise.all(H.map(A))},ne=(...S)=>{const C=Array.isArray(S[0])?S[0]:S;if(!C.length){const H=X().filter(W=>!(W.status===J.IDLE&&W.origin===Re.LOCAL)&&W.status!==J.PROCESSING&&W.status!==J.PROCESSING_COMPLETE&&W.status!==J.PROCESSING_REVERT_ERROR);return Promise.all(H.map(V))}return Promise.all(C.map(V))},x=(...S)=>{const C=Array.isArray(S[0])?S[0]:S;let H;typeof C[C.length-1]=="object"?H=C.pop():Array.isArray(S[0])&&(H=S[1]);const W=X();return C.length?C.map(U=>Pt(U)?W[U]?W[U].id:null:U).filter(U=>U).map(U=>P(U,H)):Promise.all(W.map(U=>P(U,H)))},te={..._r(),..._,...vd(r,n),setOptions:E,addFile:N,addFiles:k,getFile:O,processFile:V,prepareFile:A,removeFile:P,moveFile:(S,C)=>r.dispatch("MOVE_ITEM",{query:S,index:C}),getFiles:X,processFiles:ne,removeFiles:x,prepareFiles:j,sort:S=>r.dispatch("SORT",{compare:S}),browse:()=>{var S=m.element.querySelector("input[type=file]");S&&S.click()},destroy:()=>{te.fire("destroy",m.element),r.dispatch("ABORT_ALL"),m._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:S=>na(m.element,S),insertAfter:S=>ra(m.element,S),appendTo:S=>S.appendChild(m.element),replaceElement:S=>{na(m.element,S),S.parentNode.removeChild(S),t=S},restoreElement:()=>{!t||(ra(t,m.element),m.element.parentNode.removeChild(m.element),t=null)},isAttachedTo:S=>m.element===S||t===S,element:{get:()=>m.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Ot(te)},zo=(e={})=>{const t={};return ye(ur(),(r,i)=>{t[r]=i[0]}),Ip({...t,...e})},vp=e=>e.charAt(0).toLowerCase()+e.slice(1),wp=e=>Yo(e.replace(/^data-/,"")),Xo=(e,t)=>{ye(t,(n,r)=>{ye(e,(i,l)=>{const c=new RegExp(n);if(!c.test(i)||(delete e[i],r===!1))return;if(ke(r)){e[r]=l;return}const f=r.group;Se(r)&&!e[f]&&(e[f]={}),e[f][vp(i.replace(c,""))]=l}),r.mapping&&Xo(e[r.group],r.mapping)})},Tp=(e,t={})=>{const n=[];ye(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,l)=>{const c=Oe(e,l.name);return i[wp(l.name)]=c===l.name?!0:c,i},{});return Xo(r,t),r},Op=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Bt("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=Tp(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(c=>{Se(i[c])?(Se(r[c])||(r[c]={}),Object.assign(r[c],i[c])):r[c]=i[c]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(c=>({source:c.value,options:{type:c.dataset.type}})));const l=zo(r);return e.files&&Array.from(e.files).forEach(c=>{l.addFile(c)}),l.replaceElement(e),l},Dp=(...e)=>kc(e[0])?Op(...e):zo(...e),Rp=["fire","_read","_write"],xa=e=>{const t={};return Eo(e,t,Rp),t},Sp=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),Ap=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,l)=>{},post:(i,l,c)=>{const u=wi();r.onmessage=f=>{f.data.id===u&&l(f.data.message)},r.postMessage({id:u,message:i},c)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},Lp=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Ko=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Pp=e=>Ko(e,e.name),ka=[],Mp=e=>{if(ka.includes(e))return;ka.push(e);const t=e({addFilter:Ad,utils:{Type:L,forin:ye,isString:ke,isFile:dn,toNaturalFileSize:Ao,replaceInString:Sp,getExtensionFromFilename:yr,getFilenameWithoutExtension:Do,guesstimateMimeType:Vo,getFileFromBlob:cn,getFilenameFromURL:Cn,createRoute:Ne,createWorker:Ap,createView:De,createItemAPI:je,loadImage:Lp,copyFile:Pp,renameFile:Ko,createBlob:wo,applyFilterChain:it,text:Te,getNumericAspectRatioFromString:bo},views:{fileActionButton:So}});Ld(t.options)},Cp=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",xp=()=>"Promise"in window,kp=()=>"slice"in Blob.prototype,Np=()=>"URL"in window&&"createObjectURL"in window.URL,Gp=()=>"visibilityState"in document,Fp=()=>"performance"in window,Bp=()=>"supports"in(window.CSS||{}),Vp=()=>/MSIE|Trident/.test(window.navigator.userAgent),gi=(()=>{const e=uo()&&!Cp()&&Gp()&&xp()&&kp()&&Np()&&Fp()&&(Bp()||Vp());return()=>e})(),wt={apps:[]},Up="filepond",Vt=()=>{};let hr={},nr=Vt,Jr=Vt,Na=Vt,Ga=Vt,mi=Vt,Fa=Vt,Ba=Vt;if(gi()){od(()=>{wt.apps.forEach(n=>n._read())},n=>{wt.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:gi,create:nr,destroy:Jr,parse:Na,find:Ga,registerPlugin:mi,setOptions:Ba}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>ye(ur(),(n,r)=>{hr[n]=r[1]});hr={},t(),nr=(...n)=>{const r=Dp(...n);return r.on("destroy",Jr),wt.apps.push(r),xa(r)},Jr=n=>{const r=wt.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(wt.apps.splice(r,1)[0].restoreElement(),!0):!1},Na=n=>Array.from(n.querySelectorAll(`.${Up}`)).filter(l=>!wt.apps.find(c=>c.isAttachedTo(l))).map(l=>nr(l)),Ga=n=>{const r=wt.apps.find(i=>i.isAttachedTo(n));return r?xa(r):null},mi=(...n)=>{n.forEach(Mp),t()},Fa=()=>{const n={};return ye(ur(),(r,i)=>{n[r]=i[0]}),n},Ba=n=>(Se(n)&&(wt.apps.forEach(r=>{r.setOptions(n)}),Pd(n)),Fa())}/*!
 * vue-filepond v7.0.3
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const jp=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],Hp=gi(),Wp=e=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[e],Qn={},ei=[],ti=[];let $p={};const Yp=(...e)=>{mi(...e),ei.length=0;for(const t in hr){if(/^on/.test(t)){ei.push(t);continue}let n=[String,Wp(hr[t])];t=="labelFileProcessingError"&&n.push(Function),Qn[t]={type:n,default:void 0}}return{name:"FilePond",props:Qn,render(){const t=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((n,[r,i])=>(i!==void 0&&(n[r]=i),n),{});return Ns("div",{class:{"filepond--wrapper":!0}},[Ns("input",t)])},created(){this.watchers=Object.keys(Qn).map(t=>this.$watch(t,n=>{this._pond[t]=n}))},mounted(){if(!Hp)return;this._element=this.$el.querySelector("input");const t=ei.reduce((r,i)=>(r[i]=(...l)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(i.substr(2),...l)},r),{}),n={};Object.keys(Qn).forEach(r=>{this[r]!==void 0&&(n[r]=this[r])}),this._pond=nr(this._element,Object.assign({},$p,t,n)),Object.keys(this._pond).filter(r=>!jp.includes(r)).forEach(r=>{this[r]=this._pond[r]}),ti.push(this._pond)},beforeUnmount(){const{detached:t}=this.$options;if(!this.$el.offsetParent){t.call(this);return}const n=(i,l)=>{const u=((i[0]||{}).removedNodes||[])[0];!u||!u.contains(this.$el)||(l.disconnect(),t.call(this))};new MutationObserver(n).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(n=>n()),!this._pond)return;this._pond.destroy();const t=ti.indexOf(this._pond);t>=0&&ti.splice(t,1),this._pond=null}}};/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Zo=({addFilter:e,utils:t})=>{const{Type:n,isString:r,replaceInString:i,guesstimateMimeType:l,getExtensionFromFilename:c,getFilenameFromURL:u}=t,f=(b,_)=>{const v=(/^[^/]+/.exec(b)||[]).pop(),T=_.slice(0,-2);return v===T},h=(b,_)=>b.some(v=>/\*$/.test(v)?f(_,v):v===_),p=b=>{let _="";if(r(b)){const v=u(b),T=c(v);T&&(_=l(T))}else _=b.type;return _},m=(b,_,v)=>{if(_.length===0)return!0;const T=p(b);return v?new Promise((D,y)=>{v(b,T).then(E=>{h(_,E)?D():y()}).catch(y)}):h(_,T)},I=b=>_=>b[_]===null?!1:b[_]||_;return e("SET_ATTRIBUTE_TO_OPTION_MAP",b=>Object.assign(b,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(b,{query:_})=>_("GET_ALLOW_FILE_TYPE_VALIDATION")?m(b,_("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(b,{query:_})=>new Promise((v,T)=>{if(!_("GET_ALLOW_FILE_TYPE_VALIDATION")){v(b);return}const D=_("GET_ACCEPTED_FILE_TYPES"),y=_("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),E=m(b,D,y),O=()=>{const A=D.map(I(_("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter($=>$!==!1),N=A.filter(function($,P){return A.indexOf($)===P});T({status:{main:_("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:i(_("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:N.join(", "),allButLastType:N.slice(0,-1).join(", "),lastType:N[A.length-1]})}})};if(typeof E=="boolean")return E?v(b):O();E.then(()=>{v(b)}).catch(O)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},qp=typeof window<"u"&&typeof window.document<"u";qp&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Zo}));/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Qo=({addFilter:e,utils:t})=>{const{Type:n,replaceInString:r,toNaturalFileSize:i}=t;return e("ALLOW_HOPPER_ITEM",(l,{query:c})=>{if(!c("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const u=c("GET_MAX_FILE_SIZE");if(u!==null&&l.size>u)return!1;const f=c("GET_MIN_FILE_SIZE");return!(f!==null&&l.size<f)}),e("LOAD_FILE",(l,{query:c})=>new Promise((u,f)=>{if(!c("GET_ALLOW_FILE_SIZE_VALIDATION"))return u(l);const h=c("GET_FILE_VALIDATE_SIZE_FILTER");if(h&&!h(l))return u(l);const p=c("GET_MAX_FILE_SIZE");if(p!==null&&l.size>p){f({status:{main:c("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:r(c("GET_LABEL_MAX_FILE_SIZE"),{filesize:i(p,".",c("GET_FILE_SIZE_BASE"),c("GET_FILE_SIZE_LABELS",c))})}});return}const m=c("GET_MIN_FILE_SIZE");if(m!==null&&l.size<m){f({status:{main:c("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:r(c("GET_LABEL_MIN_FILE_SIZE"),{filesize:i(m,".",c("GET_FILE_SIZE_BASE"),c("GET_FILE_SIZE_LABELS",c))})}});return}const I=c("GET_MAX_TOTAL_FILE_SIZE");if(I!==null&&c("GET_ACTIVE_ITEMS").reduce((_,v)=>_+v.fileSize,0)>I){f({status:{main:c("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:r(c("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:i(I,".",c("GET_FILE_SIZE_BASE"),c("GET_FILE_SIZE_LABELS",c))})}});return}u(l)})),{options:{allowFileSizeValidation:[!0,n.BOOLEAN],maxFileSize:[null,n.INT],minFileSize:[null,n.INT],maxTotalFileSize:[null,n.INT],fileValidateSizeFilter:[null,n.FUNCTION],labelMinFileSizeExceeded:["File is too small",n.STRING],labelMinFileSize:["Minimum file size is {filesize}",n.STRING],labelMaxFileSizeExceeded:["File is too large",n.STRING],labelMaxFileSize:["Maximum file size is {filesize}",n.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",n.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",n.STRING]}}},zp=typeof window<"u"&&typeof window.document<"u";zp&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Qo}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Xp=e=>/^image/.test(e.type),Va=(e,t)=>Mn(e.x*t,e.y*t),Ua=(e,t)=>Mn(e.x+t.x,e.y+t.y),Kp=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Mn(e.x/t,e.y/t)},Jn=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),l=Mn(e.x-n.x,e.y-n.y);return Mn(n.x+r*l.x-i*l.y,n.y+i*l.x+r*l.y)},Mn=(e=0,t=0)=>({x:e,y:t}),He=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},Zp=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",l=e.borderColor||e.lineColor||"transparent",c=He(e.borderWidth||e.lineWidth,t,n),u=e.lineCap||"round",f=e.lineJoin||"round",h=typeof r=="string"?"":r.map(m=>He(m,t,n)).join(","),p=e.opacity||1;return{"stroke-linecap":u,"stroke-linejoin":f,"stroke-width":c||0,"stroke-dasharray":h,stroke:l,fill:i,opacity:p}},Ze=e=>e!=null,Qp=(e,t,n=1)=>{let r=He(e.x,t,n,"width")||He(e.left,t,n,"width"),i=He(e.y,t,n,"height")||He(e.top,t,n,"height"),l=He(e.width,t,n,"width"),c=He(e.height,t,n,"height"),u=He(e.right,t,n,"width"),f=He(e.bottom,t,n,"height");return Ze(i)||(Ze(c)&&Ze(f)?i=t.height-c-f:i=f),Ze(r)||(Ze(l)&&Ze(u)?r=t.width-l-u:r=u),Ze(l)||(Ze(r)&&Ze(u)?l=t.width-r-u:l=0),Ze(c)||(Ze(i)&&Ze(f)?c=t.height-i-f:c=0),{x:r||0,y:i||0,width:l||0,height:c||0}},Jp=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),ut=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),eh="http://www.w3.org/2000/svg",nn=(e,t)=>{const n=document.createElementNS(eh,e);return t&&ut(n,t),n},th=e=>ut(e,{...e.rect,...e.styles}),nh=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return ut(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},rh={contain:"xMidYMid meet",cover:"xMidYMid slice"},ih=(e,t)=>{ut(e,{...e.rect,...e.styles,preserveAspectRatio:rh[t.fit]||"none"})},sh={left:"start",center:"middle",right:"end"},ah=(e,t,n,r)=>{const i=He(t.fontSize,n,r),l=t.fontFamily||"sans-serif",c=t.fontWeight||"normal",u=sh[t.textAlign]||"start";ut(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":c,"font-size":i,"font-family":l,"text-anchor":u}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},oh=(e,t,n,r)=>{ut(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],l=e.childNodes[1],c=e.childNodes[2],u=e.rect,f={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(ut(i,{x1:u.x,y1:u.y,x2:f.x,y2:f.y}),!t.lineDecoration)return;l.style.display="none",c.style.display="none";const h=Kp({x:f.x-u.x,y:f.y-u.y}),p=He(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const m=Va(h,p),I=Ua(u,m),b=Jn(u,2,I),_=Jn(u,-2,I);ut(l,{style:"display:block;",d:`M${b.x},${b.y} L${u.x},${u.y} L${_.x},${_.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const m=Va(h,-p),I=Ua(f,m),b=Jn(f,2,I),_=Jn(f,-2,I);ut(c,{style:"display:block;",d:`M${b.x},${b.y} L${f.x},${f.y} L${_.x},${_.y}`})}},lh=(e,t,n,r)=>{ut(e,{...e.styles,fill:"none",d:Jp(t.points.map(i=>({x:He(i.x,n,r,"width"),y:He(i.y,n,r,"height")})))})},er=e=>t=>nn(e,{id:t.id}),ch=e=>{const t=nn("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},dh=e=>{const t=nn("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=nn("line");t.appendChild(n);const r=nn("path");t.appendChild(r);const i=nn("path");return t.appendChild(i),t},uh={image:ch,rect:er("rect"),ellipse:er("ellipse"),text:er("text"),path:er("path"),line:dh},fh={rect:th,ellipse:nh,image:ih,text:ah,path:lh,line:oh},ph=(e,t)=>uh[e](t),hh=(e,t,n,r,i)=>{t!=="path"&&(e.rect=Qp(n,r,i)),e.styles=Zp(n,r,i),fh[t](e,n,r,i)},gh=["x","y","left","top","right","bottom","width","height"],mh=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Eh=e=>{const[t,n]=e,r=n.points?{}:gh.reduce((i,l)=>(i[l]=mh(n[l]),i),{});return[t,{zIndex:0,...n,...r}]},_h=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,yh=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:i,markup:l}=n,c=n.width,u=n.height;let f=r.width,h=r.height;if(i){const{size:b}=i;let _=b&&b.width,v=b&&b.height;const T=i.mode,D=i.upscale;_&&!v&&(v=_),v&&!_&&(_=v);const y=f<_&&h<v;if(!y||y&&D){let E=_/f,O=v/h;if(T==="force")f=_,h=v;else{let A;T==="cover"?A=Math.max(E,O):T==="contain"&&(A=Math.min(E,O)),f=f*A,h=h*A}}}const p={width:c,height:u};t.element.setAttribute("width",p.width),t.element.setAttribute("height",p.height);const m=Math.min(c/f,u/h);t.element.innerHTML="";const I=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");l.filter(I).map(Eh).sort(_h).forEach(b=>{const[_,v]=b,T=ph(_,v);hh(T,_,v,p,m),t.element.appendChild(T)})}}),Ln=(e,t)=>({x:e,y:t}),bh=(e,t)=>e.x*t.x+e.y*t.y,ja=(e,t)=>Ln(e.x-t.x,e.y-t.y),Ih=(e,t)=>bh(ja(e,t),ja(e,t)),Ha=(e,t)=>Math.sqrt(Ih(e,t)),Wa=(e,t)=>{const n=e,r=1.5707963267948966,i=t,l=1.5707963267948966-t,c=Math.sin(r),u=Math.sin(i),f=Math.sin(l),h=Math.cos(l),p=n/c,m=p*u,I=p*f;return Ln(h*m,h*I)},vh=(e,t)=>{const n=e.width,r=e.height,i=Wa(n,t),l=Wa(r,t),c=Ln(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),u=Ln(e.x+e.width+Math.abs(l.y),e.y+Math.abs(l.x)),f=Ln(e.x-Math.abs(l.y),e.y+e.height-Math.abs(l.x));return{width:Ha(c,u),height:Ha(c,f)}},wh=(e,t,n=1)=>{const r=e.height/e.width;let i=1,l=t,c=1,u=r;u>l&&(u=l,c=u/r);const f=Math.max(i/c,l/u),h=e.width/(n*f*c),p=h*t;return{width:h,height:p}},Jo=(e,t,n,r)=>{const i=r.x>.5?1-r.x:r.x,l=r.y>.5?1-r.y:r.y,c=i*2*e.width,u=l*2*e.height,f=vh(t,n);return Math.max(f.width/c,f.height/u)},el=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,l=(e.height-r)*.5;return{x:i,y:l,width:n,height:r}},Th=(e,t={})=>{let{zoom:n,rotation:r,center:i,aspectRatio:l}=t;l||(l=e.height/e.width);const c=wh(e,l,n),u={x:c.width*.5,y:c.height*.5},f={x:0,y:0,width:c.width,height:c.height,center:u},h=typeof t.scaleToFit>"u"||t.scaleToFit,p=Jo(e,el(f,l),r,h?i:{x:.5,y:.5}),m=n*p;return{widthFloat:c.width/m,heightFloat:c.height/m,width:Math.round(c.width/m),height:Math.round(c.height/m)}},dt={type:"spring",stiffness:.5,damping:.45,mass:10},Oh=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Dh=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:dt,originY:dt,scaleX:dt,scaleY:dt,translateX:dt,translateY:dt,rotateZ:dt}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Oh(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:i}=t.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),Rh=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){!n.background||(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Dh(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(yh(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{!t.ref.markup||(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:i,markup:l,resize:c,dirty:u,width:f,height:h}=n;t.ref.image.crop=i;const p={x:0,y:0,width:f,height:h,center:{x:f*.5,y:h*.5}},m={width:t.ref.image.width,height:t.ref.image.height},I={x:i.center.x*m.width,y:i.center.y*m.height},b={x:p.center.x-m.width*i.center.x,y:p.center.y-m.height*i.center.y},_=Math.PI*2+i.rotation%(Math.PI*2),v=i.aspectRatio||m.height/m.width,T=typeof i.scaleToFit>"u"||i.scaleToFit,D=Jo(m,el(p,v),_,T?i.center:{x:.5,y:.5}),y=i.zoom*D;l&&l.length?(t.ref.createMarkup(),t.ref.markup.width=f,t.ref.markup.height=h,t.ref.markup.resize=c,t.ref.markup.dirty=u,t.ref.markup.markup=l,t.ref.markup.crop=Th(m,i)):t.ref.markup&&t.ref.destroyMarkup();const E=t.ref.image;if(r){E.originX=null,E.originY=null,E.translateX=null,E.translateY=null,E.rotateZ=null,E.scaleX=null,E.scaleY=null;return}E.originX=I.x,E.originY=I.y,E.translateX=b.x,E.translateY=b.y,E.rotateZ=_,E.scaleX=y,E.scaleY=y}}),Sh=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:dt,scaleY:dt,translateY:dt,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(Rh(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:i}=t.ref,{image:l,crop:c,markup:u,resize:f,dirty:h}=n;if(i.crop=c,i.markup=u,i.resize=f,i.dirty=h,i.opacity=r?0:1,r||t.rect.element.hidden)return;const p=l.height/l.width;let m=c.aspectRatio||p;const I=t.rect.inner.width,b=t.rect.inner.height;let _=t.query("GET_IMAGE_PREVIEW_HEIGHT");const v=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),T=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),D=t.query("GET_PANEL_ASPECT_RATIO"),y=t.query("GET_ALLOW_MULTIPLE");D&&!y&&(_=I*D,m=D);let E=_!==null?_:Math.max(v,Math.min(I*m,T)),O=E/m;O>I&&(O=I,E=O*m),E>b&&(E=b,O=b/m),i.width=O,i.height=E}});let Ah=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,$a=0;const Lh=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=Ah;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+i+"#")}$a++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,$a)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Ph=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},Mh=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,i=r.length,l=n[0],c=n[1],u=n[2],f=n[3],h=n[4],p=n[5],m=n[6],I=n[7],b=n[8],_=n[9],v=n[10],T=n[11],D=n[12],y=n[13],E=n[14],O=n[15],A=n[16],N=n[17],$=n[18],P=n[19];let k=0,X=0,V=0,j=0,ne=0;for(;k<i;k+=4)X=r[k]/255,V=r[k+1]/255,j=r[k+2]/255,ne=r[k+3]/255,r[k]=Math.max(0,Math.min((X*l+V*c+j*u+ne*f+h)*255,255)),r[k+1]=Math.max(0,Math.min((X*p+V*m+j*I+ne*b+_)*255,255)),r[k+2]=Math.max(0,Math.min((X*v+V*T+j*D+ne*y+E)*255,255)),r[k+3]=Math.max(0,Math.min((X*O+V*A+j*N+ne*$+P)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Ch=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,t(r,i)},n.src=e},xh={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},kh=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,xh[r](t,n))},Nh=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const l=i.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),kh(l,t,n,r),l.drawImage(e,0,0,t,n),i},tl=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Gh=10,Fh=10,Bh=e=>{const t=Math.min(Gh/e.width,Fh/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),l=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,i,l);let c=null;try{c=r.getImageData(0,0,i,l).data}catch{return null}const u=c.length;let f=0,h=0,p=0,m=0;for(;m<u;m+=4)f+=c[m]*c[m],h+=c[m+1]*c[m+1],p+=c[m+2]*c[m+2];return f=ni(f,u),h=ni(h,u),p=ni(p,u),{r:f,g:h,b:p}},ni=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Vh=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Uh=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},jh=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Hh=e=>{const t=Lh(e),n=Sh(e),{createWorker:r}=e.utils,i=(y,E,O)=>new Promise(A=>{y.ref.imageData||(y.ref.imageData=O.getContext("2d").getImageData(0,0,O.width,O.height));const N=Uh(y.ref.imageData);if(!E||E.length!==20)return O.getContext("2d").putImageData(N,0,0),A();const $=r(Mh);$.post({imageData:N,colorMatrix:E},P=>{O.getContext("2d").putImageData(P,0,0),$.terminate(),A()},[N.data.buffer])}),l=(y,E)=>{y.removeChildView(E),E.image.width=1,E.image.height=1,E._destroy()},c=({root:y})=>{const E=y.ref.images.shift();return E.opacity=0,E.translateY=-15,y.ref.imageViewBin.push(E),E},u=({root:y,props:E,image:O})=>{const A=E.id,N=y.query("GET_ITEM",{id:A});if(!N)return;const $=N.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},P=y.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let k,X,V=!1;y.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(k=N.getMetadata("markup")||[],X=N.getMetadata("resize"),V=!0);const j=y.appendChildView(y.createChildView(n,{id:A,image:O,crop:$,resize:X,markup:k,dirty:V,background:P,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),y.childViews.length);y.ref.images.push(j),j.opacity=1,j.scaleX=1,j.scaleY=1,j.translateY=0,setTimeout(()=>{y.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:A})},250)},f=({root:y,props:E})=>{const O=y.query("GET_ITEM",{id:E.id});if(!O)return;const A=y.ref.images[y.ref.images.length-1];A.crop=O.getMetadata("crop"),A.background=y.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),y.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(A.dirty=!0,A.resize=O.getMetadata("resize"),A.markup=O.getMetadata("markup"))},h=({root:y,props:E,action:O})=>{if(!/crop|filter|markup|resize/.test(O.change.key)||!y.ref.images.length)return;const A=y.query("GET_ITEM",{id:E.id});if(!!A){if(/filter/.test(O.change.key)){const N=y.ref.images[y.ref.images.length-1];i(y,O.change.value,N.image);return}if(/crop|markup|resize/.test(O.change.key)){const N=A.getMetadata("crop"),$=y.ref.images[y.ref.images.length-1];if(N&&N.aspectRatio&&$.crop&&$.crop.aspectRatio&&Math.abs(N.aspectRatio-$.crop.aspectRatio)>1e-5){const P=c({root:y});u({root:y,props:E,image:Vh(P.image)})}else f({root:y,props:E})}}},p=y=>{const O=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(O?parseInt(O[1]):null)<=58?!1:"createImageBitmap"in window&&tl(y)},m=({root:y,props:E})=>{const{id:O}=E,A=y.query("GET_ITEM",O);if(!A)return;const N=URL.createObjectURL(A.file);Ch(N,($,P)=>{y.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:O,width:$,height:P})})},I=({root:y,props:E})=>{const{id:O}=E,A=y.query("GET_ITEM",O);if(!A)return;const N=URL.createObjectURL(A.file),$=()=>{jh(N).then(P)},P=k=>{URL.revokeObjectURL(N);const V=(A.getMetadata("exif")||{}).orientation||-1;let{width:j,height:ne}=k;if(!j||!ne)return;V>=5&&V<=8&&([j,ne]=[ne,j]);const x=Math.max(1,window.devicePixelRatio*.75),S=y.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*x,C=ne/j,H=y.rect.element.width,W=y.rect.element.height;let Z=H,U=Z*C;C>1?(Z=Math.min(j,H*S),U=Z*C):(U=Math.min(ne,W*S),Z=U/C);const z=Nh(k,Z,U,V),Ge=()=>{const ee=y.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Bh(data):null;A.setMetadata("color",ee,!0),"close"in k&&k.close(),y.ref.overlayShadow.opacity=1,u({root:y,props:E,image:z})},ie=A.getMetadata("filter");ie?i(y,ie,z).then(Ge):Ge()};if(p(A.file)){const k=r(Ph);k.post({file:A.file},X=>{if(k.terminate(),!X){$();return}P(X)})}else $()},b=({root:y})=>{const E=y.ref.images[y.ref.images.length-1];E.translateY=0,E.scaleX=1,E.scaleY=1,E.opacity=1},_=({root:y})=>{y.ref.overlayShadow.opacity=1,y.ref.overlayError.opacity=0,y.ref.overlaySuccess.opacity=0},v=({root:y})=>{y.ref.overlayShadow.opacity=.25,y.ref.overlayError.opacity=1},T=({root:y})=>{y.ref.overlayShadow.opacity=.25,y.ref.overlaySuccess.opacity=1},D=({root:y})=>{y.ref.images=[],y.ref.imageData=null,y.ref.imageViewBin=[],y.ref.overlayShadow=y.appendChildView(y.createChildView(t,{opacity:0,status:"idle"})),y.ref.overlaySuccess=y.appendChildView(y.createChildView(t,{opacity:0,status:"success"})),y.ref.overlayError=y.appendChildView(y.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:D,styles:["height"],apis:["height"],destroy:({root:y})=>{y.ref.images.forEach(E=>{E.image.width=1,E.image.height=1})},didWriteView:({root:y})=>{y.ref.images.forEach(E=>{E.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:b,DID_IMAGE_PREVIEW_CONTAINER_CREATE:m,DID_FINISH_CALCULATE_PREVIEWSIZE:I,DID_UPDATE_ITEM_METADATA:h,DID_THROW_ITEM_LOAD_ERROR:v,DID_THROW_ITEM_PROCESSING_ERROR:v,DID_THROW_ITEM_INVALID:v,DID_COMPLETE_ITEM_PROCESSING:T,DID_START_ITEM_PROCESSING:_,DID_REVERT_ITEM_PROCESSING:_},({root:y})=>{const E=y.ref.imageViewBin.filter(O=>O.opacity===0);y.ref.imageViewBin=y.ref.imageViewBin.filter(O=>O.opacity>0),E.forEach(O=>l(y,O)),E.length=0})})},nl=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:i,isFile:l}=n,c=Hh(e);return t("CREATE_VIEW",u=>{const{is:f,view:h,query:p}=u;if(!f("file")||!p("GET_ALLOW_IMAGE_PREVIEW"))return;const m=({root:T,props:D})=>{const{id:y}=D,E=p("GET_ITEM",y);if(!E||!l(E.file)||E.archived)return;const O=E.file;if(!Xp(O)||!p("GET_IMAGE_PREVIEW_FILTER_ITEM")(E))return;const A="createImageBitmap"in(window||{}),N=p("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!A&&N&&O.size>N)return;T.ref.imagePreview=h.appendChildView(h.createChildView(c,{id:y}));const $=T.query("GET_IMAGE_PREVIEW_HEIGHT");$&&T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:$});const P=!A&&O.size>p("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");T.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:y},P)},I=(T,D)=>{if(!T.ref.imagePreview)return;let{id:y}=D;const E=T.query("GET_ITEM",{id:y});if(!E)return;const O=T.query("GET_PANEL_ASPECT_RATIO"),A=T.query("GET_ITEM_PANEL_ASPECT_RATIO"),N=T.query("GET_IMAGE_PREVIEW_HEIGHT");if(O||A||N)return;let{imageWidth:$,imageHeight:P}=T.ref;if(!$||!P)return;const k=T.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),X=T.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),j=(E.getMetadata("exif")||{}).orientation||-1;if(j>=5&&j<=8&&([$,P]=[P,$]),!tl(E.file)||T.query("GET_IMAGE_PREVIEW_UPSCALE")){const H=2048/$;$*=H,P*=H}const ne=P/$,x=(E.getMetadata("crop")||{}).aspectRatio||ne;let te=Math.max(k,Math.min(P,X));const S=T.rect.element.width,C=Math.min(S*x,te);T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:C})},b=({root:T})=>{T.ref.shouldRescale=!0},_=({root:T,action:D})=>{D.change.key==="crop"&&(T.ref.shouldRescale=!0)},v=({root:T,action:D})=>{T.ref.imageWidth=D.width,T.ref.imageHeight=D.height,T.ref.shouldRescale=!0,T.ref.shouldDrawPreview=!0,T.dispatch("KICK")};h.registerWriter(i({DID_RESIZE_ROOT:b,DID_STOP_RESIZE:b,DID_LOAD_ITEM:m,DID_IMAGE_PREVIEW_CALCULATE_SIZE:v,DID_UPDATE_ITEM_METADATA:_},({root:T,props:D})=>{!T.ref.imagePreview||T.rect.element.hidden||(T.ref.shouldRescale&&(I(T,D),T.ref.shouldRescale=!1),T.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{T.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:D.id})})}),T.ref.shouldDrawPreview=!1))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},Wh=typeof window<"u"&&typeof window.document<"u";Wh&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:nl}));const $h={class:"mb-4 section-title"},Yh={key:0,class:"p-2 mb-4 rounded-md theme-color hover:theme-colored"},qh={class:"mb-2 section-title"},zh={key:0,class:"flex flex-row gap-2"},Xh=["href"],Kh={key:0,class:"w-1/4"},Zh=["src"],Qh={class:"flex flex-col gap-2 w-3/4"},Jh={class:"title"},eg=["innerHTML"],tg={key:0,class:"p-2 mb-2 w-full text-white bg-red-500 rounded-md"},ng={class:"alert-success"},rg={class:"italic"},ig={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},sg={class:"input-block"},ag=["name"],og=["placeholder"],lg={class:"-mt-2 input-block"},cg={class:"input-block"},dg={class:"input-block"},ug={class:"flex flex-row gap-x-2 input-block"},fg={class:"relative w-full"},pg={class:"flex absolute left-1 top-3.5 items-center pl-2 pointer-events-none"},hg=["placeholder"],gg={key:0,class:"input-block"},mg={for:"is-original-character-toggle",class:"inline-flex relative items-center cursor-pointer"},Eg=["checked"],_g=Y("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),yg={class:"ml-2"},bg={key:1,class:"input-block"},Ig={for:"is-allow-redraw-toggle",class:"inline-flex relative items-center cursor-pointer"},vg=["checked"],wg=Y("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),Tg={class:"ml-2"},Og={key:2,class:"input-block"},Dg={for:"is-redraw-in-your-style-toggle",class:"inline-flex relative items-center cursor-pointer"},Rg=["checked"],Sg=Y("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),Ag={class:"ml-2"},Lg={class:"input-block"},Pg={for:"explicit-mode-toggle",class:"inline-flex relative items-center cursor-pointer"},Mg=["checked"],Cg=Y("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),xg={class:"ml-2"},kg={class:"flex flex-row justify-between md:justify-end"},Ng={class:"flex flex-row"},Gg={__name:"ArtworkForm",setup(e){const t=Yp(Zo,Qo,nl),n=Ul(),{t:r}=Ya(),l=jl().public.apiUrl,c=Hl(),{$router:u}=qa(),{oApiConfiguration:f,fetchOptions:h}=za(),p=Ql(f,h());Xa(()=>u.query,()=>{I()});const m=Wl(()=>c.query.redrawWorkId);$l(()=>{n.loggedIn||u.push("/"),_(),m.value?Z():H.value=!1;const U=Yl().add(1,"day").format("DD/MM/yyyy"),z=document.getElementById("publishDate");new xc(z,{autohide:!0,todayHighlight:!0,format:"dd/mm/yyyy",minDate:U})});const I=()=>{T.value=[],O.value=[],E.value.isExplicit=!1},b=ec(f,h()),_=async()=>{if(!m.value){let z=1;n.i502p00r0?z=await b.getSetting("artwork_max_uploads_pro"):z=await b.getSetting("artwork_max_uploads"),$.value=z}const U=await b.getSetting("artwork_max_file_size");N.value=U,v.value="<div class='text-xxs'><div>Pick or drop up to "+$.value+" files here</div><div>PNG, JPG up to "+N.value+"MB</div></div>"},v=ve(""),T=ve([]),D=U=>{T.value=U.map(z=>z.file)},y="artwork-form",E=ve({title:"",description:"",tags:"",isExplicit:!1,isOriginalCharacter:!1,isAllowRedraw:!1,isredrawInMyStyle:!1,publishDate:null,publishTime:null}),O=ve([]),A=ve({showFileTooBig:!1}),N=ve(5),$=ve(1),P=ve(!1),k=ve(!1),X=ve(!1),V=ve(""),j=async()=>{Kl().validate(y,r),te();const U=document.getElementById("publishDate");let z=null;if(U.value){const ee=U.value.split("/"),Q=`${ee[2]}-${ee[1]}-${ee[0]}`;let he="00:00:00";E.value.publishTime&&(he=`${E.value.publishTime}:00`),z=`${Q} ${he}`}const Ge=[];O.value.forEach(ee=>{Ge.push(ee.value)});const ie=new FormData;ie.append("title",E.value.title),ie.append("description",E.value.description),ie.append("tags",Ge.toString()),ie.append("is_explicit",E.value.isExplicit?1:0),ie.append("is_original_character",E.value.isOriginalCharacter?1:0),ie.append("allow_redraw",E.value.isAllowRedraw?1:0),ie.append("redraw_in_your_style",E.value.isredrawInMyStyle?1:0),m.value&&ie.append("redraw_of",m.value),ie.append("scheduled_post",["",null].includes(z)?null:zl().formatDateToApi(z));for(let ee=0;ee<T.value.length;ee++)if(T.value[ee].size>N.value*1e6&&(A.value.showFileTooBig=!0),!A.value.showFileTooBig){const Q=T.value[ee];ie.append("files[]",Q),ie.append("file_order[]",ee)}A.value.showFileTooBig||(P.value=!0,k.value=!1,await Xl.post(l+"/artworks/post",ie,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n.a4ht0jen}`}}).then(({data:ee})=>{if(ee.success){const Q=ee.data.id;k.value=!0,setTimeout(()=>{u.push("/a/"+Q)},1e3)}else x()}).catch(ee=>{x()})),P.value=!1},ne=ve(!1),x=()=>{ne.value=!0},te=()=>{ne.value=!1,P.value=!1,k.value=!1,X.value=!1,V.value=""},S=ve({}),C=ve(!0),H=ve(!0),W=ve([]),Z=async()=>{C.value=!0,H.value=!0;const[U,z]=await p.getWorkById(m.value);z||(S.value=U,U.artwork_has_tags.length&&(U.artwork_has_tags.forEach(({artwork_tags:ie})=>{W.value.push({key:ie.id,value:ie.tag})}),O.value=W.value)),C.value=!1,H.value=!1};return(U,z)=>{const Ge=Jl,ie=ql("tags-input");return $e(),ct("div",null,[Y("div",$h,Ee(G(m)?U.$t("artworks.add.form.titleRedraw"):U.$t("artworks.add.form.title")),1),G(m)?($e(),ct("div",Yh,[Y("div",null,[Y("div",qh,Ee(U.$t("artworks.originalArtwork")),1),G(C)?($e(),ct("div",zh,[Me(Dn),Jt(" "+Ee(U.$t("artworks.redrawOriginalLoading")),1)])):($e(),ct("a",{key:1,href:"/a/"+G(m),target:"_blank",class:"flex flex-row gap-2"},[G(S).artwork_assets?($e(),ct("div",Kh,[Y("img",{preload:"",loading:"lazy",class:"w-full rounded-md",src:U.artworkThumb(G(S).artwork_assets[0].bucket,G(S).artwork_assets[0].filename,"thumbnail",!1),onError:z[0]||(z[0]=(...ee)=>U.imageLoadError&&U.imageLoadError(...ee))},null,40,Zh)])):vt("",!0),Y("div",Qh,[Y("span",Jh,Ee(G(S).title),1),Y("p",{innerHTML:G(S).description.length>300?G(S).description.slice(0,300)+"..":G(S).description},null,8,eg)])],8,Xh))])])):vt("",!0),Y("div",null,[G(X)?($e(),ct("div",tg,Ee(G(V)),1)):vt("",!0),Pe(Y("div",ng,[Jt(Ee(U.$t("artworks.add.form.uploadSuccess"))+" ",1),Y("span",rg,Ee(U.$t("artworks.add.form.successRedirect")),1)],512),[[xe,G(k)]]),Pe(Y("div",ig,[Me(Dn,{class:"mr-1"}),Jt(" "+Ee(U.$t("artworks.add.form.uploading")),1)],512),[[xe,G(P)]]),Pe(Y("div",{class:"alert-danger"},Ee(U.$t("artworks.add.form.uploadFailure")),513),[[xe,G(ne)]])]),Y("form",{id:y,enctype:"multipart/form-data",onSubmit:z[10]||(z[10]=Za(ee=>j(),["prevent"]))},[Y("div",sg,[Y("n-validate",{for:"title",name:U.$t("title"),class:"input-block"},[Pe(Y("input",{"onUpdate:modelValue":z[1]||(z[1]=ee=>G(E).title=ee),type:"text",rules:"required|max:100",class:ht(["form-input input",{"pointer-events-none cursor-not-allowed":G(P)||G(k)}]),placeholder:U.$t("title")},null,10,og),[[Gs,G(E).title]])],8,ag)]),Y("div",lg,[Me(G(Qa.exports.VueEditor),{modelValue:G(E).description,"onUpdate:modelValue":z[2]||(z[2]=ee=>G(E).description=ee),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:ht([{"pointer-events-none cursor-not-allowed":G(P)||G(k)}]),placeholder:U.$t("description")},null,8,["modelValue","class","placeholder"])]),Y("div",cg,[Pe(Y("div",{class:"p-2 mb-2 text-xs text-white bg-red-400 rounded-md shadow-md"},Ee(U.$t("artworks.add.form.fileTooBig"))+" "+Ee(G(N))+"MB. ",513),[[xe,G(A).showFileTooBig]]),Me(Ge,null,{default:ri(()=>[Me(G(t),{ref:"pond",name:"files[]","label-idle":G(v),"accepted-file-types":"image/jpeg, image/png","allow-multiple":"true","allow-drop":"true","allow-reorder":"true","allow-process":"true",credits:"false","max-files":G(m)?1:G($),"max-file-size":G(N),"instant-upload":"false",class:ht(["bg-transparent rounded-sm",{"pointer-events-none cursor-not-allowed":G(P)||G(k)}]),onUpdatefiles:D},null,8,["label-idle","max-files","max-file-size","class"])]),_:1})]),Y("div",dg,[Me(Ge,null,{default:ri(()=>[G(H)?vt("",!0):($e(),ii(ie,{key:0,modelValue:G(O),"onUpdate:modelValue":z[3]||(z[3]=ee=>Ka(O)?O.value=ee:null),placeholder:U.$t("tagsInputPlaceholder"),typeahead:!0,"typeahead-style":"dropdown","typeahead-activation-threshold":2,"typeahead-show-on-focus":!0,"typeahead-hide-discard":!0,"typeahead-url":G(l)+"/artworks/tags/search?keyword=:search","add-tags-on-comma":!0,class:ht({"pointer-events-none cursor-not-allowed":G(P)||G(k)}),"initial-value":!G(m)&&!G(H)?[]:G(W)},null,8,["modelValue","placeholder","typeahead-url","class","initial-value"]))]),_:1})]),Pe(Y("div",ug,[Y("div",fg,[Y("div",pg,[Me(On,{name:"i-bi-calendar3-event"})]),Y("input",{id:"publishDate",type:"text",class:"block pl-10 w-full form-input input",placeholder:U.$t("artworks.add.form.publishDate"),autocomplete:"off"},null,8,hg)]),Pe(Y("input",{"onUpdate:modelValue":z[4]||(z[4]=ee=>G(E).publishTime=ee),type:"time",class:"form-input input"},null,512),[[Gs,G(E).publishTime]])],512),[[xe,!G(m)]]),G(m)?vt("",!0):($e(),ct("div",gg,[Y("label",mg,[Y("input",{onClick:z[5]||(z[5]=ee=>G(E).isOriginalCharacter=!G(E).isOriginalCharacter),id:"is-original-character-toggle",type:"checkbox",class:"sr-only peer",checked:G(E).isOriginalCharacter},null,8,Eg),_g,Y("span",yg,Ee(U.$t("artworks.originalCharacter")),1)])])),G(m)?vt("",!0):($e(),ct("div",bg,[Y("label",Ig,[Y("input",{onClick:z[6]||(z[6]=ee=>G(E).isAllowRedraw=!G(E).isAllowRedraw),id:"is-allow-redraw-toggle",type:"checkbox",class:"sr-only peer",checked:G(E).isAllowRedraw},null,8,vg),wg,Y("span",Tg,Ee(U.$t("artworks.add.form.allowRedraw")),1)])])),G(m)?($e(),ct("div",Og,[Y("label",Dg,[Y("input",{onClick:z[7]||(z[7]=ee=>G(E).isredrawInMyStyle=!G(E).isredrawInMyStyle),id:"is-redraw-in-your-style-toggle",type:"checkbox",class:"sr-only peer",checked:G(E).isredrawInMyStyle},null,8,Rg),Sg,Y("span",Ag,Ee(U.$t("artworks.add.form.redrawInMyStyle")),1)])])):vt("",!0),Y("div",Lg,[Y("label",Pg,[Y("input",{onClick:z[8]||(z[8]=ee=>G(E).isExplicit=!G(E).isExplicit),id:"explicit-mode-toggle",type:"checkbox",class:"sr-only peer",checked:G(E).isExplicit},null,8,Mg),Cg,Y("span",xg,Ee(U.$t("explicitContent")),1)])]),Y("div",kg,[Y("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:z[9]||(z[9]=ee=>I())},"Reset"),Y("button",{type:"submit",class:ht(["float-right w-full md:w-auto",{"pointer-events-none cursor-not-allowed":G(P)||G(k)},G(E).title&&G(T).length>0?"primary-button":"disabled-button"])},[Y("div",Ng,[G(P)?($e(),ii(Dn,{key:0,class:"mr-2"})):vt("",!0),Jt(" "+Ee(G(P)?U.$t("artworks.add.form.uploadingButton"):U.$t("artworks.add.form.post").toUpperCase()),1)])],2)])],32)])}}},Fg={class:"mb-4 section-title"},Bg={class:"alert-success"},Vg={class:"italic"},Ug={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},jg={class:"flex flex-row justify-between md:justify-end"},Hg={__name:"FeedForm",setup(e){const{oApiConfiguration:t,fetchOptions:n}=za(),r=tc(t,n()),{$router:i}=qa(),l=ve(""),c=ve(!1),u=ve(!1),f=ve(!1),h=async()=>{c.value=!0;const[p,m,I]=await r.postFeed({text:l.value});if(p){c.value=!1,u.value=!0;const b=m.id;setTimeout(()=>{i.push(`/feed/${b}`)},1e3)}else f.value=!0,c.value=!1;c.value=!1};return(p,m)=>($e(),ct("div",null,[Y("div",Fg,Ee(p.$t("feeds.form.title")),1),Pe(Y("div",Bg,[Jt(Ee(p.$t("feeds.form.posted"))+" ",1),Y("span",Vg,Ee(p.$t("feeds.form.successRedirect")),1)],512),[[xe,G(u)]]),Pe(Y("div",Ug,[Me(Dn,{class:"mr-2"}),Jt(" "+Ee(p.$t("feeds.form.postingYourUpdate")),1)],512),[[xe,G(c)]]),Pe(Y("div",{class:"alert-danger"},Ee(p.$t("feeds.form.postFailure")),513),[[xe,G(f)]]),Me(G(Qa.exports.VueEditor),{modelValue:G(l),"onUpdate:modelValue":m[0]||(m[0]=I=>Ka(l)?l.value=I:null),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:ht(["mb-4"]),placeholder:p.$t("typeSomething")},null,8,["modelValue","placeholder"]),Y("div",jg,[Y("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:m[1]||(m[1]=I=>l.value="")},"Reset"),Y("button",{class:ht(["flex flex-row w-full md:w-auto",[G(l)!==""?"primary-button":"disabled-button"]]),onClick:m[2]||(m[2]=Za(I=>G(l)!==""?h():null,["prevent"]))},[Pe(Me(Dn,{class:"mr-2"},null,512),[[xe,G(c)]]),Y("span",null,Ee(G(c)?p.$t("posting"):p.$t("post").toUpperCase()),1)],2)])]))}};const Wg={class:"mb-20"},$g={class:"categories"},Yg={class:"text-sm leading-6"},qg={class:"text-sm leading-6"},zg={class:"forms"},Xg={__name:"index",setup(e){const{t}=Ya(),n=ve("artwork");return Fs({title:n.value==="artwork"?t("meta.title.artwork.post"):t("meta.title.feed.post")}),Xa(()=>n.value,()=>{Fs({title:n.value==="artwork"?t("meta.title.artwork.post"):t("meta.title.feed.post")})}),(r,i)=>($e(),ii(Zl,{"with-footer":!1,"hide-side":!1,"hide-right-side":!0},{default:ri(()=>[Y("div",Wg,[Y("div",$g,[Y("div",{class:ht(["category",[G(n)==="feed"?"button":"theme-color"]]),onClick:i[0]||(i[0]=l=>n.value="feed")},[Pe(Me(On,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[xe,G(n)!="feed"]]),Pe(Me(On,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[xe,G(n)=="feed"]]),Y("span",Yg,Ee(r.$t("feed")),1)],2),Y("div",{class:ht(["category",[G(n)==="artwork"?"button":"theme-color"]]),onClick:i[1]||(i[1]=l=>n.value="artwork")},[Pe(Me(On,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[xe,G(n)!="artwork"]]),Pe(Me(On,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[xe,G(n)=="artwork"]]),Y("span",qg,Ee(r.$t("artworks.artwork")),1)],2)]),Y("div",zg,[Pe(Me(Hg,null,null,512),[[xe,G(n)==="feed"]]),Pe(Me(Gg,{class:"artwork"},null,512),[[xe,G(n)==="artwork"]])])])]),_:1}))}},im=nc(Xg,[["__scopeId","data-v-6919cb61"]]);export{im as default};
