import{l as H,k as X,p as Y,r as i,N as Z,S as J,c as ee,w as te,o as w,b as s,x as a,K as n,u as e,s as k,y as $,f as r,U as b,t as y,e as M,v as S,bv as oe,Q as A,V as se,W as ne}from"./entry.3ff908b9.js";import{u as ae}from"./ProBadge.5979b0c9.js";import{L as le}from"./Layout.063ecd63.js";import{W as ie}from"./WorkList.6007ea80.js";import{M as re}from"./ModalView.086d5495.js";import{_ as ue}from"./LoadingEmptyErrorMessage.55442a3a.js";import{_ as de}from"./TagFilterSelection.e9370611.js";import{_ as pe}from"./_plugin-vue_export-helper.c27b6911.js";import"./useReport.1562cb9a.js";import"./index.7225a9bd.js";import"./MiniArtworkPreview.f9593abe.js";import"./user-counters-api.7fea0895.js";import"./useSetting.fdccbf5d.js";import"./useFeed.a442ade6.js";const ce=_=>(se("data-v-59a20ef9"),_=_(),ne(),_),me={id:"lists"},ve={class:"navigations"},fe={class:"title"},ge={class:"buttons"},we={class:"filter-buttons"},be={class:"filter-buttons"},ye={class:"filter-buttons"},he={class:"inline-block w-full md:w-52 group"},ke={class:"flex items-center py-2 px-3 w-full rounded-md border-2 border-transparent outline-none md:w-52 theme-color hover:button focus:outline-none"},$e={class:"flex-1 pr-1"},_e=ce(()=>s("span",null,[s("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),xe={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-52 theme-color group-hover:scale-100"},Ce={key:0,class:"filter-buttons"},Me={class:"mt-4"},Se={key:0,class:"art-list-view-paging-control"},Pe={id:"popular-modal",class:"modal work-view"},Ve={__name:"index",setup(_){const m=H(),{oApiConfiguration:W,fetchOptions:j}=X(),z=ae(W,j());Y(()=>{d()});const v=i(void 0),P=async o=>{v.value=o,c.page=0,await d()},f=i("daily"),x=async o=>{f.value=o,c.page=0,await d()},B=i(null),D=()=>{B.value.init(oe(V.value)),A().openModal("tag-filter-selection-modal")},T=i(""),V=i(),I=i(0),K=async(o,t)=>{V.value=o,T.value=t,I.value=t!==""?t.split(",").length:0,c.page=0,A().closeModal("tag-filter-selection-modal"),await d()};Z(async()=>V.value,o=>{d()});const L=i([]),g=i({pagination:{enablePrev:!0,enableNext:!0}}),d=async()=>{const o=await O(),t=o.works,l=o.pagination;!t.length&&l.record_total===0?Q():(L.value=t,l.next_previous.next_page===null?g.value.pagination.enableNext=!1:g.value.pagination.enableNext=!0,l.next_previous.prev_page===null?g.value.pagination.enablePrev=!1:g.value.pagination.enablePrev=!0)},p=i(!0),c=J({perPage:30,page:i(0)}),O=async()=>{c.page===0&&(p.value=!0);const[o,t]=await z.getMostPopular({pagination:{perPage:c.perPage,page:c.page},range:f.value,rangeMode:u.value,explicitMode:v.value,tags:T.value});if(t)U();else return q(),o},R=async o=>{o==="prev"?c.page-=1:c.page+=1,await d(),window.scrollTo(0,0)},h=i(!1),Q=()=>{h.value=!0},C=i(!1),U=()=>{p.value=!1,C.value=!0},q=()=>{p.value=!1,h.value=!1,C.value=!1},E=i(null),G=(o,t=!1)=>{E.value.view(o,t),A().openModal("popular-modal")},u=i("views"),F=i(""),N=async(o,t)=>{u.value=o,F.value=t,await d()};return(o,t)=>(w(),ee(le,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:te(()=>[s("div",me,[s("div",ve,[s("div",fe,a(o.$t("artworks.popularArtworks")),1),s("div",ge,[s("div",we,[s("button",{class:n(["px-3 rounded-md button-item",e(I)?"button":"theme-color"]),onClick:D},a(e(I))+" "+a(o.$t("tagsApplied")),3)]),s("div",be,[s("p",{class:n(["rounded-l-md button-item",[e(f)==="daily"?"button":"theme-color"]]),onClick:t[0]||(t[0]=l=>x("daily"))},a(o.$t("daily")),3),s("p",{class:n(["button-item",[e(f)==="weekly"?"button":"theme-color"]]),onClick:t[1]||(t[1]=l=>x("weekly"))},a(o.$t("weekly")),3),s("p",{class:n(["button-item",e(f)==="monthly"?"button":"theme-color",{"rounded-r-md":!e(m).loggedIn}]),onClick:t[2]||(t[2]=l=>x("monthly"))},a(o.$t("monthly")),3),e(m).loggedIn?(w(),k("p",{key:0,class:n(["rounded-r-md button-item",e(f)==="all"?"button":"theme-color"]),onClick:t[3]||(t[3]=l=>x("all"))},a(o.$t("allTime")),3)):$("",!0)]),s("div",ye,[s("div",he,[s("button",ke,[s("span",$e,a(e(u)==="views"?o.$t("mostViewed"):e(F)),1),_e]),s("ul",xe,[s("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(u)==="views"},{"rounded-b-md":!e(m).loggedIn}]),onClick:t[4]||(t[4]=l=>N("views",o.$t("mostViewed")))},[r(b,{name:"i-mi-eye",class:n({"text-white":e(u)==="views"})},null,8,["class"]),y(" "+a(o.$t("mostViewed")),1)],2),e(m).loggedIn?(w(),k("li",{key:0,class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(u)==="likes"}]),onClick:t[5]||(t[5]=l=>N("likes",o.$t("mostLiked")))},[r(b,{name:"i-ri-heart-3-line",class:n({"text-white":e(u)==="likes"})},null,8,["class"]),y(" "+a(o.$t("mostLiked")),1)],2)):$("",!0),e(m).loggedIn?(w(),k("li",{key:1,class:n(["flex flex-row justify-between py-2 px-3 rounded-b-md cursor-pointer hover:button icon-hover-parent",{button:e(u)==="comments"}]),onClick:t[6]||(t[6]=l=>N("comments",o.$t("mostCommented")))},[r(b,{name:"i-mdi-comment-multiple-outline",class:n({"text-white":e(u)==="comments"})},null,8,["class"]),y(" "+a(o.$t("mostCommented")),1)],2)):$("",!0)])])]),e(m).loggedIn&&e(m).user.user_settings.show_explicit?(w(),k("div",Ce,[s("p",{class:n(["rounded-l-md button-item",[e(v)===void 0?"button":"theme-color"]]),onClick:t[7]||(t[7]=l=>P(void 0))},a(o.$t("default")),3),s("p",{class:n(["button-item",[e(v)==="safe"?"button":"theme-color"]]),onClick:t[8]||(t[8]=l=>P("safe"))},a(o.$t("safe")),3),s("p",{class:n(["rounded-r-md button-item",[e(v)==="explicit"?"button":"theme-color"]]),onClick:t[9]||(t[9]=l=>P("explicit"))},[r(b,{name:"i-material-symbols-explicit-outline",class:n({"text-white":e(v)==="explicit"})},null,8,["class"]),y(" "+a(o.$t("explicit")),1)],2)])):$("",!0)])]),r(ue,{loading:e(p),empty:e(h),error:e(C),fetch:d},null,8,["loading","empty","error"]),M(s("div",Me,[M(r(ie,{"section-class":"work-grid-10",works:e(L),view:G},null,8,["works"]),[[S,!e(h)]])],512),[[S,!e(p)]]),!e(p)&&!e(h)&&!e(C)?(w(),k("div",Se,[s("button",{class:n([e(g).pagination.enablePrev?"primary-button":"disabled-button"]),onClick:t[10]||(t[10]=l=>R("prev"))},[r(b,{name:"i-ion-chevron-back-outline"}),y(" "+a(o.$t("pagination.previous")),1)],2),s("button",{class:n([e(g).pagination.enableNext?"primary-button":"disabled-button"]),onClick:t[11]||(t[11]=l=>R("next"))},[y(a(o.$t("pagination.next"))+" ",1),r(b,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):$("",!0),s("div",Pe,[M(r(re,{ref_key:"popularModalViewRef",ref:E,section:"popular"},null,512),[[S,!e(p)]])]),M(r(de,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:B,class:"modal",onApply:K},null,512),[[S,!e(p)]])])]),_:1}))}},Oe=pe(Ve,[["__scopeId","data-v-59a20ef9"]]);export{Oe as default};
